/*
 * Maskerade jQuery Plug-in
 *
 * Copyright 2012 Giva, Inc. (http://www.givainc.com/labs/)
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * 	http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Date: 2017-10-25
 * Rev:  1.0.02
 */
(function(F){F.maskerade={version:"1.0.02",defaults:{style:"maskerade",mask:"",lang:"en",keyBufferDelay:1250,init:null,ready:null,changed:null,completed:null,corrected:null,invalid:null,keydown:null,keyup:null,keypress:null,formatMask:null}};F.fn.maskerade=function(K){var L=typeof arguments[0]=="string"&&arguments[0];var J=L&&Array.prototype.slice.call(arguments,1)||arguments;if(L&&this.length){var I=F.data(this[0],"maskerade");if(L.toLowerCase()=="object"){return I}else{if(I[L]){var H;this.each(function(M){var O=F.data(this,"maskerade"),N=O[L].apply(O,J);if(M==0&&N){if(!!N.jquery){H=F([]).add(N)}else{H=N;return false}}else{if(!!N&&!!N.jquery){H=H.add(N)}}});return H}else{return this}}}else{return this.each(function(){new C(this,K)})}};F.maskerade.i18n={en:{date:{defaultMask:"mm/dd/yyyy",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}}};var E,D=0;var C=function(I,Q){F.data(I,"maskerade",this);Q=F.extend({},F.maskerade.defaults,Q);var P=this,N=++D,O=F(I),M=false,H=false,L=false,K;if(F.isFunction(Q.init)){Q.init.apply(this,[O,Q])}this.val=function(R){if(arguments.length){return this.mask.setValue(R)}return this.mask.getValue()};this.destroy=function(R){if(F.isFunction(R)){R.apply(this,[O])}if("destroy" in this.mask){this.mask.destroy()}O.unbind(".maskerade");F.data(I,"maskerade",null)};this.hasFocus=function(R){return H};this.isDirty=function(R){return O.val()!==K};this.previousValue=function(){return K};var J=true;this.stopKeyPropagation=function(){J=false};this.mask=new F.maskerade.parsers.DateMask(this,O,Q);this.parser=this.mask.getParser();if(!O.attr("placeholder")){O.attr("placeholder",this.parser.getDisplayMask())}K=O.val();O.attr("autocomplete","off").bind("focus.maskerade",function(R){H=true;if(F.trim(O.val()).length===0){setTimeout(function(){O.val(P.parser.getDisplayMask());P.parser.selectFirstMaskToken()},0);R.preventDefault()}else{if(!M){setTimeout(function(){P.parser.selectFirstMaskToken()},0)}R.preventDefault()}}).bind("blur.maskerade",function(R){H=false;if(P.mask.hasCompleted()===false){P.mask.setValue("");O.val("");P.parser.resetMaskValues(false)}K=O.val()}).bind("mousedown.maskerade",function(R){M=true;setTimeout(function(){M=false},200)}).bind("input.maskerade",function(R){if(L){return }P.mask.setValue(O.val())}).bind("paste.maskerade",function(R){L=true;setTimeout(function(){L=false;O.triggerHandler("input.maskerade",arguments)},0)}).bind("change.maskerade",function(R){O.triggerHandler("input.maskerade",arguments)}).bind("click.maskerade",function(S){S.preventDefault();var R=A.get(O[0]);if((R.end-R.start)!==O.val().length){P.parser.selectMaskTokenByCaret()}if(P.mask.getKeyboard()){P.mask.getKeyboard().reset()}}).bind("keydown.maskerade keypress.maskerade keyup.maskerade",function(T){if(T.type==="keyup"){setTimeout(function(){J=true},0)}if(J===false){return }var S=T.type+"Handler";if(Q[T.type]){if(Q[T.type].apply(this,[T,P.mask])===false){return T.preventDefault()}}if(!P.mask[S]){return }var R=P.mask[S].apply(this,[T]);if((typeof R!="boolean")&&(T.ctrlKey||T.altKey||((T.which>=112)&&(T.which<=123)))){return }if(R!==true){T.preventDefault()}});if(F.isFunction(Q.ready)){Q.ready.apply(this,[O,Q,mask])}return this};F.maskerade.Keyboard=function(J,I){var H="",I=(B.Number.isNumeric(I))?I:1250;this.monitor=function(N,K,L){var M=String.fromCharCode(N.which);if((!J||J.test(M))&&!N.ctrlKey&&!N.altKey){this.add(M)}else{return false}this.reset(I);if(K){K.apply(L||this,[this,M])}return true};this.getBuffer=function(){return H};this.add=function(K){H+=K};this.clear=function(){var K=H;H="";if(this.onclear){this.onclear.apply(this,[K])}};this.cancelReset=function(){if(this.cancelId){window.clearTimeout(this.cancelId);delete this.cancelId}};this.reset=function(K){if(!K){return this.clear()}this.cancelReset();var L=this;this.cancelId=window.setTimeout(function(){L.clear()},K)}};F.maskerade.MaskParser=function(R,P,Q){var J=P.data("maskerade"),K=0,O=[],M=0,I=[],L=false,N,H=0;R=P.data("mask")||R;if(Q.formatMask==="toLowerCase"){N=R.toLowerCase()}else{if(Q.formatMask==="toUpperCase"){N=R.toUpperCase()}else{if(Q.formatMask&&F.isFunction(Q.formatMask)){N=Q.formatMask.apply(this,[R,P,Q])}else{N=R}}}this.getMask=function(){return R};this.getDisplayMask=function(){return N};this.isCompleted=function(){return L};this.setCompleted=function(S){var T=L;L=S;if(Q.completed&&(L!==T)){Q.completed.apply(this,[L,P,Q])}};this.getMaskValue=function(V){var W="",S=[];for(var U=0,T=O.length;U<T;U++){W+=(O[U].value||O[U].display);if(!O[U].delim&&!O[U].value){S.push(O[U])}}if(V===true){this.setCompleted(S.length===0)}return W};this.repaint=function(){P.val(this.getMaskValue(true));if(J.hasFocus()){this.selectCurrentMaskToken()}};this.parse=function(W){var Y=new RegExp(W.getRegEx(),"g"),U=R.match(Y),S=U.length;for(var V=0;V<R.length;V++){var T=R.substring(V),Z=U[M];var X=Z?T.indexOf(Z):T.length;if(X){O.push({mask:T.substring(0,X),display:N.substring(V,V+X),delim:true,pos:{start:V,end:V+X},id:H++});V+=X}if(Z){I.push(O.length);O.push({mask:Z,display:N.substring(V,V+Z.length),rule:W.get(Z),delim:false,pos:{start:V,end:V+Z.length},id:H++,tokenId:I.length-1,value:E});V+=(Z.length-1)}M++}return this};this.getMaskTokens=function(){var S=[];for(var T=0,U=I.length;T<U;T++){S.push(O[I[T]])}return S};this.setCurrentToken=function(S){if(!S||S<0){S=0}else{if(S>O.length){S=O.length-1}}K=S};this.getCurrentToken=function(){return O[K]};this.getFirstMaskToken=function(){return O[I[0]]};this.isFirstMaskToken=function(){return this.getCurrentToken().id===O[I[0]].id};this.getLastMaskToken=function(){return O[I[I.length-1]]};this.isLastMaskToken=function(){return this.getCurrentToken().id===O[I[I.length-1]].id};this.getPrevMaskToken=function(){var T=this.getCurrentToken();if(T.id!==this.getFirstMaskToken().id){var S=T.id;while(S--){if(!O[S].delim){T=O[S];break}}}return T};this.getNextMaskToken=function(){var T=this.getCurrentToken();if(T.id!==this.getLastMaskToken().id){for(var S=T.id+1;S<O.length;S++){if(!O[S].delim){T=O[S];break}}}return T};this.getMaskToken=function(S){if(!S||S<0){S=0}else{if(S>I.length){S=I.length-1}}return O[I[S]]};this.setMaskValue=function(T,V,S){if(typeof T=="number"){T=this.getMaskToken(T)}else{if(!T){T=this.getCurrentToken()}}var U=((V!=E)&&(V!=null));T.value=(U)?V.toString():V;if(!U&&this.isCompleted()){this.setCompleted(false)}this.refreshTokenPositions(T.id);if(S!==false){this.repaint()}};this.resetMaskValues=function(S){for(var T=0,U=I.length;T<U;T++){O[I[T]].value=E}this.setCompleted(false);this.refreshTokenPositions();if(S!==false){this.repaint()}};this.refreshTokenPositions=function(T){var T=T||0,W=O[T].pos.start,S=0;for(var V=T,U=O.length;V<U;V++){S=(O[V].value||O[V].display).length;O[V].pos.start=W;O[V].pos.end=W+S;W=O[V].pos.end}};this.findTokenByMask=function(S){var T;if(typeof S=="string"){S=[S]}for(var U=0,V=O.length;U<V;U++){if(F.inArray(O[U].mask,S)!==-1){T=O[U];break}}if(T){return T}};this.findTokenByPosition=function(W){var T,S;for(var U=0,V=O.length;U<V;U++){if((W>=O[U].pos.start)&&(W<O[U].pos.end)){if(O[U].delim){if(S){U=S.id}else{U++}}T=O[U];break}if(!O[U].delim){S=O[U]}}if(!T){T=S}return T};this.selectMaskToken=function(U){var S=this.getMaskToken(U),T=S.pos;A.set(P[0],T.start,T.end);this.setCurrentToken(S.id)};this.selectMaskTokenByPosition=function(U){var S=this.findTokenByPosition(U),T=S.pos;A.set(P[0],T.start,T.end);this.setCurrentToken(S.id)};this.selectMaskTokenByCaret=function(){var S=this.findTokenByPosition(A.get(P[0]).start),T=S.pos;A.set(P[0],T.start,T.end);this.setCurrentToken(S.id)};this.selectCurrentMaskToken=function(S){this.selectMaskToken(this.getCurrentToken().tokenId)};this.selectFirstMaskToken=function(S){this.selectMaskToken(this.getFirstMaskToken().tokenId)};this.selectPrevMaskToken=function(S){this.selectMaskToken(this.getPrevMaskToken().tokenId)};this.selectNextMaskToken=function(S){this.selectMaskToken(this.getNextMaskToken().tokenId)};this.selectLastMaskToken=function(S){this.selectMaskToken(this.getLastMaskToken().tokenId)};return this};F.maskerade.MaskRule=function(){var H={},I=[];this.add=function(J,L,K){H[J]={mask:J,maskChr:J.substring(0,1),type:L,options:K};I.push(H[J])};this.get=function(J){return H[J]};this.getRegEx=function(){var K=[],J=I.length;while(J--){K.push("(?:"+I[J].mask+")")}return"("+K.join("|")+")"};return this};var G=new F.maskerade.MaskRule();G.add("d","day");G.add("dd","day");G.add("m","month");G.add("mm","month");G.add("mmm","month");G.add("mmmm","month");G.add("qq","quarter");G.add("qqq","quarter");G.add("qqqq","quarter");G.add("QQ","quarter");G.add("QQQ","quarter");G.add("QQQQ","quarter");G.add("yy","year");G.add("yyyy","year");G.add("h","hour");G.add("hh","hour");G.add("H","hour");G.add("HH","hour");G.add("M","minute");G.add("MM","minute");G.add("s","second");G.add("ss","second");G.add("t","ampm");G.add("tt","ampm");F.maskerade.parsers={DateMask:function(O,H,L){var S=this,X=B.i18n.get(L.lang,"date.defaultMask");var K=new F.maskerade.MaskParser(L.mask||X,H,L);K.parse(G);var Q=K.getMaskTokens();var J=new F.maskerade.Keyboard(/\w/,L.keyBufferDelay);var P;J.onclear=function(){P=S.getDate()};var U=function(){var b=H.data("value");var a=H.data("min"),c=H.data("max");if(a&&a.length){L.min=B.Date.convertISO8601(a)}if(c&&c.length){L.max=B.Date.convertISO8601(c)}L=F.extend(true,{},L,{bindings:{min:H.data("min-bind"),max:H.data("max-bind")}});if(b&&b.length){S.setValue(B.Date.convertISO8601(b))}else{if(H.val().length){S.setValue(H.val())}}return S};this.destroy=function(){F.data(H[0],"date",null)};this.getValue=function(){return this.hasDate()?this.getDate():E};this.setValue=function(b,a){if(((typeof b=="string")&&(b.length===0))||(b==E)){b=E;I()}else{if(!(b instanceof Date)){b=B.Date.getDateFromString(b.toString(),a||K.getMask(),L.lang)}}this.setDate(b);this.updateDateParts("init");this.maskUpdate()};this.getParser=function(){return K};this.getKeyboard=function(){return J};this.getMaskByType=function(b){for(var a=0,c=Q.length;a<c;a++){if(T(Q[a].mask).type===b){return Q[a]}}return };this.hasCompleted=function(){return this.hasDate()};this.keydownHandler=function(b){var a;if(b.shiftKey&&(b.which===9)){O.stopKeyPropagation();J.reset();if(K.isFirstMaskToken()){return true}K.selectPrevMaskToken()}else{if(b.which===9){O.stopKeyPropagation();J.reset();if(K.isLastMaskToken()){return true}K.selectNextMaskToken()}else{if(b.which===36){O.stopKeyPropagation();J.reset();K.selectFirstMaskToken()}else{if(b.which===35){O.stopKeyPropagation();J.reset();K.selectLastMaskToken()}else{if(b.which===37){O.stopKeyPropagation();J.reset();K.selectPrevMaskToken()}else{if(b.which===39){O.stopKeyPropagation();J.reset();K.selectNextMaskToken()}else{if(b.which===38){J.reset();S.maskAdd(1)}else{if(b.which===40){J.reset();S.maskAdd(-1)}else{if((b.which===8)||(b.which===46)){O.stopKeyPropagation();J.reset();S.maskDelete(false)}else{if(b.ctrlKey&&(F.inArray(b.which,[65,67,86])>-1)){O.stopKeyPropagation();J.reset();a=true}else{if(b.which===27){J.reset()}else{a=true}}}}}}}}}}}return a};this.keypressHandler=function(c){var b=false,a;J.monitor(c,function(d,f){var e=K.getCurrentToken();a=d.getBuffer();b=S.maskSet(a,true)});if(!b&&L.invalid){L.invalid.apply(S,[a,K.getCurrentToken()])}};this.keyupHandler=function(b){var a;if(b.which===27){if(O.isDirty()){S.setValue(O.previousValue());if(!S.hasDate()){K.selectFirstMaskToken()}}}return a};var Y,W,V,I=function(){V={month:E,day:E,year:E,quarter:E,hour:E,minute:E,second:E,millisecond:E,ampm:E}};this.getDate=function(){return Y};var R=function(c){if(!L.bindings[c]){return L[c]}var a=F(L.bindings[c]),b=a.data("maskerade");if(a.length===0||!b){return L[c]}return b.mask.getDate()};this.setDate=function(a){if(!B.Date.isDate(a)){a=new Date(E)}else{if(L.bindings.min){L.min=R("min")}if(L.bindings.max){L.max=R("max")}if(B.Date.isDate(L.min)&&(a.getTime()<L.min.getTime())){return this.setValue(L.min)}else{if(B.Date.isDate(L.max)&&(a.getTime()>L.max.getTime())){return this.setValue(L.max)}}}W=Y;Y=a;F.data(H[0],"date",Y);if(L.change&&(!B.Date.isDate(Y)||((B.Date.isDate(W)&&W.getTime()||W)!=(B.Date.isDate(Y)&&Y.getTime()||Y)))){L.change.apply(this,[Y,H])}};I();this.hasDate=function(){return B.Date.isDate(Y)};var T=function(a){try{var b=G.get(a);b.value=V[b.type];return b}catch(c){throw"Invalid date type detected"}};this.updateDate=function(b){if(b){if((b.maskChr==="q")&&(V.quarter)){V.month=(V.quarter-1)*3;V.day=1}else{if((b.maskChr==="Q")&&(V.quarter)){V.month=((V.quarter-1)*3)+2;V.day=[31,30,30,31][V.quarter-1]}else{if((b.type==="quarter")&&(V.quarter==E)){V.month=E;V.day=E}}}}if(K.isCompleted()){if(!V.year){V.year=1970}if(!V.month){V.month=0}if(!V.day){V.day=1}}var a=new Date(V.year,V.month,V.day);if(B.Date.isDate(a)){var c=B.Date.fixDate(a,new Date(V.year,V.month),"day",V.day);if(c.getTime()!=a.getTime()){if(L.corrected){L.corrected.apply(this,[a,c,H])}a=c;V.day=a.getDate()}}if(V.hour!=E){a.setHours(V.hour);V.ampm=(V.hour<12)?"am":"pm"}if(V.minute!=E){a.setMinutes(V.minute)}if(V.second!=E){a.setSeconds(V.second)}if(V.millisecond!=E){a.setMilliseconds(V.millisecond)}this.setDate(a)};this.updateDateParts=function(b){if(!this.hasDate()){return }V.year=Y.getFullYear();V.month=Y.getMonth();V.day=Y.getDate();if(V.quarter||(b==="init")){V.quarter=B.Date.getQuarter(Y)}var a=(F.inArray(b,["init","hour","minute","second"])>-1);if(V.hour||a){V.hour=Y.getHours();V.ampm=(V.hour/12<1)?"am":"pm"}if(V.minute||a){V.minute=Y.getMinutes()}if(V.second||a){V.second=Y.getSeconds()}if(V.millisecond||a){V.millisecond=Y.getMilliseconds()}};this.dateAdd=function(d,c){var b=T(d);if(b.type==="ampm"){if(V.hour==E||V.ampm==E){return }b=T(this.getMaskByType("hour").mask);if(this.hasDate()){var a=(Y.getHours()+Math.abs(c*12))%24;Y.setHours(a);this.updateDateParts(b.type)}else{var a=(b.value+Math.abs(c*12))%24;V[b.type]=B.Date.setValidRange(b.maskChr,a);this.updateDate(b)}return }if(b.value==E){c=0;if(b.type==="year"){b.value=(new Date()).getFullYear()}else{if(b.type==="month"){b.value=0}else{if(b.type==="day"){b.value=1}else{if(b.type.indexOf("quarter")==0){b.value=1}else{if(b.maskChr==="h"){b.value=12}else{b.value=0}}}}}}if(this.hasDate()){this.setDate(B.Date.dateAdd(Y,b.maskChr,c));this.updateDateParts(b.type)}else{V[b.type]=B.Date.setValidRange(b.maskChr,(b.value+c));this.updateDate(b)}};var Z=function(c,b){var a=B.i18n.get(L.lang,((b===true)?"date.monthNamesShort":"date.monthNames"));try{return a[c]}catch(d){throw"No month name found!"}};var N=function(a){a=Number(a);if(a===0){return 12}else{if(a>12){return a%12}}return a};var M=function(c,d,b,a){if(M.firstToken==null){M.firstToken=X.substring(X.search(/(d{1,2})|(m{1,4})/),1)}return"Q"+c+" - "+((M.firstToken==="m")?Z(d,a)+" "+b:b+" "+Z(d,a))};M.firstToken=null;this.maskValue=function(c,d){if(d==E){return d}var a;switch(c){case"dd":case"HH":case"MM":case"ss":return B.String.padLeft(d,2,"0");case"m":return d+1;case"mm":return B.String.padLeft(d+1,2,"0");case"mmm":return Z(d,true);case"mmmm":return Z(d);case"qq":case"QQ":return"Q"+d;case"qqq":case"QQQ":case"qqqq":case"QQQQ":var b=(c.length===3);return M(d,V.month,V.day,b);case"yy":return B.String.padLeft(d,4,"0").substring(2);case"yyyy":return B.String.padLeft(d,4,"0").substring(0,4);case"h":return N(d);case"hh":return B.String.padLeft(N(d),2,"0");case"t":return d.substring(0,1);case"tt":return d;default:return d}return d};this.maskUpdate=function(){for(var a=0,c=Q.length;a<c;a++){var d=T(Q[a].mask);K.setMaskValue(Q[a],this.maskValue(d.mask,d.value),false)}var b=K.isCompleted();K.repaint();if(!b&&K.isCompleted()){this.updateDate()}};this.maskAdd=function(b){var a=K.getCurrentToken(),c=this.dateAdd(a.mask,b);this.maskUpdate()};this.valueLookup=function(a,d){var b=B.Number.isNumeric(d);a.value=(b?d*1:d);if(a.type==="month"&&b){a.value-=1}else{if(a.mask==="yyyy"&&(d.length<=2)){var c=(new Date()).getFullYear(),f=Math.round(c/100)*100;a.value=f+(d*1);if(a.value>(c+5)){a.value-=100}}else{if(F.inArray(a.mask,["mmm","mmmm"])>-1){var e=B.i18n.findIndex(L.lang,"date."+(a.mask==="mmm"?"monthNamesShort":"monthNames"),d,true);a.valid=B.Number.isNumeric(e);if(a.valid){a.value=e}return a}else{if(a.type==="ampm"){a.valid=/^[ap]m?$/i.test(a.value);if(a.valid){if(a.value.substring(0,1).toLowerCase()==="a"){a.value="am"}else{a.value="pm"}}return a}}}}a.valid=b&&B.Date.isValidRange(a.maskChr,a.value);return a};this.isCompletedValue=function(b,c){var d=function(e){return((c.length===e)&&(b.value==c))};switch(b.mask){case"mmm":case"mmmm":if(!B.Number.isNumeric(c)){return(B.i18n.findAll(L.lang,"date."+(b.mask==="mmm"?"monthNamesShort":"monthNames"),c,true).length===1)}case"m":case"mm":return(((c.length===2)&&(b.value+1===(c*1)))||(b.value>0));break;case"d":case"dd":return(d(2)||(b.value>3))&&(b.value===c*1);break;case"h":case"hh":var a=b.value%12;return((d(2)||(a>1))&&(a===c*1))||(c==12);break;case"H":case"HH":return(d(2)||(b.value>2))&&(b.value===c*1);break;case"M":case"MM":case"s":case"ss":return(d(2)||(b.value>5))&&(b.value===c*1);break;case"yy":return d(2);break;case"qq":case"qqq":case"qqqq":case"QQ":case"QQQ":case"QQQQ":return(b.value==c);break;case"t":case"tt":return(F.inArray(c,["a","p"])>-1);break;case"yyyy":return d(4);break}return false};this.maskDelete=function(a){if(A.isAllSelected(H[0])){K.selectFirstMaskToken();this.setValue(E)}else{this.maskSet(E,a)}};this.maskSet=function(e,a){var c=K.getCurrentToken(),d=T(c.mask);if(e==E){K.setCompleted(false);V[d.type]=e;this.updateDate(d);this.maskUpdate();return true}var f=this.valueLookup(d,e);if(f.valid){if(this.hasDate()){if(f.type==="ampm"){var b=((V.hour+12)%24%12)+(f.value==="pm"?12:0);V.ampm=f.value;Y.setHours(b);this.updateDateParts("hours")}else{if(f.maskChr==="h"){f.value=((f.value+12)%24%12)+(V.ampm==="pm"?12:0)}this.setDate(B.Date.dateSet(a&&B.Date.isDate(P)&&P||Y,d.maskChr,f.value));this.updateDateParts(d.type)}}else{if(f.type==="ampm"){if(isNaN(V.hour)){V.hour=0}var b=((V.hour+12)%24%12)+(f.value==="pm"?12:0);V.ampm=f.value;V.hour=b}else{if(f.maskChr==="h"){f.value=((f.value+12)%24%12)+(V.ampm==="pm"?12:0)}V[d.type]=f.value}this.updateDate(d)}this.maskUpdate();if((a===true)&&this.isCompletedValue(d,e)){J.reset();K.selectNextMaskToken()}}else{if(a===true){if(!(/^[0]+$/.test(e))){J.reset()}}}return f.valid};return U()}};var B={i18n:{get:function(M,I){var L=F.maskerade.i18n[M]||F.maskerade.i18n.en,K=I.split(".");for(var H=0,J=K.length;H<J;H++){L=L[K[H]]}return L},findIndex:function(O,K,M,I){var H=this.get(O,K),M=M.toLowerCase();for(var J=0,L=H.length;J<L;J++){var N=H[J].toLowerCase();if((N===M)||((I===true)&&(N.indexOf(M)===0))){return J}}return },findAll:function(H,O,N,M){var J=[],P=this.get(H,O),N=N.toLowerCase();for(var I=0,K=P.length;I<K;I++){var L=P[I].toLowerCase();if((L===N)||((M===true)&&(L.indexOf(N)===0))){J.push([I,P[I]])}}return J}},String:{padLeft:function(K,J,L){var K=K.toString(),H=K.length,L=L||" ";for(var I=H;I<J;I++){K=L+K}return K}},Number:{inRange:function(I,J,H){return((I>=J)&&(I<=H))},setInRange:function(I,J,H){if(I<J){return H}else{if(I>H){return J}}return I},isNumeric:function(H){return !isNaN(H*1)}},Date:{isDate:function(H){return((null!=H)&&(typeof H.getDate!=="getTime")&&!isNaN(H.getTime()))},isValidRange:function(H,I){switch(H){case"m":return B.Number.inRange(I,0,11);case"d":return B.Number.inRange(I,1,31);case"q":case"Q":return B.Number.inRange(I,1,4);case"h":return B.Number.inRange(I,1,12);case"H":return B.Number.inRange(I,0,23);case"M":case"s":return B.Number.inRange(I,0,59)}return B.Number.inRange(I,0,9999)},setValidRange:function(H,I){switch(H){case"m":return B.Number.setInRange(I,0,11);case"d":return B.Number.setInRange(I,1,31);case"q":case"Q":return B.Number.setInRange(I,1,4);case"h":case"H":return B.Number.setInRange(I,0,23);case"M":case"s":return B.Number.setInRange(I,0,59)}return B.Number.setInRange(I,0,9999)},daysInMonth:function(H){var I=H.getYear(),J=H.getMonth();return 32-(new Date(I,J,32)).getDate()},getQuarter:function(I){var M=I.getTime(),N=new Date(I.valueOf()),H=new Date(I.valueOf()),L=[[0,1,2,31],[3,1,5,30],[6,1,8,30],[9,1,11,31]];for(var J=0,K=L.length;J<K;J++){N.setMonth(L[J][0]);N.setDate(L[J][1]);H.setDate(1);H.setMonth(L[J][2]);H.setDate(L[J][3]);if((N.getTime()<=M)&&(M<=H.getTime())){return J+1}}return },fixDate:function(N,J,K,L){var H=new Date(N.valueOf()),M=N.getDate(),I=((K==="day")&&(L!=E))?L:N.getDate();if(M!==I){H.setTime(H.getTime()-(M*86400000))}else{if((I===B.Date.daysInMonth(J))&&(!this.isFebruaryEOMYearChange(N,J))){H.setDate(B.Date.daysInMonth(H))}}if((K==="month")&&(H.getMonth()!==L)){H.setMonth(L);H.setDate(B.Date.daysInMonth(H))}else{if((K==="year")&&(H.getMonth()!==J.getMonth())){H.setMonth(J.getMonth());H.setDate(B.Date.daysInMonth(H))}}return H},isFebruaryEOMYearChange:function(I,H){return((I.getFullYear()!==H.getFullYear())&&(H.getMonth()===1)&&(H.getDate()===28))},dateSet:function(I,J,K){var H=new Date(I.valueOf());switch(J){case"y":H.setFullYear(K);H=this.fixDate(H,I,"year",K);break;case"m":H.setMonth(K);H=this.fixDate(H,I,"month",K);break;case"d":H.setDate(K);H=this.fixDate(H,I,"day",K);break;case"q":H.setDate(1);H.setMonth(((K*1)-1)*3);break;case"Q":H.setDate(1);H.setMonth((((K*1))*3)-1);H.setDate([31,30,30,31][((K*1)-1)]);break;case"h":case"H":H.setHours(K);break;case"M":H.setMinutes(K);break;case"s":H.setSeconds(K);break}return H},dateAdd:function(I,J,K){if(!K||(K===0)){return I}var H=new Date(I.valueOf());switch(J){case"y":H.setFullYear(H.getFullYear()+K);H=this.fixDate(H,I,"year",H.getMonth());break;case"m":var L=H.getMonth()+K;H.setMonth(L);H=this.fixDate(H,I,"month",((L+12)%12%12));break;case"d":H.setDate(H.getDate()+K);break;case"q":case"Q":var L=H.getMonth()+(K*3);H.setMonth(L);H=this.fixDate(H,I,"month",L);H=this.dateSet(H,J,this.getQuarter(H));break;case"h":case"H":H.setHours(H.getHours()+K);break;case"M":H.setMinutes(H.getMinutes()+K);break;case"s":H.setSeconds(H.getSeconds()+K);break}return H},getDateFromString:function(O,a,k){var b=0,L=/((?:tt)|(?:t)|(?:ss)|(?:s)|(?:MM)|(?:M)|(?:HH)|(?:H)|(?:hh)|(?:h)|(?:QQQQ)|(?:QQQ)|(?:QQ)|(?:qqqq)|(?:qqq)|(?:qq)|(?:yyyy)|(?:yy)|(?:mmmm)|(?:mmm)|(?:mm)|(?:m)|(?:dd)|(?:d))/g,K=a.match(L),T=0,M=O,S=[],H=-1;for(var b=0,J=a.length;b<J;b++){var W=a.substring(b),I=K[T];var d=I?W.indexOf(I):W.length;if(d){var f=W.substring(0,d),U=M.indexOf(f);if(S.length){var h=S[H].mask.toLowerCase();if(h==="qqq"||h==="qqqq"){M=M.replace(new RegExp("(^[Qq][1-4]) - \\w{3,} \\d+("+f+")"),"$1$2");U=M.indexOf(f)}S[H].value=M.substring(0,U)}M=M.substring(U+f.length);b+=d}if(I){H++;S.push({mask:I,value:null});b+=(I.length-1)}T++}if(S.length&&(S[H].value==null)){S[H].value=M}var N=1970,e=0,Z=1,c=0,X=0,P=0,R;for(var b=0,J=S.length;b<J;b++){var V=S[b].value;switch(S[b].mask){case"yy":case"yyyy":if(V.length==2){N=parseInt(V,10);N+=(N>((new Date().getFullYear()-2000)+5))?1900:2000}else{N=V}break;case"m":case"mm":e=parseInt(V,10)-1;break;case"mmm":case"mmmm":var Q=B.i18n.get(k,"date."+(S[b].mask==="mmm"?"monthNamesShort":"monthNames"));for(var Y=0,g=Q.length;Y<g;Y++){if(Q[Y]===V){e=Y;break}}break;case"d":case"dd":Z=V;break;case"qq":case"qqq":case"qqqq":if(V==1||(V.toUpperCase()==="Q1")){e=0;Z=1}else{if(V==2||(V.toUpperCase()==="Q2")){e=3;Z=1}else{if(V==3||(V.toUpperCase()==="Q3")){e=6;Z=1}else{if(V==4||(V.toUpperCase()==="Q4")){e=9;Z=1}}}}break;case"QQ":case"QQQ":case"QQQQ":if(V==1||(V.toUpperCase()==="Q1")){e=2;Z=31}else{if(V==2||(V.toUpperCase()==="Q2")){e=5;Z=30}else{if(V==3||(V.toUpperCase()==="Q3")){e=8;Z=30}else{if(V==4||(V.toUpperCase()==="Q4")){e=11;Z=31}}}}break;case"h":case"hh":case"H":case"HH":c=parseInt(V,10);break;case"M":case"MM":X=V;break;case"s":case"ss":P=V;break;case"t":case"tt":R=(V.toLowerCase().indexOf("p")>-1)?"pm":"am";break}}if((R==="pm")&&(c<12)){c+=12}else{if((R==="am")&&(c>=12)){c-=12}}return new Date(N,e,Z,c,X,P)},convertISO8601:function(J,H){var K="([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(.([0-9]+))?)?(Z?(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?";var M=J.match(new RegExp(K));var L=0;var I=new Date(M[1],0,1);if(M[3]){I.setMonth(M[3]-1)}if(M[5]){I.setDate(M[5])}if(M[7]){I.setHours(M[7])}if(M[8]){I.setMinutes(M[8])}if(M[10]){I.setSeconds(M[10])}if(M[12]){I.setMilliseconds(Number("0."+M[12])*1000)}if(H===false||!M[14]){return I}if(M[14]){L=(Number(M[16])*60)+Number(M[17]);L*=((M[15]=="-")?1:-1)}L-=I.getTimezoneOffset();time=(Number(I)+(L*60*1000));I.setTime(Number(time));return I}}};F.maskerade.Helper=B;var A={text:function(I){var J="";if(I.setSelectionRange){J=I.value.substring(I.selectionStart,I.selectionEnd)}else{if(document.selection){var H=document.selection.createRange();if(H.parentElement()==I){J=H.text}}}return J},get:function(I){var J={},H;if(document.selection){H=document.selection.createRange().duplicate();H.moveEnd("character",I.value.length);if(H.text.length===0){J.start=I.value.length}else{J.start=I.value.lastIndexOf(H.text)}H.moveStart("character",-I.value.length);J.end=H.text.length}else{J={start:I.selectionStart,end:I.selectionEnd}}return J},set:function(J,K,I){if(J.setSelectionRange){J.setSelectionRange(K,I)}else{if(J.createTextRange){var H=J.createTextRange();H.collapse(true);H.moveStart("character",K);H.moveEnd("character",I-K);H.select()}else{if(J.selectionStart){J.selectionStart=K;J.selectionEnd=I}}}J.focus()},isAllSelected:function(I){var H=this.get(I);return((H.start===0)&&(H.end&&I.value.length))},setAsync:function(K,L,H){var I=this,J=arguments;setTimeout(function(){I.set.apply(I,J)},0)}}})(jQuery);