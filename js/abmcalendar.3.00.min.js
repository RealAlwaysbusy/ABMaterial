!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function b(b,d){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,!(!b.href||!f||"map"!==e.nodeName.toLowerCase())&&(g=a("img[usemap='#"+f+"']")[0],!!g&&c(g))):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||d:d)&&c(b)}function c(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}a.ui=a.ui||{},a.extend(a.ui,{version:"1.11.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({scrollParent:function(b){var c=this.css("position"),d="absolute"===c,e=b?/(auto|scroll|hidden)/:/(auto|scroll)/,f=this.parents().filter(function(){var b=a(this);return(!d||"static"!==b.css("position"))&&e.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);return"fixed"!==c&&f.length?f:a(this[0].ownerDocument||document)},uniqueId:function(){var a=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(c){return b(c,!isNaN(a.attr(c,"tabindex")))},tabbable:function(c){var d=a.attr(c,"tabindex"),e=isNaN(d);return(e||d>=0)&&b(c,!e)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(b,c){function d(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),f&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var e="Width"===c?["Left","Right"]:["Top","Bottom"],f=c.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+c]=function(b){return void 0===b?g["inner"+c].call(this):this.each(function(){a(this).css(f,d(this,b)+"px")})},a.fn["outer"+c]=function(b,e){return"number"!=typeof b?g["outer"+c].call(this,b):this.each(function(){a(this).css(f,d(this,b,!0,e)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus(),d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),disableSelection:function(){var a="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(a+".ui-disableSelection",function(a){a.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(b){if(void 0!==b)return this.css("zIndex",b);if(this.length)for(var c,d,e=a(this[0]);e.length&&e[0]!==document;){if(c=e.css("position"),("absolute"===c||"relative"===c||"fixed"===c)&&(d=parseInt(e.css("zIndex"),10),!isNaN(d)&&0!==d))return d;e=e.parent()}return 0}}),a.ui.plugin={add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c,d){var e,f=a.plugins[b];if(f&&(d||a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType))for(e=0;f.length>e;e++)a.options[f[e][0]]&&f[e][1].apply(a.element,c)}}}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){var b=0,c=Array.prototype.slice;return a.cleanData=function(b){return function(c){var d,e,f;for(f=0;null!=(e=c[f]);f++)try{d=a._data(e,"events"),d&&d.remove&&a(e).triggerHandler("remove")}catch(a){}b(c)}}(a.cleanData),a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split(".")[0];return b=b.split(".")[1],e=j+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){return this._createWidget?void(arguments.length&&this._createWidget(a,b)):new g(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){return a.isFunction(d)?void(i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)};return function(){var b,c=this._super,f=this._superApply;return this._super=a,this._superApply=e,b=d.apply(this,arguments),this._super=c,this._superApply=f,b}}()):void(i[b]=d)}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix||b:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g),g},a.widget.extend=function(b){for(var d,e,f=c.call(arguments,1),g=0,h=f.length;h>g;g++)for(d in f[g])e=f[g][d],f[g].hasOwnProperty(d)&&void 0!==e&&(b[d]=a.isPlainObject(e)?a.isPlainObject(b[d])?a.widget.extend({},b[d],e):a.widget.extend({},e):e);return b},a.widget.bridge=function(b,d){var e=d.prototype.widgetFullName||b;a.fn[b]=function(f){var g="string"==typeof f,h=c.call(arguments,1),i=this;return f=!g&&h.length?a.widget.extend.apply(null,[f].concat(h)):f,g?this.each(function(){var c,d=a.data(this,e);return"instance"===f?(i=d,!1):d?a.isFunction(d[f])&&"_"!==f.charAt(0)?(c=d[f].apply(d,h),c!==d&&void 0!==c?(i=c&&c.jquery?i.pushStack(c.get()):c,!1):void 0):a.error("no such method '"+f+"' for "+b+" widget instance"):a.error("cannot call methods on "+b+" prior to initialization; attempted to call method '"+f+"'")}):this.each(function(){var b=a.data(this,e);b?(b.option(f||{}),b._init&&b._init()):a.data(this,e,new d(f,this))}),i}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(c,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=b++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this.options=a.widget.extend({},this.options,this._getCreateOptions(),c),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(b,c){var d,e,f,g=b;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof b)if(g={},d=b.split("."),b=d.shift(),d.length){for(e=g[b]=a.widget.extend({},this.options[b]),f=0;d.length-1>f;f++)e[d[f]]=e[d[f]]||{},e=e[d[f]];if(b=d.pop(),1===arguments.length)return void 0===e[b]?null:e[b];e[b]=c}else{if(1===arguments.length)return void 0===this.options[b]?null:this.options[b];g[b]=c}return this._setOptions(g),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!b),b&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){return b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof g?f[g]:g).apply(f,arguments):void 0}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^([\w:-]*)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(b,c){c=(c||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,b.unbind(c).undelegate(c),this.bindings=a(this.bindings.not(b).get()),this.focusable=a(this.focusable.not(b).get()),this.hoverable=a(this.hoverable.not(b).get())},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}}),a.widget}),function(a){"function"==typeof define&&define.amd?define(["jquery","./widget"],a):a(jQuery)}(function(a){var b=!1;return a(document).mouseup(function(){b=!1}),a.widget("ui.mouse",{version:"1.11.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(c){if(!b){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(c),this._mouseDownEvent=c;var d=this,e=1===c.which,f=!("string"!=typeof this.options.cancel||!c.target.nodeName)&&a(c.target).closest(this.options.cancel).length;return!(e&&!f&&this._mouseCapture(c))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=this._mouseStart(c)!==!1,!this._mouseStarted)?(c.preventDefault(),!0):(!0===a.data(c.target,this.widgetName+".preventClickEvent")&&a.removeData(c.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),c.preventDefault(),b=!0,!0))}},_mouseMove:function(b){if(this._mouseMoved){if(a.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button)return this._mouseUp(b);if(!b.which)return this._mouseUp(b)}return(b.which||b.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(c){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,c.target===this._mouseDownEvent.target&&a.data(c.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(c)),b=!1,!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}),function(a){"function"==typeof define&&define.amd?define(["jquery","./core","./mouse","./widget"],a):a(jQuery)}(function(a){return a.widget("ui.draggable",a.ui.mouse,{version:"1.11.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(a,b){this._super(a,b),"handle"===a&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(b){var c=this.options;return this._blurActiveElement(b),!(this.helper||c.disabled||a(b.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(b),!!this.handle&&(this._blockFrames(c.iframeFix===!0?"iframe":c.iframeFix),!0))},_blockFrames:function(b){this.iframeBlocks=this.document.find(b).map(function(){var b=a(this);return a("<div>").css("position","absolute").appendTo(b.parent()).outerWidth(b.outerWidth()).outerHeight(b.outerHeight()).offset(b.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(b){var c=this.document[0];if(this.handleElement.is(b.target))try{c.activeElement&&"body"!==c.activeElement.nodeName.toLowerCase()&&a(c.activeElement).blur()}catch(a){}},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===a(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(b),this.originalPosition=this.position=this._generatePosition(b,!1),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._normalizeRightBottom(),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_refreshOffsets:function(a){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:a.pageX-this.offset.left,top:a.pageY-this.offset.top}},_mouseDrag:function(b,c){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(b,!0),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=this,d=!1;return a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,b)),this.dropped&&(d=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!d||"valid"===this.options.revert&&d||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){c._trigger("stop",b)!==!1&&c._clear()}):this._trigger("stop",b)!==!1&&this._clear(),!1},_mouseUp:function(b){return this._unblockFrames(),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),this.handleElement.is(b.target)&&this.element.focus(),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){return!this.options.handle||!!a(b.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper),e=d?a(c.helper.apply(this.element[0],[b])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;return e.parents("body").length||e.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo),d&&e[0]===this.element[0]&&this._setPositionRelative(),e[0]===this.element[0]||/(fixed|absolute)/.test(e.css("position"))||e.css("position","absolute"),e},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_isRootNode:function(a){return/(html|body)/i.test(a.tagName)||a===this.document[0]},_getParentOffset:function(){var b=this.offsetParent.offset(),c=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==c&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var a=this.element.position(),b=this._isRootNode(this.scrollParent[0]);return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+(b?0:this.scrollParent.scrollTop()),left:a.left-(parseInt(this.helper.css("left"),10)||0)+(b?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options,f=this.document[0];return this.relativeContainer=null,e.containment?"window"===e.containment?void(this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||f.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===e.containment?void(this.containment=[0,0,a(f).width()-this.helperProportions.width-this.margins.left,(a(f).height()||f.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):e.containment.constructor===Array?void(this.containment=e.containment):("parent"===e.containment&&(e.containment=this.helper[0].parentNode),c=a(e.containment),d=c[0],void(d&&(b=/(scroll|auto)/.test(c.css("overflow")),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=c))):void(this.containment=null)},_convertPositionTo:function(a,b){b||(b=this.position);var c="absolute"===a?1:-1,d=this._isRootNode(this.scrollParent[0]);return{top:b.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"===this.cssPosition?-this.offset.scroll.top:d?0:this.offset.scroll.top)*c,left:b.left+this.offset.relative.left*c+this.offset.parent.left*c-("fixed"===this.cssPosition?-this.offset.scroll.left:d?0:this.offset.scroll.left)*c}},_generatePosition:function(a,b){var c,d,e,f,g=this.options,h=this._isRootNode(this.scrollParent[0]),i=a.pageX,j=a.pageY;return h&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),b&&(this.containment&&(this.relativeContainer?(d=this.relativeContainer.offset(),c=[this.containment[0]+d.left,this.containment[1]+d.top,this.containment[2]+d.left,this.containment[3]+d.top]):c=this.containment,a.pageX-this.offset.click.left<c[0]&&(i=c[0]+this.offset.click.left),a.pageY-this.offset.click.top<c[1]&&(j=c[1]+this.offset.click.top),a.pageX-this.offset.click.left>c[2]&&(i=c[2]+this.offset.click.left),a.pageY-this.offset.click.top>c[3]&&(j=c[3]+this.offset.click.top)),g.grid&&(e=g.grid[1]?this.originalPageY+Math.round((j-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,j=c?e-this.offset.click.top>=c[1]||e-this.offset.click.top>c[3]?e:e-this.offset.click.top>=c[1]?e-g.grid[1]:e+g.grid[1]:e,f=g.grid[0]?this.originalPageX+Math.round((i-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,i=c?f-this.offset.click.left>=c[0]||f-this.offset.click.left>c[2]?f:f-this.offset.click.left>=c[0]?f-g.grid[0]:f+g.grid[0]:f),"y"===g.axis&&(i=this.originalPageX),"x"===g.axis&&(j=this.originalPageY)),{top:j-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:h?0:this.offset.scroll.top),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:h?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d,this],!0),/^(drag|start|stop)/.test(b)&&(this.positionAbs=this._convertPositionTo("absolute"),d.offset=this.positionAbs),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c,d){var e=a.extend({},c,{item:d.element});d.sortables=[],a(d.options.connectToSortable).each(function(){var c=a(this).sortable("instance");c&&!c.options.disabled&&(d.sortables.push(c),c.refreshPositions(),c._trigger("activate",b,e))})},stop:function(b,c,d){var e=a.extend({},c,{item:d.element});d.cancelHelperRemoval=!1,a.each(d.sortables,function(){var a=this;a.isOver?(a.isOver=0,d.cancelHelperRemoval=!0,a.cancelHelperRemoval=!1,a._storedCSS={position:a.placeholder.css("position"),top:a.placeholder.css("top"),left:a.placeholder.css("left")},a._mouseStop(b),a.options.helper=a.options._helper):(a.cancelHelperRemoval=!0,a._trigger("deactivate",b,e))})},drag:function(b,c,d){a.each(d.sortables,function(){var e=!1,f=this;f.positionAbs=d.positionAbs,f.helperProportions=d.helperProportions,f.offset.click=d.offset.click,f._intersectsWith(f.containerCache)&&(e=!0,a.each(d.sortables,function(){return this.positionAbs=d.positionAbs,this.helperProportions=d.helperProportions,this.offset.click=d.offset.click,this!==f&&this._intersectsWith(this.containerCache)&&a.contains(f.element[0],this.element[0])&&(e=!1),e})),e?(f.isOver||(f.isOver=1,f.currentItem=c.helper.appendTo(f.element).data("ui-sortable-item",!0),f.options._helper=f.options.helper,f.options.helper=function(){return c.helper[0]},b.target=f.currentItem[0],f._mouseCapture(b,!0),f._mouseStart(b,!0,!0),f.offset.click.top=d.offset.click.top,f.offset.click.left=d.offset.click.left,f.offset.parent.left-=d.offset.parent.left-f.offset.parent.left,f.offset.parent.top-=d.offset.parent.top-f.offset.parent.top,d._trigger("toSortable",b),d.dropped=f.element,a.each(d.sortables,function(){this.refreshPositions()}),d.currentItem=d.element,f.fromOutside=d),f.currentItem&&(f._mouseDrag(b),c.position=f.position)):f.isOver&&(f.isOver=0,f.cancelHelperRemoval=!0,f.options._revert=f.options.revert,f.options.revert=!1,f._trigger("out",b,f._uiHash(f)),f._mouseStop(b,!0),f.options.revert=f.options._revert,f.options.helper=f.options._helper,f.placeholder&&f.placeholder.remove(),d._refreshOffsets(b),c.position=d._generatePosition(b,!0),d._trigger("fromSortable",b),d.dropped=!1,a.each(d.sortables,function(){this.refreshPositions()}))})}}),a.ui.plugin.add("draggable","cursor",{start:function(b,c,d){var e=a("body"),f=d.options;e.css("cursor")&&(f._cursor=e.css("cursor")),e.css("cursor",f.cursor)},stop:function(b,c,d){var e=d.options;e._cursor&&a("body").css("cursor",e._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c,d){var e=a(c.helper),f=d.options;e.css("opacity")&&(f._opacity=e.css("opacity")),e.css("opacity",f.opacity)},stop:function(b,c,d){var e=d.options;e._opacity&&a(c.helper).css("opacity",e._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(a,b,c){c.scrollParentNotHidden||(c.scrollParentNotHidden=c.helper.scrollParent(!1)),c.scrollParentNotHidden[0]!==c.document[0]&&"HTML"!==c.scrollParentNotHidden[0].tagName&&(c.overflowOffset=c.scrollParentNotHidden.offset())},drag:function(b,c,d){var e=d.options,f=!1,g=d.scrollParentNotHidden[0],h=d.document[0];g!==h&&"HTML"!==g.tagName?(e.axis&&"x"===e.axis||(d.overflowOffset.top+g.offsetHeight-b.pageY<e.scrollSensitivity?g.scrollTop=f=g.scrollTop+e.scrollSpeed:b.pageY-d.overflowOffset.top<e.scrollSensitivity&&(g.scrollTop=f=g.scrollTop-e.scrollSpeed)),e.axis&&"y"===e.axis||(d.overflowOffset.left+g.offsetWidth-b.pageX<e.scrollSensitivity?g.scrollLeft=f=g.scrollLeft+e.scrollSpeed:b.pageX-d.overflowOffset.left<e.scrollSensitivity&&(g.scrollLeft=f=g.scrollLeft-e.scrollSpeed))):(e.axis&&"x"===e.axis||(b.pageY-a(h).scrollTop()<e.scrollSensitivity?f=a(h).scrollTop(a(h).scrollTop()-e.scrollSpeed):a(window).height()-(b.pageY-a(h).scrollTop())<e.scrollSensitivity&&(f=a(h).scrollTop(a(h).scrollTop()+e.scrollSpeed))),e.axis&&"y"===e.axis||(b.pageX-a(h).scrollLeft()<e.scrollSensitivity?f=a(h).scrollLeft(a(h).scrollLeft()-e.scrollSpeed):a(window).width()-(b.pageX-a(h).scrollLeft())<e.scrollSensitivity&&(f=a(h).scrollLeft(a(h).scrollLeft()+e.scrollSpeed)))),f!==!1&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}}),a.ui.plugin.add("draggable","snap",{start:function(b,c,d){var e=d.options;d.snapElements=[],a(e.snap.constructor!==String?e.snap.items||":data(ui-draggable)":e.snap).each(function(){var b=a(this),c=b.offset();this!==d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c,d){var e,f,g,h,i,j,k,l,m,n,o=d.options,p=o.snapTolerance,q=c.offset.left,r=q+d.helperProportions.width,s=c.offset.top,t=s+d.helperProportions.height;for(m=d.snapElements.length-1;m>=0;m--)i=d.snapElements[m].left-d.margins.left,j=i+d.snapElements[m].width,k=d.snapElements[m].top-d.margins.top,l=k+d.snapElements[m].height,i-p>r||q>j+p||k-p>t||s>l+p||!a.contains(d.snapElements[m].item.ownerDocument,d.snapElements[m].item)?(d.snapElements[m].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[m].item})),d.snapElements[m].snapping=!1):("inner"!==o.snapMode&&(e=p>=Math.abs(k-t),f=p>=Math.abs(l-s),g=p>=Math.abs(i-r),h=p>=Math.abs(j-q),e&&(c.position.top=d._convertPositionTo("relative",{top:k-d.helperProportions.height,left:0}).top),f&&(c.position.top=d._convertPositionTo("relative",{top:l,left:0}).top),g&&(c.position.left=d._convertPositionTo("relative",{top:0,left:i-d.helperProportions.width}).left),h&&(c.position.left=d._convertPositionTo("relative",{top:0,left:j}).left)),n=e||f||g||h,"outer"!==o.snapMode&&(e=p>=Math.abs(k-s),f=p>=Math.abs(l-t),g=p>=Math.abs(i-q),h=p>=Math.abs(j-r),e&&(c.position.top=d._convertPositionTo("relative",{top:k,left:0}).top),f&&(c.position.top=d._convertPositionTo("relative",{top:l-d.helperProportions.height,left:0}).top),g&&(c.position.left=d._convertPositionTo("relative",{top:0,left:i}).left),h&&(c.position.left=d._convertPositionTo("relative",{top:0,left:j-d.helperProportions.width}).left)),!d.snapElements[m].snapping&&(e||f||g||h||n)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[m].item})),d.snapElements[m].snapping=e||f||g||h||n)}}),a.ui.plugin.add("draggable","stack",{start:function(b,c,d){var e,f=d.options,g=a.makeArray(a(f.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});g.length&&(e=parseInt(a(g[0]).css("zIndex"),10)||0,a(g).each(function(b){a(this).css("zIndex",e+b)}),this.css("zIndex",e+g.length))}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c,d){var e=a(c.helper),f=d.options;e.css("zIndex")&&(f._zIndex=e.css("zIndex")),e.css("zIndex",f.zIndex)},stop:function(b,c,d){var e=d.options;e._zIndex&&a(c.helper).css("zIndex",e._zIndex)}}),a.ui.draggable;
});var sortable=$.widget("ui.sortable",$.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(a,b,c){return a>=b&&b+c>a},_isFloating:function(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(a,b){this._super(a,b),"handle"===a&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),$.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(a,b){var c=null,d=!1,e=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(a),$(a.target).parents().each(function(){return $.data(this,e.widgetName+"-item")===e?(c=$(this),!1):void 0}),$.data(a.target,e.widgetName+"-item")===e&&(c=$(a.target)),!(!c||this.options.handle&&!b&&($(this.options.handle,c).find("*").addBack().each(function(){this===a.target&&(d=!0)}),!d))&&(this.currentItem=c,this._removeCurrentsFromItems(),!0)))},_mouseStart:function(a,b,c){var d,e,f=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(a),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},$.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(a),this.originalPageX=a.pageX,this.originalPageY=a.pageY,f.cursorAt&&this._adjustOffsetFromHelper(f.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),f.containment&&this._setContainment(),f.cursor&&"auto"!==f.cursor&&(e=this.document.find("body"),this.storedCursor=e.css("cursor"),e.css("cursor",f.cursor),this.storedStylesheet=$("<style>*{ cursor: "+f.cursor+" !important; }</style>").appendTo(e)),f.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",f.opacity)),f.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",f.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",a,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!c)for(d=this.containers.length-1;d>=0;d--)this.containers[d]._trigger("activate",a,this._uiHash(this));return $.ui.ddmanager&&($.ui.ddmanager.current=this),$.ui.ddmanager&&!f.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,a),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(a),!0},_mouseDrag:function(a){var b,c,d,e,f=this.options,g=!1;for(this.position=this._generatePosition(a),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-a.pageY<f.scrollSensitivity?this.scrollParent[0].scrollTop=g=this.scrollParent[0].scrollTop+f.scrollSpeed:a.pageY-this.overflowOffset.top<f.scrollSensitivity&&(this.scrollParent[0].scrollTop=g=this.scrollParent[0].scrollTop-f.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-a.pageX<f.scrollSensitivity?this.scrollParent[0].scrollLeft=g=this.scrollParent[0].scrollLeft+f.scrollSpeed:a.pageX-this.overflowOffset.left<f.scrollSensitivity&&(this.scrollParent[0].scrollLeft=g=this.scrollParent[0].scrollLeft-f.scrollSpeed)):(a.pageY-this.document.scrollTop()<f.scrollSensitivity?g=this.document.scrollTop(this.document.scrollTop()-f.scrollSpeed):this.window.height()-(a.pageY-this.document.scrollTop())<f.scrollSensitivity&&(g=this.document.scrollTop(this.document.scrollTop()+f.scrollSpeed)),a.pageX-this.document.scrollLeft()<f.scrollSensitivity?g=this.document.scrollLeft(this.document.scrollLeft()-f.scrollSpeed):this.window.width()-(a.pageX-this.document.scrollLeft())<f.scrollSensitivity&&(g=this.document.scrollLeft(this.document.scrollLeft()+f.scrollSpeed))),g!==!1&&$.ui.ddmanager&&!f.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,a)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),b=this.items.length-1;b>=0;b--)if(c=this.items[b],d=c.item[0],e=this._intersectsWithPointer(c),e&&c.instance===this.currentContainer&&d!==this.currentItem[0]&&this.placeholder[1===e?"next":"prev"]()[0]!==d&&!$.contains(this.placeholder[0],d)&&("semi-dynamic"!==this.options.type||!$.contains(this.element[0],d))){if(this.direction=1===e?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(c))break;this._rearrange(a,c),this._trigger("change",a,this._uiHash());break}return this._contactContainers(a),$.ui.ddmanager&&$.ui.ddmanager.drag(this,a),this._trigger("sort",a,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(a,b){if(a){if($.ui.ddmanager&&!this.options.dropBehaviour&&$.ui.ddmanager.drop(this,a),this.options.revert){var c=this,d=this.placeholder.offset(),e=this.options.axis,f={};e&&"x"!==e||(f.left=d.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),e&&"y"!==e||(f.top=d.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,$(this.helper).animate(f,parseInt(this.options.revert,10)||500,function(){c._clear(a)})}else this._clear(a,b);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var a=this.containers.length-1;a>=0;a--)this.containers[a]._trigger("deactivate",null,this._uiHash(this)),this.containers[a].containerCache.over&&(this.containers[a]._trigger("out",null,this._uiHash(this)),this.containers[a].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),$.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?$(this.domPosition.prev).after(this.currentItem):$(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(a){var b=this._getItemsAsjQuery(a&&a.connected),c=[];return a=a||{},$(b).each(function(){var b=($(a.item||this).attr(a.attribute||"id")||"").match(a.expression||/(.+)[\-=_](.+)/);b&&c.push((a.key||b[1]+"[]")+"="+(a.key&&a.expression?b[1]:b[2]))}),!c.length&&a.key&&c.push(a.key+"="),c.join("&")},toArray:function(a){var b=this._getItemsAsjQuery(a&&a.connected),c=[];return a=a||{},b.each(function(){c.push($(a.item||this).attr(a.attribute||"id")||"")}),c},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l="x"===this.options.axis||d+j>h&&i>d+j,m="y"===this.options.axis||b+k>f&&g>b+k,n=l&&m;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?n:f<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<g&&h<d+this.helperProportions.height/2&&e-this.helperProportions.height/2<i},_intersectsWithPointer:function(a){var b="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height),c="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width),d=b&&c,e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return!!d&&(this.floating?f&&"right"===f||"down"===e?2:1:e&&("down"===e?2:1))},_intersectsWithSides:function(a){var b=this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height),c=this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width),d=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();return this.floating&&e?"right"===e&&c||"left"===e&&!c:d&&("down"===d&&b||"up"===d&&!b)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!==a&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!==a&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(a){function b(){g.push(this)}var c,d,e,f,g=[],h=[],i=this._connectWith();if(i&&a)for(c=i.length-1;c>=0;c--)for(e=$(i[c],this.document[0]),d=e.length-1;d>=0;d--)f=$.data(e[d],this.widgetFullName),f&&f!==this&&!f.options.disabled&&h.push([$.isFunction(f.options.items)?f.options.items.call(f.element):$(f.options.items,f.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),f]);for(h.push([$.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):$(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),c=h.length-1;c>=0;c--)h[c][0].each(b);return $(g)},_removeCurrentsFromItems:function(){var a=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=$.grep(this.items,function(b){for(var c=0;c<a.length;c++)if(a[c]===b.item[0])return!1;return!0})},_refreshItems:function(a){this.items=[],this.containers=[this];var b,c,d,e,f,g,h,i,j=this.items,k=[[$.isFunction(this.options.items)?this.options.items.call(this.element[0],a,{item:this.currentItem}):$(this.options.items,this.element),this]],l=this._connectWith();if(l&&this.ready)for(b=l.length-1;b>=0;b--)for(d=$(l[b],this.document[0]),c=d.length-1;c>=0;c--)e=$.data(d[c],this.widgetFullName),e&&e!==this&&!e.options.disabled&&(k.push([$.isFunction(e.options.items)?e.options.items.call(e.element[0],a,{item:this.currentItem}):$(e.options.items,e.element),e]),this.containers.push(e));for(b=k.length-1;b>=0;b--)for(f=k[b][1],g=k[b][0],c=0,i=g.length;i>c;c++)h=$(g[c]),h.data(this.widgetName+"-item",f),j.push({item:h,instance:f,width:0,height:0,left:0,top:0})},refreshPositions:function(a){this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var b,c,d,e;for(b=this.items.length-1;b>=0;b--)c=this.items[b],c.instance!==this.currentContainer&&this.currentContainer&&c.item[0]!==this.currentItem[0]||(d=this.options.toleranceElement?$(this.options.toleranceElement,c.item):c.item,a||(c.width=d.outerWidth(),c.height=d.outerHeight()),e=d.offset(),c.left=e.left,c.top=e.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(b=this.containers.length-1;b>=0;b--)e=this.containers[b].element.offset(),this.containers[b].containerCache.left=e.left,this.containers[b].containerCache.top=e.top,this.containers[b].containerCache.width=this.containers[b].element.outerWidth(),this.containers[b].containerCache.height=this.containers[b].element.outerHeight();return this},_createPlaceholder:function(a){a=a||this;var b,c=a.options;c.placeholder&&c.placeholder.constructor!==String||(b=c.placeholder,c.placeholder={element:function(){var c=a.currentItem[0].nodeName.toLowerCase(),d=$("<"+c+">",a.document[0]).addClass(b||a.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===c?a._createTrPlaceholder(a.currentItem.find("tr").eq(0),$("<tr>",a.document[0]).appendTo(d)):"tr"===c?a._createTrPlaceholder(a.currentItem,d):"img"===c&&d.attr("src",a.currentItem.attr("src")),b||d.css("visibility","hidden"),d},update:function(d,e){(!b||c.forcePlaceholderSize)&&(e.height()||e.height(a.currentItem.innerHeight()-parseInt(a.currentItem.css("paddingTop")||0,10)-parseInt(a.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(a.currentItem.innerWidth()-parseInt(a.currentItem.css("paddingLeft")||0,10)-parseInt(a.currentItem.css("paddingRight")||0,10)))}}),a.placeholder=$(c.placeholder.element.call(a.element,a.currentItem)),a.currentItem.after(a.placeholder),c.placeholder.update(a,a.placeholder)},_createTrPlaceholder:function(a,b){var c=this;a.children().each(function(){$("<td>&#160;</td>",c.document[0]).attr("colspan",$(this).attr("colspan")||1).appendTo(b)})},_contactContainers:function(a){var b,c,d,e,f,g,h,i,j,k,l=null,m=null;for(b=this.containers.length-1;b>=0;b--)if(!$.contains(this.currentItem[0],this.containers[b].element[0]))if(this._intersectsWith(this.containers[b].containerCache)){if(l&&$.contains(this.containers[b].element[0],l.element[0]))continue;l=this.containers[b],m=b}else this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",a,this._uiHash(this)),this.containers[b].containerCache.over=0);if(l)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",a,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(d=1e4,e=null,j=l.floating||this._isFloating(this.currentItem),f=j?"left":"top",g=j?"width":"height",k=j?"clientX":"clientY",c=this.items.length-1;c>=0;c--)$.contains(this.containers[m].element[0],this.items[c].item[0])&&this.items[c].item[0]!==this.currentItem[0]&&(h=this.items[c].item.offset()[f],i=!1,a[k]-h>this.items[c][g]/2&&(i=!0),Math.abs(a[k]-h)<d&&(d=Math.abs(a[k]-h),e=this.items[c],this.direction=i?"up":"down"));if(!e&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return void(this.currentContainer.containerCache.over||(this.containers[m]._trigger("over",a,this._uiHash()),this.currentContainer.containerCache.over=1));e?this._rearrange(a,e,null,!0):this._rearrange(a,null,this.containers[m].element,!0),this._trigger("change",a,this._uiHash()),this.containers[m]._trigger("change",a,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",a,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(a){var b=this.options,c=$.isFunction(b.helper)?$(b.helper.apply(this.element[0],[a,this.currentItem])):"clone"===b.helper?this.currentItem.clone():this.currentItem;return c.parents("body").length||$("parent"!==b.appendTo?b.appendTo:this.currentItem[0].parentNode)[0].appendChild(c[0]),c[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!c[0].style.width||b.forceHelperSize)&&c.width(this.currentItem.width()),(!c[0].style.height||b.forceHelperSize)&&c.height(this.currentItem.height()),c},_adjustOffsetFromHelper:function(a){"string"==typeof a&&(a=a.split(" ")),$.isArray(a)&&(a={left:+a[0],top:+a[1]||0}),"left"in a&&(this.offset.click.left=a.left+this.margins.left),"right"in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left),"top"in a&&(this.offset.click.top=a.top+this.margins.top),"bottom"in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&$.ui.ie)&&(a={top:0,left:0}),{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a,b,c,d=this.options;"parent"===d.containment&&(d.containment=this.helper[0].parentNode),("document"===d.containment||"window"===d.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===d.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===d.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(d.containment)||(a=$(d.containment)[0],b=$(d.containment).offset(),c="hidden"!==$(a).css("overflow"),this.containment=[b.left+(parseInt($(a).css("borderLeftWidth"),10)||0)+(parseInt($(a).css("paddingLeft"),10)||0)-this.margins.left,b.top+(parseInt($(a).css("borderTopWidth"),10)||0)+(parseInt($(a).css("paddingTop"),10)||0)-this.margins.top,b.left+(c?Math.max(a.scrollWidth,a.offsetWidth):a.offsetWidth)-(parseInt($(a).css("borderLeftWidth"),10)||0)-(parseInt($(a).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,b.top+(c?Math.max(a.scrollHeight,a.offsetHeight):a.offsetHeight)-(parseInt($(a).css("borderTopWidth"),10)||0)-(parseInt($(a).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(a,b){b||(b=this.position);var c="absolute"===a?1:-1,d="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,e=/(html|body)/i.test(d[0].tagName);return{top:b.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():e?0:d.scrollTop())*c,left:b.left+this.offset.relative.left*c+this.offset.parent.left*c-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())*c}},_generatePosition:function(a){var b,c,d=this.options,e=a.pageX,f=a.pageY,g="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(g[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(a.pageX-this.offset.click.left<this.containment[0]&&(e=this.containment[0]+this.offset.click.left),a.pageY-this.offset.click.top<this.containment[1]&&(f=this.containment[1]+this.offset.click.top),a.pageX-this.offset.click.left>this.containment[2]&&(e=this.containment[2]+this.offset.click.left),a.pageY-this.offset.click.top>this.containment[3]&&(f=this.containment[3]+this.offset.click.top)),d.grid&&(b=this.originalPageY+Math.round((f-this.originalPageY)/d.grid[1])*d.grid[1],f=this.containment?b-this.offset.click.top>=this.containment[1]&&b-this.offset.click.top<=this.containment[3]?b:b-this.offset.click.top>=this.containment[1]?b-d.grid[1]:b+d.grid[1]:b,c=this.originalPageX+Math.round((e-this.originalPageX)/d.grid[0])*d.grid[0],e=this.containment?c-this.offset.click.left>=this.containment[0]&&c-this.offset.click.left<=this.containment[2]?c:c-this.offset.click.left>=this.containment[0]?c-d.grid[0]:c+d.grid[0]:c)),{top:f-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:g.scrollTop()),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:g.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this.counter;this._delay(function(){e===this.counter&&this.refreshPositions(!d)})},_clear:function(a,b){function c(a,b,c){return function(d){c._trigger(a,d,b._uiHash(b))}}this.reverting=!1;var d,e=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(d in this._storedCSS)("auto"===this._storedCSS[d]||"static"===this._storedCSS[d])&&(this._storedCSS[d]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!b&&e.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||b||e.push(function(a){this._trigger("update",a,this._uiHash())}),this!==this.currentContainer&&(b||(e.push(function(a){this._trigger("remove",a,this._uiHash())}),e.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),e.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer)))),d=this.containers.length-1;d>=0;d--)b||e.push(c("deactivate",this,this.containers[d])),this.containers[d].containerCache.over&&(e.push(c("out",this,this.containers[d])),this.containers[d].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,b||this._trigger("beforeStop",a,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!b){for(d=0;d<e.length;d++)e[d].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){$.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(a){var b=a||this;return{helper:b.helper,placeholder:b.placeholder||$([]),position:b.position,originalPosition:b.originalPosition,offset:b.positionAbs,item:b.currentItem,sender:a?a.element:null}}});!function(a){function f(a,b){if(!(a.originalEvent.touches.length>1)){a.preventDefault();var c=a.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d)}}if(a.support.touch="ontouchend"in document,a.support.touch){var e,b=a.ui.mouse.prototype,c=b._mouseInit,d=b._mouseDestroy;b._touchStart=function(a){var b=this;!e&&b._mouseCapture(a.originalEvent.changedTouches[0])&&(e=!0,b._touchMoved=!1,f(a,"mouseover"),f(a,"mousemove"),f(a,"mousedown"))},b._touchMove=function(a){e&&(this._touchMoved=!0,f(a,"mousemove"))},b._touchEnd=function(a){e&&(f(a,"mouseup"),f(a,"mouseout"),this._touchMoved||f(a,"click"),e=!1)},b._mouseInit=function(){var b=this;b.element.bind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),c.call(b)},b._mouseDestroy=function(){var b=this;b.element.unbind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),d.call(b)}}}(jQuery),function(a){"function"==typeof define&&define.amd?define(["jquery","moment"],a):"object"==typeof exports?module.exports=a(require("jquery"),require("moment")):a(jQuery,moment)}(function(a,b){function f(a){return X(a,e)}function g(b){var d,c={views:b.views||{}};return a.each(b,function(b,f){"views"!=b&&(a.isPlainObject(f)&&!/(time|duration|interval)$/i.test(b)&&a.inArray(b,e)==-1?(d=null,a.each(f,function(a,e){/^(month|week|day|default|basic(Week|Day)?|agenda(Week|Day)?)$/.test(a)?(c.views[a]||(c.views[a]={}),c.views[a][b]=e):(d||(d={}),d[a]=e)}),d&&(c[b]=d)):c[b]=f)}),c}function h(a,b){b.left&&a.css({"border-left-width":1,"margin-left":b.left-1}),b.right&&a.css({"border-right-width":1,"margin-right":b.right-1})}function i(a){a.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function j(){a("body").addClass("fc-not-allowed")}function k(){a("body").removeClass("fc-not-allowed")}function l(b,c,d){var e=Math.floor(c/b.length),f=Math.floor(c-e*(b.length-1)),g=[],h=[],i=[],j=0;m(b),b.each(function(c,d){var k=c===b.length-1?f:e,l=a(d).outerHeight(!0);l<k?(g.push(d),h.push(l),i.push(a(d).height())):j+=l}),d&&(c-=j,e=Math.floor(c/g.length),f=Math.floor(c-e*(g.length-1))),a(g).each(function(b,c){var d=b===g.length-1?f:e,j=h[b],k=i[b],l=d-(j-k);j<d&&a(c).height(l)})}function m(a){a.height("")}function n(b){var c=0;return b.find("> *").each(function(b,d){var e=a(d).outerWidth();e>c&&(c=e)}),c++,b.width(c),c}function o(a,b){return a.height(b).addClass("fc-scroller"),a[0].scrollHeight-1>a[0].clientHeight||(p(a),!1)}function p(a){a.height("").removeClass("fc-scroller")}function q(b){var c=b.css("position"),d=b.parents().filter(function(){var b=a(this);return/(auto|scroll)/.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);return"fixed"!==c&&d.length?d:a(b[0].ownerDocument||document)}function r(a){var b=a.offset();return{left:b.left,right:b.left+a.outerWidth(),top:b.top,bottom:b.top+a.outerHeight()}}function s(a){var b=a.offset(),c=u(a),d=b.left+y(a,"border-left-width")+c.left,e=b.top+y(a,"border-top-width")+c.top;return{left:d,right:d+a[0].clientWidth,top:e,bottom:e+a[0].clientHeight}}function t(a){var b=a.offset(),c=b.left+y(a,"border-left-width")+y(a,"padding-left"),d=b.top+y(a,"border-top-width")+y(a,"padding-top");return{left:c,right:c+a.width(),top:d,bottom:d+a.height()}}function u(a){var b=a.innerWidth()-a[0].clientWidth,c={left:0,right:0,top:0,bottom:a.innerHeight()-a[0].clientHeight};return w()&&"rtl"==a.css("direction")?c.left=b:c.right=b,c}function w(){return null===v&&(v=x()),v}function x(){var b=a("<div><div/></div>").css({position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}).appendTo("body"),c=b.children(),d=c.offset().left>b.offset().left;return b.remove(),d}function y(a,b){return parseFloat(a.css(b))||0}function z(a){return 1==a.which&&!a.ctrlKey}function A(a,b){var c={left:Math.max(a.left,b.left),right:Math.min(a.right,b.right),top:Math.max(a.top,b.top),bottom:Math.min(a.bottom,b.bottom)};return c.left<c.right&&c.top<c.bottom&&c}function B(a,b){return{left:Math.min(Math.max(a.left,b.left),b.right),top:Math.min(Math.max(a.top,b.top),b.bottom)}}function C(a){return{left:(a.left+a.right)/2,top:(a.top+a.bottom)/2}}function D(a,b){return{left:a.left-b.left,top:a.top-b.top}}function E(b){var e,f,c=[],d=[];for("string"==typeof b?d=b.split(/\s*,\s*/):"function"==typeof b?d=[b]:a.isArray(b)&&(d=b),e=0;e<d.length;e++)f=d[e],"string"==typeof f?c.push("-"==f.charAt(0)?{field:f.substring(1),order:-1}:{field:f,order:1}):"function"==typeof f&&c.push({func:f});return c}function F(a,b,c){var d,e;for(d=0;d<c.length;d++)if(e=G(a,b,c[d]))return e;return 0}function G(a,b,c){return c.func?c.func(a,b):H(a[c.field],b[c.field])*(c.order||1)}function H(b,c){return b||c?null==c?-1:null==b?1:"string"===a.type(b)||"string"===a.type(c)?String(b).localeCompare(String(c)):b-c:0}function I(a,b){var g,h,i,j,c=a.start,d=a.end,e=b.start,f=b.end;if(d>e&&c<f)return c>=e?(g=c.clone(),i=!0):(g=e.clone(),i=!1),d<=f?(h=d.clone(),j=!0):(h=f.clone(),j=!1),{start:g,end:h,isStart:i,isEnd:j}}function L(a,c){return b.duration({days:a.clone().stripTime().diff(c.clone().stripTime(),"days"),ms:a.time()-c.time()})}function M(a,c){return b.duration({days:a.clone().stripTime().diff(c.clone().stripTime(),"days")})}function N(a,c,d){return b.duration(Math.round(a.diff(c,d,!0)),d)}function O(a,b){var c,d,e;for(c=0;c<K.length&&(d=K[c],e=P(d,a,b),!(e>=1&&ia(e)));c++);return d}function P(a,c,d){return null!=d?d.diff(c,a,!0):b.isDuration(c)?c.as(a):c.end.diff(c.start,a,!0)}function Q(a,b,c){var d;return T(c)?(b-a)/c:(d=c.asMonths(),Math.abs(d)>=1&&ia(d)?b.diff(a,"months",!0)/d:b.diff(a,"days",!0)/c.asDays())}function R(a,b){var c,d;return T(a)||T(b)?a/b:(c=a.asMonths(),d=b.asMonths(),Math.abs(c)>=1&&ia(c)&&Math.abs(d)>=1&&ia(d)?c/d:a.asDays()/b.asDays())}function S(a,c){var d;return T(a)?b.duration(a*c):(d=a.asMonths(),Math.abs(d)>=1&&ia(d)?b.duration({months:d*c}):b.duration({days:a.asDays()*c}))}function T(a){return Boolean(a.hours()||a.minutes()||a.seconds()||a.milliseconds())}function U(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function V(a){return/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(a)}function X(a,b){var d,e,f,g,h,i,c={};if(b)for(d=0;d<b.length;d++){for(e=b[d],f=[],g=a.length-1;g>=0;g--)if(h=a[g][e],"object"==typeof h)f.unshift(h);else if(void 0!==h){c[e]=h;break}f.length&&(c[e]=X(f))}for(d=a.length-1;d>=0;d--){i=a[d];for(e in i)e in c||(c[e]=i[e])}return c}function Y(a){var b=function(){};return b.prototype=a,new b}function Z(a,b){for(var c in a)_(a,c)&&(b[c]=a[c])}function $(a,b){var d,e,c=["constructor","toString","valueOf"];for(d=0;d<c.length;d++)e=c[d],a[e]!==Object.prototype[e]&&(b[e]=a[e])}function _(a,b){return W.call(a,b)}function aa(b){return/undefined|null|boolean|number|string/.test(a.type(b))}function ba(b,c,d){if(a.isFunction(b)&&(b=[b]),b){var e,f;for(e=0;e<b.length;e++)f=b[e].apply(c,d)||f;return f}}function ca(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]}function da(a){return(a+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function ea(a){return a.replace(/&.*?;/g,"")}function fa(b){var c=[];
return a.each(b,function(a,b){null!=b&&c.push(a+":"+b)}),c.join(";")}function ga(a){return a.charAt(0).toUpperCase()+a.slice(1)}function ha(a,b){return a-b}function ia(a){return a%1===0}function ja(a,b){var c=a[b];return function(){return c.apply(a,arguments)}}function ka(a,b){var c,d,e,f,g=function(){var h=+new Date-f;h<b&&h>0?c=setTimeout(g,b-h):(c=null,a.apply(e,d),c||(e=d=null))};return function(){e=this,d=arguments,f=+new Date,c||(c=setTimeout(g,b))}}function sa(c,d,e){var h,i,j,k,f=c[0],g=1==c.length&&"string"==typeof f;return b.isMoment(f)?(k=b.apply(null,c),ua(f,k)):U(f)||void 0===f?k=b.apply(null,c):(h=!1,i=!1,g?la.test(f)?(f+="-01",c=[f],h=!0,i=!0):(j=ma.exec(f))&&(h=!j[5],i=!0):a.isArray(f)&&(i=!0),k=d||h?b.utc.apply(b,c):b.apply(null,c),h?(k._ambigTime=!0,k._ambigZone=!0):e&&(i?k._ambigZone=!0:g&&(k.utcOffset?k.utcOffset(f):k.zone(f)))),k._fullCalendar=!0,k}function ta(a,d){var i,j,e=!1,f=!1,g=a.length,h=[];for(i=0;i<g;i++)j=a[i],b.isMoment(j)||(j=c.moment.parseZone(j)),e=e||j._ambigTime,f=f||j._ambigZone,h.push(j);for(i=0;i<g;i++)j=h[i],d||!e||j._ambigTime?f&&!j._ambigZone&&(h[i]=j.clone().stripZone()):h[i]=j.clone().stripTime();return h}function ua(a,b){a._ambigTime?b._ambigTime=!0:b._ambigTime&&(b._ambigTime=!1),a._ambigZone?b._ambigZone=!0:b._ambigZone&&(b._ambigZone=!1)}function va(a,b){a.year(b[0]||0).month(b[1]||0).date(b[2]||0).hours(b[3]||0).minutes(b[4]||0).seconds(b[5]||0).milliseconds(b[6]||0)}function wa(a,b){return oa.format.call(a,b)}function xa(a,b){return ya(a,Ga(b))}function ya(a,b){var d,c="";for(d=0;d<b.length;d++)c+=Aa(a,b[d]);return c}function Aa(a,b){var c,d;return"string"==typeof b?b:(c=b.token)?za[c]?za[c](a):wa(a,c):b.maybe&&(d=ya(a,b.maybe),d.match(/[1-9]/))?d:""}function Ba(a,b,d,e,f){var g;return a=c.moment.parseZone(a),b=c.moment.parseZone(b),g=(a.localeData||a.lang).call(a),d=g.longDateFormat(d)||d,e=e||" - ",Ca(a,b,Ga(d),e,f)}function Ca(a,b,c,d,e){var f,g,i,k,h="",j="",l="",m="",n="";for(g=0;g<c.length&&(f=Ea(a,b,c[g]),f!==!1);g++)h+=f;for(i=c.length-1;i>g&&(f=Ea(a,b,c[i]),f!==!1);i--)j=f+j;for(k=g;k<=i;k++)l+=Aa(a,c[k]),m+=Aa(b,c[k]);return(l||m)&&(n=e?m+d+l:l+d+m),h+n+j}function Ea(a,b,c){var d,e;return"string"==typeof c?c:!!((d=c.token)&&(e=Da[d.charAt(0)],e&&a.isSame(b,e)))&&wa(a,d)}function Ga(a){return a in Fa?Fa[a]:Fa[a]=Ha(a)}function Ha(a){for(var d,b=[],c=/\[([^\]]*)\]|\(([^\)]*)\)|(LTS|LT|(\w)\4*o?)|([^\w\[\(]+)/g;d=c.exec(a);)d[1]?b.push(d[1]):d[2]?b.push({maybe:Ha(d[2])}):d[3]?b.push({token:d[3]}):d[5]&&b.push(d[5]);return b}function Ia(){}function Pa(a,b){return!a&&!b||!(!a||!b)&&(a.grid===b.grid&&a.row===b.row&&a.col===b.col)}function Ta(a){var b=Va(a);return"background"===b||"inverse-background"===b}function Ua(a){return"inverse-background"===Va(a)}function Va(a){return ca((a.source||{}).rendering,a.rendering)}function Wa(a){var c,d,b={};for(c=0;c<a.length;c++)d=a[c],(b[d._id]||(b[d._id]=[])).push(d);return b}function Xa(a,b){return a.eventStartMS-b.eventStartMS}function Ya(d){var f,g,h,i,e=c.dataAttrPrefix;return e&&(e+="-"),f=d.data(e+"event")||null,f&&(f="object"==typeof f?a.extend({},f):{},g=f.start,null==g&&(g=f.time),h=f.duration,i=f.stick,delete f.start,delete f.time,delete f.duration,delete f.stick),null==g&&(g=d.data(e+"start")),null==g&&(g=d.data(e+"time")),null==h&&(h=d.data(e+"duration")),null==i&&(i=d.data(e+"stick")),g=null!=g?b.duration(g):null,h=null!=h?b.duration(h):null,i=Boolean(i),{eventProps:f,startTime:g,duration:h,stick:i}}function $a(a,b){var c,d;for(c=0;c<b.length;c++)if(d=b[c],d.leftCol<=a.rightCol&&d.rightCol>=a.leftCol)return!0;return!1}function _a(a,b){return a.leftCol-b.leftCol}function bb(a){var c,d,e,b=[];for(c=0;c<a.length;c++){for(d=a[c],e=0;e<b.length&&eb(d,b[e]).length;e++);d.level=e,(b[e]||(b[e]=[])).push(d)}return b}function cb(a){var b,c,d,e,f;for(b=0;b<a.length;b++)for(c=a[b],d=0;d<c.length;d++)for(e=c[d],e.forwardSegs=[],f=b+1;f<a.length;f++)eb(e,a[f],e.forwardSegs)}function db(a){var d,e,b=a.forwardSegs,c=0;if(void 0===a.forwardPressure){for(d=0;d<b.length;d++)e=b[d],db(e),c=Math.max(c,1+e.forwardPressure);a.forwardPressure=c}}function eb(a,b,c){c=c||[];for(var d=0;d<b.length;d++)fb(a,b[d])&&c.push(b[d]);return c}function fb(a,b){return a.bottom>b.top&&a.top<b.bottom}function ib(d,e){function x(){o?A()&&(D(),B()):y()}function y(){p=g.theme?"ui":"fc",d.addClass("fc"),g.isRTL?d.addClass("fc-rtl"):d.addClass("fc-ltr"),g.theme?d.addClass("ui-widget"):d.addClass("fc-unthemed"),o=a("<div class='fc-view-container'/>").prependTo(d),m=f.header=new pb(f,g),n=m.render(),n&&d.prepend(n),B(g.defaultView),g.handleWindowResize&&(t=ka(F,g.windowResizeDelay),a(window).resize(t))}function z(){q&&q.removeElement(),m.removeElement(),o.remove(),d.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget"),t&&a(window).unbind("resize",t)}function A(){return d.is(":visible")}function B(b){u++,q&&b&&q.type!==b&&(m.deactivateButton(q.type),_(),q.removeElement(),q=f.view=null),!q&&b&&(q=f.view=r[b]||(r[b]=f.instantiateView(b)),q.setElement(a("<div class='fc-view fc-"+b+"-view' />").appendTo(o)),m.activateButton(b)),q&&(v=q.massageCurrentDate(v),q.displaying&&v.isWithin(q.intervalStart,q.intervalEnd)||A()&&(_(),q.display(v),aa(),N(),O(),J())),aa(),u--}function C(a){if(A())return a&&E(),u++,q.updateSize(!0),u--,!0}function D(){A()&&E()}function E(){s="number"==typeof g.contentHeight?g.contentHeight:"number"==typeof g.height?g.height-(n?n.outerHeight(!0):0):Math.round(o.width()/Math.max(g.aspectRatio,.5))}function F(a){!u&&a.target===window&&q.start&&C(!0)&&q.trigger("windowResize",l)}function G(){I(),K()}function H(){A()&&(_(),q.displayEvents(w),aa())}function I(){_(),q.clearEvents(),aa()}function J(){!g.lazyFetching||j(q.start,q.end)?K():H()}function K(){k(q.start,q.end)}function L(a){w=a,H()}function M(){H()}function N(){m.updateTitle(q.title)}function O(){var a=f.getNow();a.isWithin(q.intervalStart,q.intervalEnd)?m.disableButton("today"):m.enableButton("today")}function P(a,b){q.select(f.buildSelectRange.apply(f,arguments))}function Q(){q&&q.unselect()}function R(){v=q.computePrevDate(v),B()}function S(){v=q.computeNextDate(v),B()}function T(){v.add(-1,"years"),B()}function U(){v.add(1,"years"),B()}function V(){v=f.getNow(),B()}function W(a){v=f.moment(a),B()}function X(a){v.add(b.duration(a)),B()}function Z(a,b){var c;b=b||"day",c=f.getViewSpec(b)||f.getUnitViewSpec(b),v=a,B(c?c.type:null)}function $(){return v.clone()}function _(){o.css({width:"100%",height:o.height(),overflow:"hidden"})}function aa(){o.css({width:"",height:"",overflow:""})}function ba(){return f}function ca(){return q}function da(a,b){return void 0===b?g[a]:void("height"!=a&&"contentHeight"!=a&&"aspectRatio"!=a||(g[a]=b,C(!0)))}function ea(a,b){var c=Array.prototype.slice.call(arguments,2);if(b=b||l,this.triggerWith(a,b,c),g[a])return g[a].apply(b,c)}var f=this;f.initOptions(e||{});var g=this.options;f.render=x,f.destroy=z,f.refetchEvents=G,f.reportEvents=L,f.reportEventChange=M,f.rerenderEvents=H,f.changeView=B,f.select=P,f.unselect=Q,f.prev=R,f.next=S,f.prevYear=T,f.nextYear=U,f.today=V,f.gotoDate=W,f.incrementDate=X,f.zoomTo=Z,f.getDate=$,f.getCalendar=ba,f.getView=ca,f.option=da,f.trigger=ea;var h=Y(ob(g.lang));if(g.monthNames&&(h._months=g.monthNames),g.monthNamesShort&&(h._monthsShort=g.monthNamesShort),g.dayNames&&(h._weekdays=g.dayNames),g.dayNamesShort&&(h._weekdaysShort=g.dayNamesShort),null!=g.firstDay){var i=Y(h._week);i.dow=g.firstDay,h._week=i}h._fullCalendar_weekCalc=function(a){return"function"==typeof a?a:"local"===a?a:"iso"===a||"ISO"===a?"ISO":void 0}(g.weekNumberCalculation),f.defaultAllDayEventDuration=b.duration(g.defaultAllDayEventDuration),f.defaultTimedEventDuration=b.duration(g.defaultTimedEventDuration),f.moment=function(){var a;return"local"===g.timezone?(a=c.moment.apply(null,arguments),a.hasTime()&&a.local()):a="UTC"===g.timezone?c.moment.utc.apply(null,arguments):c.moment.parseZone.apply(null,arguments),"_locale"in a?a._locale=h:a._lang=h,a},f.getIsAmbigTimezone=function(){return"local"!==g.timezone&&"UTC"!==g.timezone},f.rezoneDate=function(a){return f.moment(a.toArray())},f.getNow=function(){var a=g.now;return"function"==typeof a&&(a=a()),f.moment(a)},f.getEventEnd=function(a){return a.end?a.end.clone():f.getDefaultEventEnd(a.allDay,a.start)},f.getDefaultEventEnd=function(a,b){var c=b.clone();return a?c.stripTime().add(f.defaultAllDayEventDuration):c.add(f.defaultTimedEventDuration),f.getIsAmbigTimezone()&&c.stripZone(),c},f.humanizeDuration=function(a){return(a.locale||a.lang).call(a,g.lang).humanize()},sb.call(f,g);var m,n,o,p,q,s,t,v,j=f.isFetchNeeded,k=f.fetchEvents,l=d[0],r={},u=0,w=[];v=null!=g.defaultDate?f.moment(g.defaultDate):f.getNow(),f.getSuggestedViewHeight=function(){return void 0===s&&D(),s},f.isHeightAuto=function(){return"auto"===g.contentHeight||"auto"===g.height},f.initialize()}function nb(b){a.each(mb,function(a,c){null==b[a]&&(b[a]=c(b))})}function ob(a){var c=b.localeData||b.langData;return c.call(b,a)||c.call(b,"en")}function pb(b,c){function h(){var b=c.header;if(g=c.theme?"ui":"fc",b)return e=a("<div class='fc-toolbar'/>").append(j("left")).append(j("right")).append(j("center")).append('<div class="fc-clear"/>')}function i(){e.remove(),e=a()}function j(d){var e=a('<div class="fc-'+d+'"/>'),h=c.header[d];return h&&a.each(h.split(" "),function(d){var j,h=a(),i=!0;a.each(this.split(","),function(d,e){var j,k,l,m,n,o,p,q,r,s;"title"==e?(h=h.add(a("<h2>&nbsp;</h2>")),i=!1):((j=(b.options.customButtons||{})[e])?(l=function(a){j.click&&j.click.call(s[0],a)},m="",n=j.text):(k=b.getViewSpec(e))?(l=function(){b.changeView(e)},f.push(e),m=k.buttonTextOverride,n=k.buttonTextDefault):b[e]&&(l=function(){b[e]()},m=(b.overrides.buttonText||{})[e],n=c.buttonText[e]),l&&(o=j?j.themeIcon:c.themeButtonIcons[e],p=j?j.icon:c.buttonIcons[e],q=m?da(m):o&&c.theme?"<span class='ui-icon ui-icon-"+o+"'></span>":p&&!c.theme?"<span class='fc-icon fc-icon-"+p+"'></span>":da(n),r=["fc-"+e+"-button",g+"-button",g+"-state-default"],s=a('<button type="button" class="'+r.join(" ")+'">'+q+"</button>").click(function(a){s.hasClass(g+"-state-disabled")||(l(a),(s.hasClass(g+"-state-active")||s.hasClass(g+"-state-disabled"))&&s.removeClass(g+"-state-hover"))}).mousedown(function(){s.not("."+g+"-state-active").not("."+g+"-state-disabled").addClass(g+"-state-down")}).mouseup(function(){s.removeClass(g+"-state-down")}).hover(function(){s.not("."+g+"-state-active").not("."+g+"-state-disabled").addClass(g+"-state-hover")},function(){s.removeClass(g+"-state-hover").removeClass(g+"-state-down")}),h=h.add(s)))}),i&&h.first().addClass(g+"-corner-left").end().last().addClass(g+"-corner-right").end(),h.length>1?(j=a("<div/>"),i&&j.addClass("fc-button-group"),j.append(h),e.append(j)):e.append(h)}),e}function k(a){e.find("h2").text(a)}function l(a){e.find(".fc-"+a+"-button").addClass(g+"-state-active")}function m(a){e.find(".fc-"+a+"-button").removeClass(g+"-state-active")}function n(a){e.find(".fc-"+a+"-button").attr("disabled","disabled").addClass(g+"-state-disabled")}function o(a){e.find(".fc-"+a+"-button").removeAttr("disabled").removeClass(g+"-state-disabled")}function p(){return f}var d=this;d.render=h,d.removeElement=i,d.updateTitle=k,d.activateButton=l,d.deactivateButton=m,d.disableButton=n,d.enableButton=o,d.getViewsWithButtons=p;var g,e=a(),f=[]}function sb(d){function n(a,b){return!i||a.clone().stripZone()<i.clone().stripZone()||b.clone().stripZone()>j.clone().stripZone()}function o(a,b){i=a,j=b,m=[];var c=++k,d=h.length;l=d;for(var e=0;e<d;e++)p(h[e],c)}function p(b,c){q(b,function(d){var g,h,i,e=a.isArray(b.events);if(c==k){if(d)for(g=0;g<d.length;g++)h=d[g],i=e?h:C(h,b),i&&m.push.apply(m,H(i));l--,l||f(m)}})}function q(b,f){var g,k,h=c.sourceFetchers;for(g=0;g<h.length;g++){if(k=h[g].call(e,b,i.clone(),j.clone(),d.timezone,f),k===!0)return;if("object"==typeof k)return void q(k,f)}var l=b.events;if(l)a.isFunction(l)?(e.pushLoading(),l.call(e,i.clone(),j.clone(),d.timezone,function(a){f(a),e.popLoading()})):a.isArray(l)?f(l):f();else{var m=b.url;if(m){var r,n=b.success,o=b.error,p=b.complete;r=a.isFunction(b.data)?b.data():b.data;var s=a.extend({},r||{}),t=ca(b.startParam,d.startParam),u=ca(b.endParam,d.endParam),v=ca(b.timezoneParam,d.timezoneParam);t&&(s[t]=i.format()),u&&(s[u]=j.format()),d.timezone&&"local"!=d.timezone&&(s[v]=d.timezone),e.pushLoading(),a.ajax(a.extend({},qb,b,{data:s,success:function(b){b=b||[];var c=ba(n,this,arguments);a.isArray(c)&&(b=c),f(b)},error:function(){ba(o,this,arguments),f()},complete:function(){ba(p,this,arguments),e.popLoading()}}))}else f()}}function r(a){var b=s(a);b&&(h.push(b),l++,p(b,k))}function s(b){var f,g,d=c.sourceNormalizers;if(a.isFunction(b)||a.isArray(b)?f={events:b}:"string"==typeof b?f={url:b}:"object"==typeof b&&(f=a.extend({},b)),f){for(f.className?"string"==typeof f.className&&(f.className=f.className.split(/\s+/)):f.className=[],a.isArray(f.events)&&(f.origArray=f.events,f.events=a.map(f.events,function(a){return C(a,f)})),g=0;g<d.length;g++)d[g].call(e,f);return f}}function t(b){h=a.grep(h,function(a){return!u(a,b)}),m=a.grep(m,function(a){return!u(a.source,b)}),f(m)}function u(a,b){return a&&b&&v(a)==v(b)}function v(a){return("object"==typeof a?a.origArray||a.googleCalendarId||a.url||a.events:null)||a}function w(a){a.start=e.moment(a.start),a.end?a.end=e.moment(a.end):a.end=null,I(a,x(a)),f(m)}function x(b){var c={};return a.each(b,function(a,b){y(a)&&void 0!==b&&aa(b)&&(c[a]=b)}),c}function y(a){return!/^_|^(id|allDay|start|end)$/.test(a)}function z(a,b){var d,e,h,c=C(a);if(c){for(d=H(c),e=0;e<d.length;e++)h=d[e],h.source||(b&&(g.events.push(h),h.source=g),m.push(h));return f(m),d}return[]}function A(b){var c,d;for(null==b?b=function(){return!0}:a.isFunction(b)||(c=b+"",b=function(a){return a._id==c}),m=a.grep(m,b,!0),d=0;d<h.length;d++)a.isArray(h[d].events)&&(h[d].events=a.grep(h[d].events,b,!0));f(m)}function B(b){return a.isFunction(b)?a.grep(m,b):null!=b?(b+="",a.grep(m,function(a){return a._id==b})):m}function C(c,f){var h,i,j,g={};if(d.eventDataTransform&&(c=d.eventDataTransform(c)),f&&f.eventDataTransform&&(c=f.eventDataTransform(c)),a.extend(g,c),f&&(g.source=f),g._id=c._id||(void 0===c.id?"_fc"+rb++:c.id+""),c.className?"string"==typeof c.className?g.className=c.className.split(/\s+/):g.className=c.className:g.className=[],h=c.start||c.date,i=c.end,V(h)&&(h=b.duration(h)),V(i)&&(i=b.duration(i)),c.dow||b.isDuration(h)||b.isDuration(i))g.start=h?b.duration(h):null,g.end=i?b.duration(i):null,g._recurring=!0;else{if(h&&(h=e.moment(h),!h.isValid()))return!1;i&&(i=e.moment(i),i.isValid()||(i=null)),j=c.allDay,void 0===j&&(j=ca(f?f.allDayDefault:void 0,d.allDayDefault)),D(h,i,j,g)}return g}function D(a,b,c,d){d.start=a,d.end=b,d.allDay=c,E(d),tb(d)}function E(a){F(a),a.end&&!a.end.isAfter(a.start)&&(a.end=null),a.end||(d.forceEventDuration?a.end=e.getDefaultEventEnd(a.allDay,a.start):a.end=null)}function F(a){null==a.allDay&&(a.allDay=!(a.start.hasTime()||a.end&&a.end.hasTime())),a.allDay?(a.start.stripTime(),a.end&&a.end.stripTime()):(a.start.hasTime()||(a.start=e.rezoneDate(a.start)),a.end&&!a.end.hasTime()&&(a.end=e.rezoneDate(a.end)))}function G(b){var c;return b.end||(c=b.allDay,null==c&&(c=!b.start.hasTime()),b=a.extend({},b),b.end=e.getDefaultEventEnd(c,b.start)),b}function H(b,c,d){var f,g,h,k,l,m,n,o,p,e=[];if(c=c||i,d=d||j,b)if(b._recurring){if(g=b.dow)for(f={},h=0;h<g.length;h++)f[g[h]]=!0;for(k=c.clone().stripTime();k.isBefore(d);)f&&!f[k.day()]||(l=b.start,m=b.end,n=k.clone(),o=null,l&&(n=n.time(l)),m&&(o=k.clone().time(m)),p=a.extend({},b),D(n,o,!l&&!m,p),e.push(p)),k.add(1,"days")}else e.push(b);return e}function I(b,c,d){function m(a,b){return d?N(a,b,d):c.allDay?M(a,b):L(a,b)}var g,h,i,j,k,l,f={};return c=c||{},c.start||(c.start=b.start.clone()),void 0===c.end&&(c.end=b.end?b.end.clone():null),null==c.allDay&&(c.allDay=b.allDay),E(c),g={start:b._start.clone(),end:b._end?b._end.clone():e.getDefaultEventEnd(b._allDay,b._start),allDay:c.allDay},E(g),h=null!==b._end&&null===c.end,i=m(c.start,g.start),c.end?(j=m(c.end,g.end),k=j.subtract(i)):k=null,a.each(c,function(a,b){y(a)&&void 0!==b&&(f[a]=b)}),l=J(B(b._id),h,c.allDay,i,k,f),{dateDelta:i,durationDelta:k,undo:l}}function J(b,c,d,f,g,h){var i=e.getIsAmbigTimezone(),j=[];return f&&!f.valueOf()&&(f=null),g&&!g.valueOf()&&(g=null),a.each(b,function(b,k){var l,m;l={start:k.start.clone(),end:k.end?k.end.clone():null,allDay:k.allDay},a.each(h,function(a){l[a]=k[a]}),m={start:k._start,end:k._end,allDay:d},E(m),c?m.end=null:g&&!m.end&&(m.end=e.getDefaultEventEnd(m.allDay,m.start)),f&&(m.start.add(f),m.end&&m.end.add(f)),g&&m.end.add(g),i&&!m.allDay&&(f||g)&&(m.start.stripZone(),m.end&&m.end.stripZone()),a.extend(k,h,m),tb(k),j.push(function(){a.extend(k,l),tb(k)})}),function(){for(var a=0;a<j.length;a++)j[a]()}}function K(b){var h,c=d.businessHours,f={className:"fc-nonbusiness",start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"},g=e.getView();return c&&(h=a.extend({},f,"object"==typeof c?c:{})),h?(b&&(h.start=null,h.end=null),H(C(h),g.start,g.end)):[]}function O(a,b){var c=b.source||{},e=ca(b.constraint,c.constraint,d.eventConstraint),f=ca(b.overlap,c.overlap,d.eventOverlap);return a=G(a),R(a,e,f,b)}function P(a){return R(a,d.selectConstraint,d.selectOverlap)}function Q(b,c){var d,e;return c&&(d=a.extend({},c,b),e=H(C(d))[0]),e?O(b,e):(b=G(b),P(b))}function R(b,c,d,f){var g,h,i,j,k,l;if(b=a.extend({},b),b.start=b.start.clone().stripZone(),b.end=b.end.clone().stripZone(),null!=c){for(g=S(c),h=!1,j=0;j<g.length;j++)if(T(g[j],b)){h=!0;break}if(!h)return!1}for(i=e.getPeerEvents(f,b),j=0;j<i.length;j++)if(k=i[j],U(k,b)){if(d===!1)return!1;if("function"==typeof d&&!d(k,f))return!1;if(f){if(l=ca(k.overlap,(k.source||{}).overlap),l===!1)return!1;if("function"==typeof l&&!l(f,k))return!1}}return!0}function S(a){return"businessHours"===a?K():"object"==typeof a?H(C(a)):B(a)}function T(a,b){var c=a.start.clone().stripZone(),d=e.getEventEnd(a).stripZone();return b.start>=c&&b.end<=d}function U(a,b){var c=a.start.clone().stripZone(),d=e.getEventEnd(a).stripZone();return b.start<d&&b.end>c}var e=this;e.isFetchNeeded=n,e.fetchEvents=o,e.addEventSource=r,e.removeEventSource=t,e.updateEvent=w,e.renderEvent=z,e.removeEvents=A,e.clientEvents=B,e.mutateEvent=I,e.normalizeEventRange=E,e.normalizeEventRangeTimes=F,e.ensureVisibleEventRange=G;var i,j,f=e.reportEvents,g={events:[]},h=[g],k=0,l=0,m=[];a.each((d.events?[d.events]:[]).concat(d.eventSources||[]),function(a,b){var c=s(b);c&&h.push(c)}),e.getBusinessHoursEvents=K,e.isEventRangeAllowed=O,e.isSelectionRangeAllowed=P,e.isExternalDropRangeAllowed=Q,e.getEventCache=function(){return m}}function tb(a){a._allDay=a.allDay,a._start=a.start.clone(),a._end=a.end?a.end.clone():null}var c=a.fullCalendar={version:"2.4.0"},d=c.views={};a.fn.fullCalendar=function(b){var c=Array.prototype.slice.call(arguments,1),d=this;return this.each(function(e,f){var i,g=a(f),h=g.data("fullCalendar");"string"==typeof b?h&&a.isFunction(h[b])&&(i=h[b].apply(h,c),e||(d=i),"destroy"===b&&g.removeData("fullCalendar")):h||(h=new hb(g,b),g.data("fullCalendar",h),h.render())}),d};var e=["header","buttonText","buttonIcons","themeButtonIcons"];c.intersectionToSeg=I,c.applyAll=ba,c.debounce=ka,c.isInt=ia,c.htmlEscape=da,c.cssToStr=fa,c.proxy=ja,c.capitaliseFirstLetter=ga,c.getClientRect=s,c.getContentRect=t,c.getScrollbarWidths=u;var v=null;c.intersectRects=A,c.parseFieldSpecs=E,c.compareByFieldSpecs=F,c.compareByFieldSpec=G,c.flexibleCompare=H,c.computeIntervalUnit=O,c.divideRangeByDuration=Q,c.divideDurationByDuration=R,c.multiplyDuration=S,c.durationHasTime=T;var J=["sun","mon","tue","wed","thu","fri","sat"],K=["year","month","week","day","hour","minute","second","millisecond"];c.log=function(){var a=window.console;if(a&&a.log)return a.log.apply(a,arguments)},c.warn=function(){var a=window.console;return a&&a.warn?a.warn.apply(a,arguments):c.log.apply(c,arguments)};var pa,qa,ra,W={}.hasOwnProperty,la=/^\s*\d{4}-\d\d$/,ma=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/,na=b.fn,oa=a.extend({},na);c.moment=function(){return sa(arguments)},c.moment.utc=function(){var a=sa(arguments,!0);return a.hasTime()&&a.utc(),a},c.moment.parseZone=function(){return sa(arguments,!0,!0)},na.clone=function(){var a=oa.clone.apply(this,arguments);return ua(this,a),this._fullCalendar&&(a._fullCalendar=!0),a},na.week=na.weeks=function(a){var b=(this._locale||this._lang)._fullCalendar_weekCalc;return null==a&&"function"==typeof b?b(this):"ISO"===b?oa.isoWeek.apply(this,arguments):oa.week.apply(this,arguments)},na.time=function(a){if(!this._fullCalendar)return oa.time.apply(this,arguments);if(null==a)return b.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});this._ambigTime=!1,b.isDuration(a)||b.isMoment(a)||(a=b.duration(a));var c=0;return b.isDuration(a)&&(c=24*Math.floor(a.asDays())),this.hours(c+a.hours()).minutes(a.minutes()).seconds(a.seconds()).milliseconds(a.milliseconds())},na.stripTime=function(){var a;return this._ambigTime||(a=this.toArray(),this.utc(),qa(this,a.slice(0,3)),this._ambigTime=!0,this._ambigZone=!0),this},na.hasTime=function(){return!this._ambigTime},na.stripZone=function(){var a,b;return this._ambigZone||(a=this.toArray(),b=this._ambigTime,this.utc(),qa(this,a),this._ambigTime=b||!1,this._ambigZone=!0),this},na.hasZone=function(){return!this._ambigZone},na.local=function(){var a=this.toArray(),b=this._ambigZone;return oa.local.apply(this,arguments),this._ambigTime=!1,this._ambigZone=!1,b&&ra(this,a),this},na.utc=function(){return oa.utc.apply(this,arguments),this._ambigTime=!1,this._ambigZone=!1,this},a.each(["zone","utcOffset"],function(a,b){oa[b]&&(na[b]=function(a){return null!=a&&(this._ambigTime=!1,this._ambigZone=!1),oa[b].apply(this,arguments)})}),na.format=function(){return this._fullCalendar&&arguments[0]?xa(this,arguments[0]):this._ambigTime?wa(this,"YYYY-MM-DD"):this._ambigZone?wa(this,"YYYY-MM-DD[T]HH:mm:ss"):oa.format.apply(this,arguments)},na.toISOString=function(){return this._ambigTime?wa(this,"YYYY-MM-DD"):this._ambigZone?wa(this,"YYYY-MM-DD[T]HH:mm:ss"):oa.toISOString.apply(this,arguments)},na.isWithin=function(a,b){var c=ta([this,a,b]);return c[0]>=c[1]&&c[0]<c[2]},na.isSame=function(a,b){var d;return this._fullCalendar?b?(d=ta([this,a],!0),oa.isSame.call(d[0],d[1],b)):(a=c.moment.parseZone(a),oa.isSame.call(this,a)&&Boolean(this._ambigTime)===Boolean(a._ambigTime)&&Boolean(this._ambigZone)===Boolean(a._ambigZone)):oa.isSame.apply(this,arguments)},a.each(["isBefore","isAfter"],function(a,b){na[b]=function(a,c){var d;return this._fullCalendar?(d=ta([this,a]),oa[b].call(d[0],d[1],c)):oa[b].apply(this,arguments)}}),pa="_d"in b()&&"updateOffset"in b,qa=pa?function(a,c){a._d.setTime(Date.UTC.apply(Date,c)),b.updateOffset(a,!1)}:va,ra=pa?function(a,c){a._d.setTime(+new Date(c[0]||0,c[1]||0,c[2]||0,c[3]||0,c[4]||0,c[5]||0,c[6]||0)),b.updateOffset(a,!1)}:va;var za={t:function(a){return wa(a,"a").charAt(0)},T:function(a){return wa(a,"A").charAt(0)}};c.formatRange=Ba;var Da={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"},Fa={};c.Class=Ia,Ia.extend=function(a){var c,b=this;return a=a||{},_(a,"constructor")&&(c=a.constructor),"function"!=typeof c&&(c=a.constructor=function(){b.apply(this,arguments)}),c.prototype=Y(b.prototype),Z(a,c.prototype),$(a,c.prototype),Z(b,c),c},Ia.mixin=function(a){Z(a.prototype||a,this.prototype)};var Ja=c.Emitter=Ia.extend({callbackHash:null,on:function(a,b){return this.getCallbacks(a).add(b),this},off:function(a,b){return this.getCallbacks(a).remove(b),this},trigger:function(a){var b=Array.prototype.slice.call(arguments,1);return this.triggerWith(a,this,b),this},triggerWith:function(a,b,c){var d=this.getCallbacks(a);return d.fireWith(b,c),this},getCallbacks:function(b){var c;return this.callbackHash||(this.callbackHash={}),c=this.callbackHash[b],c||(c=this.callbackHash[b]=a.Callbacks()),c}}),Ka=Ia.extend({isHidden:!0,options:null,el:null,documentMousedownProxy:null,margin:10,constructor:function(a){this.options=a||{}},show:function(){this.isHidden&&(this.el||this.render(),this.el.show(),this.position(),this.isHidden=!1,this.trigger("show"))},hide:function(){this.isHidden||(this.el.hide(),this.isHidden=!0,this.trigger("hide"))},render:function(){var b=this,c=this.options;this.el=a('<div class="fc-popover"/>').addClass(c.className||"").css({top:0,left:0}).append(c.content).appendTo(c.parentEl),this.el.on("click",".fc-close",function(){b.hide()}),c.autoHide&&a(document).on("mousedown",this.documentMousedownProxy=ja(this,"documentMousedown"))},documentMousedown:function(b){this.el&&!a(b.target).closest(this.el).length&&this.hide()},removeElement:function(){this.hide(),this.el&&(this.el.remove(),this.el=null),a(document).off("mousedown",this.documentMousedownProxy)},position:function(){var h,i,j,k,l,b=this.options,c=this.el.offsetParent().offset(),d=this.el.outerWidth(),e=this.el.outerHeight(),f=a(window),g=q(this.el);k=b.top||0,l=void 0!==b.left?b.left:void 0!==b.right?b.right-d:0,g.is(window)||g.is(document)?(g=f,h=0,i=0):(j=g.offset(),h=j.top,i=j.left),h+=f.scrollTop(),i+=f.scrollLeft(),b.viewportConstrain!==!1&&(k=Math.min(k,h+g.outerHeight()-e-this.margin),k=Math.max(k,h+this.margin),l=Math.min(l,i+g.outerWidth()-d-this.margin),l=Math.max(l,i+this.margin)),this.el.css({top:k-c.top,left:l-c.left})},trigger:function(a){this.options[a]&&this.options[a].apply(this,Array.prototype.slice.call(arguments,1))}}),La=Ia.extend({grid:null,rowCoords:null,colCoords:null,containerEl:null,bounds:null,constructor:function(a){this.grid=a},build:function(){this.grid.build(),this.rowCoords=this.grid.computeRowCoords(),this.colCoords=this.grid.computeColCoords(),this.computeBounds()},clear:function(){this.grid.clear(),this.rowCoords=null,this.colCoords=null},getCell:function(b,c){var j,k,l,d=this.rowCoords,e=d.length,f=this.colCoords,g=f.length,h=null,i=null;if(this.inBounds(b,c)){for(j=0;j<e;j++)if(k=d[j],c>=k.top&&c<k.bottom){h=j;break}for(j=0;j<g;j++)if(k=f[j],b>=k.left&&b<k.right){i=j;break}if(null!==h&&null!==i)return l=this.grid.getCell(h,i),l.grid=this.grid,a.extend(l,d[h],f[i]),l}return null},computeBounds:function(){this.bounds=this.containerEl?s(this.containerEl):null},inBounds:function(a,b){var c=this.bounds;return!c||a>=c.left&&a<c.right&&b>=c.top&&b<c.bottom}}),Ma=Ia.extend({coordMaps:null,constructor:function(a){this.coordMaps=a},build:function(){var b,a=this.coordMaps;for(b=0;b<a.length;b++)a[b].build()},getCell:function(a,b){var e,c=this.coordMaps,d=null;for(e=0;e<c.length&&!d;e++)d=c[e].getCell(a,b);return d},clear:function(){var b,a=this.coordMaps;for(b=0;b<a.length;b++)a[b].clear()}}),Na=c.DragListener=Ia.extend({options:null,isListening:!1,isDragging:!1,originX:null,originY:null,mousemoveProxy:null,mouseupProxy:null,subjectEl:null,subjectHref:null,scrollEl:null,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollHandlerProxy:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,constructor:function(a){a=a||{},this.options=a,this.subjectEl=a.subjectEl},mousedown:function(a){z(a)&&(a.preventDefault(),this.startListening(a),this.options.distance||this.startDrag(a))},startListening:function(b){var c;this.isListening||(b&&this.options.scroll&&(c=q(a(b.target)),c.is(window)||c.is(document)||(this.scrollEl=c,this.scrollHandlerProxy=ka(ja(this,"scrollHandler"),100),this.scrollEl.on("scroll",this.scrollHandlerProxy))),a(document).on("mousemove",this.mousemoveProxy=ja(this,"mousemove")).on("mouseup",this.mouseupProxy=ja(this,"mouseup")).on("selectstart",this.preventDefault),b?(this.originX=b.pageX,this.originY=b.pageY):(this.originX=0,this.originY=0),this.isListening=!0,this.listenStart(b))},listenStart:function(a){this.trigger("listenStart",a)},mousemove:function(a){var d,e,b=a.pageX-this.originX,c=a.pageY-this.originY;this.isDragging||(d=this.options.distance||1,e=b*b+c*c,e>=d*d&&this.startDrag(a)),this.isDragging&&this.drag(b,c,a)},startDrag:function(a){this.isListening||this.startListening(),this.isDragging||(this.isDragging=!0,this.dragStart(a))},dragStart:function(a){var b=this.subjectEl;this.trigger("dragStart",a),(this.subjectHref=b?b.attr("href"):null)&&b.removeAttr("href")},drag:function(a,b,c){this.trigger("drag",a,b,c),this.updateScroll(c)},mouseup:function(a){this.stopListening(a)},stopDrag:function(a){this.isDragging&&(this.stopScrolling(),this.dragStop(a),this.isDragging=!1)},dragStop:function(a){var b=this;this.trigger("dragStop",a),setTimeout(function(){b.subjectHref&&b.subjectEl.attr("href",b.subjectHref)},0)},stopListening:function(b){this.stopDrag(b),this.isListening&&(this.scrollEl&&(this.scrollEl.off("scroll",this.scrollHandlerProxy),this.scrollHandlerProxy=null),a(document).off("mousemove",this.mousemoveProxy).off("mouseup",this.mouseupProxy).off("selectstart",this.preventDefault),this.mousemoveProxy=null,this.mouseupProxy=null,this.isListening=!1,this.listenStop(b))},listenStop:function(a){this.trigger("listenStop",a)},trigger:function(a){this.options[a]&&this.options[a].apply(this,Array.prototype.slice.call(arguments,1))},preventDefault:function(a){a.preventDefault()},computeScrollBounds:function(){var a=this.scrollEl;this.scrollBounds=a?r(a):null},updateScroll:function(a){var d,e,f,g,b=this.scrollSensitivity,c=this.scrollBounds,h=0,i=0;c&&(d=(b-(a.pageY-c.top))/b,e=(b-(c.bottom-a.pageY))/b,f=(b-(a.pageX-c.left))/b,g=(b-(c.right-a.pageX))/b,d>=0&&d<=1?h=d*this.scrollSpeed*-1:e>=0&&e<=1&&(h=e*this.scrollSpeed),f>=0&&f<=1?i=f*this.scrollSpeed*-1:g>=0&&g<=1&&(i=g*this.scrollSpeed)),this.setScrollVel(h,i)},setScrollVel:function(a,b){this.scrollTopVel=a,this.scrollLeftVel=b,this.constrainScrollVel(),!this.scrollTopVel&&!this.scrollLeftVel||this.scrollIntervalId||(this.scrollIntervalId=setInterval(ja(this,"scrollIntervalFunc"),this.scrollIntervalMs))},constrainScrollVel:function(){var a=this.scrollEl;this.scrollTopVel<0?a.scrollTop()<=0&&(this.scrollTopVel=0):this.scrollTopVel>0&&a.scrollTop()+a[0].clientHeight>=a[0].scrollHeight&&(this.scrollTopVel=0),this.scrollLeftVel<0?a.scrollLeft()<=0&&(this.scrollLeftVel=0):this.scrollLeftVel>0&&a.scrollLeft()+a[0].clientWidth>=a[0].scrollWidth&&(this.scrollLeftVel=0)},scrollIntervalFunc:function(){var a=this.scrollEl,b=this.scrollIntervalMs/1e3;this.scrollTopVel&&a.scrollTop(a.scrollTop()+this.scrollTopVel*b),this.scrollLeftVel&&a.scrollLeft(a.scrollLeft()+this.scrollLeftVel*b),this.constrainScrollVel(),this.scrollTopVel||this.scrollLeftVel||this.stopScrolling()},stopScrolling:function(){this.scrollIntervalId&&(clearInterval(this.scrollIntervalId),this.scrollIntervalId=null,this.scrollStop())},scrollHandler:function(){this.scrollIntervalId||this.scrollStop()},scrollStop:function(){}}),Oa=Na.extend({coordMap:null,origCell:null,cell:null,coordAdjust:null,constructor:function(a,b){Na.prototype.constructor.call(this,b),this.coordMap=a},listenStart:function(a){var c,d,e,b=this.subjectEl;Na.prototype.listenStart.apply(this,arguments),this.computeCoords(),a?(d={left:a.pageX,top:a.pageY},e=d,b&&(c=r(b),e=B(e,c)),this.origCell=this.getCell(e.left,e.top),b&&this.options.subjectCenter&&(this.origCell&&(c=A(this.origCell,c)||c),e=C(c)),this.coordAdjust=D(e,d)):(this.origCell=null,this.coordAdjust=null)},computeCoords:function(){this.coordMap.build(),this.computeScrollBounds()},dragStart:function(a){var b;Na.prototype.dragStart.apply(this,arguments),b=this.getCell(a.pageX,a.pageY),b&&this.cellOver(b)},drag:function(a,b,c){var d;Na.prototype.drag.apply(this,arguments),d=this.getCell(c.pageX,c.pageY),Pa(d,this.cell)||(this.cell&&this.cellOut(),d&&this.cellOver(d))},dragStop:function(){this.cellDone(),Na.prototype.dragStop.apply(this,arguments)},cellOver:function(a){this.cell=a,this.trigger("cellOver",a,Pa(a,this.origCell),this.origCell)},cellOut:function(){this.cell&&(this.trigger("cellOut",this.cell),
this.cellDone(),this.cell=null)},cellDone:function(){this.cell&&this.trigger("cellDone",this.cell)},listenStop:function(){Na.prototype.listenStop.apply(this,arguments),this.origCell=this.cell=null,this.coordMap.clear()},scrollStop:function(){Na.prototype.scrollStop.apply(this,arguments),this.computeCoords()},getCell:function(a,b){return this.coordAdjust&&(a+=this.coordAdjust.left,b+=this.coordAdjust.top),this.coordMap.getCell(a,b)}}),Qa=Ia.extend({options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,mouseY0:null,mouseX0:null,topDelta:null,leftDelta:null,mousemoveProxy:null,isFollowing:!1,isHidden:!1,isAnimating:!1,constructor:function(b,c){this.options=c=c||{},this.sourceEl=b,this.parentEl=c.parentEl?a(c.parentEl):b.parent()},start:function(b){this.isFollowing||(this.isFollowing=!0,this.mouseY0=b.pageY,this.mouseX0=b.pageX,this.topDelta=0,this.leftDelta=0,this.isHidden||this.updatePosition(),a(document).on("mousemove",this.mousemoveProxy=ja(this,"mousemove")))},stop:function(b,c){function f(){this.isAnimating=!1,d.removeElement(),this.top0=this.left0=null,c&&c()}var d=this,e=this.options.revertDuration;this.isFollowing&&!this.isAnimating&&(this.isFollowing=!1,a(document).off("mousemove",this.mousemoveProxy),b&&e&&!this.isHidden?(this.isAnimating=!0,this.el.animate({top:this.top0,left:this.left0},{duration:e,complete:f})):f())},getEl:function(){var a=this.el;return a||(this.sourceEl.width(),a=this.el=this.sourceEl.clone().css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}).appendTo(this.parentEl)),a},removeElement:function(){this.el&&(this.el.remove(),this.el=null)},updatePosition:function(){var a,b;this.getEl(),null===this.top0&&(this.sourceEl.width(),a=this.sourceEl.offset(),b=this.el.offsetParent().offset(),this.top0=a.top-b.top,this.left0=a.left-b.left),this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},mousemove:function(a){this.topDelta=a.pageY-this.mouseY0,this.leftDelta=a.pageX-this.mouseX0,this.isHidden||this.updatePosition()},hide:function(){this.isHidden||(this.isHidden=!0,this.el&&this.el.hide())},show:function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())}}),Ra=Ia.extend({view:null,isRTL:null,cellHtml:"<td/>",constructor:function(a){this.view=a,this.isRTL=a.opt("isRTL")},rowHtml:function(a,b){var e,f,c=this.getHtmlRenderer("cell",a),d="";for(b=b||0,e=0;e<this.colCnt;e++)f=this.getCell(b,e),d+=c(f);return d=this.bookendCells(d,a,b),"<tr>"+d+"</tr>"},bookendCells:function(a,b,c){var d=this.getHtmlRenderer("intro",b)(c||0),e=this.getHtmlRenderer("outro",b)(c||0),f=this.isRTL?e:d,g=this.isRTL?d:e;return"string"==typeof a?f+a+g:a.prepend(f).append(g)},getHtmlRenderer:function(a,b){var d,e,f,g,c=this.view;return d=a+"Html",b&&(e=b+ga(a)+"Html"),e&&(g=c[e])?f=c:e&&(g=this[e])?f=this:(g=c[d])?f=c:(g=this[d])&&(f=this),"function"==typeof g?function(){return g.apply(f,arguments)||""}:function(){return g||""}}}),Sa=c.Grid=Ra.extend({start:null,end:null,rowCnt:0,colCnt:0,el:null,coordMap:null,elsByFill:null,externalDragStartProxy:null,colHeadFormat:null,eventTimeFormat:null,displayEventTime:null,displayEventEnd:null,cellDuration:null,largeUnit:null,constructor:function(){Ra.apply(this,arguments),this.coordMap=new La(this),this.elsByFill={},this.externalDragStartProxy=ja(this,"externalDragStart")},computeColHeadFormat:function(){},computeEventTimeFormat:function(){return this.view.opt("smallTimeFormat")},computeDisplayEventTime:function(){return!0},computeDisplayEventEnd:function(){return!0},setRange:function(a){this.start=a.start.clone(),this.end=a.end.clone(),this.rangeUpdated(),this.processRangeOptions()},rangeUpdated:function(){},processRangeOptions:function(){var b,c,a=this.view;this.colHeadFormat=a.opt("columnFormat")||this.computeColHeadFormat(),this.eventTimeFormat=a.opt("eventTimeFormat")||a.opt("timeFormat")||this.computeEventTimeFormat(),b=a.opt("displayEventTime"),null==b&&(b=this.computeDisplayEventTime()),c=a.opt("displayEventEnd"),null==c&&(c=this.computeDisplayEventEnd()),this.displayEventTime=b,this.displayEventEnd=c},build:function(){},clear:function(){},rangeToSegs:function(a){},diffDates:function(a,b){return this.largeUnit?N(a,b,this.largeUnit):L(a,b)},getCell:function(b,c){var d;return null==c&&("number"==typeof b?(c=b%this.colCnt,b=Math.floor(b/this.colCnt)):(c=b.col,b=b.row)),d={row:b,col:c},a.extend(d,this.getRowData(b),this.getColData(c)),a.extend(d,this.computeCellRange(d)),d},computeCellRange:function(a){var b=this.computeCellDate(a);return{start:b,end:b.clone().add(this.cellDuration)}},computeCellDate:function(a){},getRowData:function(a){return{}},getColData:function(a){return{}},getRowEl:function(a){},getColEl:function(a){},getCellDayEl:function(a){return this.getColEl(a.col)||this.getRowEl(a.row)},computeRowCoords:function(){var b,c,d,a=[];for(b=0;b<this.rowCnt;b++)c=this.getRowEl(b),d=c.offset().top,a.push({top:d,bottom:d+c.outerHeight()});return a},computeColCoords:function(){var b,c,d,a=[];for(b=0;b<this.colCnt;b++)c=this.getColEl(b),d=c.offset().left,a.push({left:d,right:d+c.outerWidth()});return a},setElement:function(b){var c=this;this.el=b,b.on("mousedown",function(b){a(b.target).is(".fc-event-container *, .fc-more")||a(b.target).closest(".fc-popover").length||c.dayMousedown(b)}),this.bindSegHandlers(),this.bindGlobalHandlers()},removeElement:function(){this.unbindGlobalHandlers(),this.el.remove()},renderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},bindGlobalHandlers:function(){a(document).on("dragstart sortstart",this.externalDragStartProxy)},unbindGlobalHandlers:function(){a(document).off("dragstart sortstart",this.externalDragStartProxy)},dayMousedown:function(a){var e,f,b=this,c=this.view,d=c.opt("selectable"),g=new Oa(this.coordMap,{scroll:c.opt("dragScroll"),dragStart:function(){c.unselect()},cellOver:function(a,c,g){g&&(e=c?a:null,d&&(f=b.computeSelection(g,a),f?b.renderSelection(f):j()))},cellOut:function(a){e=null,f=null,b.unrenderSelection(),k()},listenStop:function(a){e&&c.triggerDayClick(e,b.getCellDayEl(e),a),f&&c.reportSelection(f,a),k()}});g.mousedown(a)},renderRangeHelper:function(a,b){var c=this.fabricateHelperEvent(a,b);this.renderHelper(c,b)},fabricateHelperEvent:function(a,b){var c=b?Y(b.event):{};return c.start=a.start.clone(),c.end=a.end?a.end.clone():null,c.allDay=null,this.view.calendar.normalizeEventRange(c),c.className=(c.className||[]).concat("fc-helper"),b||(c.editable=!1),c},renderHelper:function(a,b){},unrenderHelper:function(){},renderSelection:function(a){this.renderHighlight(this.selectionRangeToSegs(a))},unrenderSelection:function(){this.unrenderHighlight()},computeSelection:function(a,b){var d,c=[a.start,a.end,b.start,b.end];return c.sort(ha),d={start:c[0].clone(),end:c[3].clone()},this.view.calendar.isSelectionRangeAllowed(d)?d:null},selectionRangeToSegs:function(a){return this.rangeToSegs(a)},renderHighlight:function(a){this.renderFill("highlight",a)},unrenderHighlight:function(){this.unrenderFill("highlight")},highlightSegClasses:function(){return["fc-highlight"]},renderFill:function(a,b){},unrenderFill:function(a){var b=this.elsByFill[a];b&&(b.remove(),delete this.elsByFill[a])},renderFillSegEls:function(b,c){var h,d=this,e=this[b+"SegEl"],f="",g=[];if(c.length){for(h=0;h<c.length;h++)f+=this.fillSegHtml(b,c[h]);a(f).each(function(b,f){var h=c[b],i=a(f);e&&(i=e.call(d,h,i)),i&&(i=a(i),i.is(d.fillSegTag)&&(h.el=i,g.push(h)))})}return g},fillSegTag:"div",fillSegHtml:function(a,b){var c=this[a+"SegClasses"],d=this[a+"SegCss"],e=c?c.call(this,b):[],f=fa(d?d.call(this,b):{});return"<"+this.fillSegTag+(e.length?' class="'+e.join(" ")+'"':"")+(f?' style="'+f+'"':"")+" />"},headHtml:function(){return'<div class="fc-row '+this.view.widgetHeaderClass+'"><table><thead>'+this.rowHtml("head")+"</thead></table></div>"},headCellHtml:function(a){var b=this.view,c=a.start;return'<th class="fc-day-header '+b.widgetHeaderClass+" fc-"+J[c.day()]+'">'+da(c.format(this.colHeadFormat))+"</th>"},bgCellHtml:function(a){var b=this.view,c=a.start,d=this.getDayClasses(c);return d.unshift("fc-day",b.widgetContentClass),'<td class="'+d.join(" ")+'" data-date="'+c.format("YYYY-MM-DD")+'"></td>'},getDayClasses:function(a){var b=this.view,c=b.calendar.getNow().stripTime(),d=["fc-"+J[a.day()]];return 1==b.intervalDuration.as("months")&&a.month()!=b.intervalStart.month()&&d.push("fc-other-month"),a.isSame(c,"day")?d.push("fc-today",b.highlightStateClass):a<c?d.push("fc-past"):d.push("fc-future"),d}});Sa.mixin({mousedOverSeg:null,isDraggingSeg:!1,isResizingSeg:!1,isDraggingExternal:!1,segs:null,renderEvents:function(a){var e,f,b=this.eventsToSegs(a),c=[],d=[];for(e=0;e<b.length;e++)f=b[e],Ta(f.event)?c.push(f):d.push(f);c=this.renderBgSegs(c)||c,d=this.renderFgSegs(d)||d,this.segs=c.concat(d)},unrenderEvents:function(){this.triggerSegMouseout(),this.unrenderFgSegs(),this.unrenderBgSegs(),this.segs=null},getEventSegs:function(){return this.segs||[]},renderFgSegs:function(a){},unrenderFgSegs:function(){},renderFgSegEls:function(b,c){var g,d=this.view,e="",f=[];if(b.length){for(g=0;g<b.length;g++)e+=this.fgSegHtml(b[g],c);a(e).each(function(c,e){var g=b[c],h=d.resolveEventEl(g.event,a(e));h&&(h.data("fc-seg",g),g.el=h,f.push(g))})}return f},fgSegHtml:function(a,b){},renderBgSegs:function(a){return this.renderFill("bgEvent",a)},unrenderBgSegs:function(){this.unrenderFill("bgEvent")},bgEventSegEl:function(a,b){return this.view.resolveEventEl(a.event,b)},bgEventSegClasses:function(a){var b=a.event,c=b.source||{};return["fc-bgevent"].concat(b.className,c.className||[])},bgEventSegCss:function(a){var b=this.view,c=a.event,d=c.source||{};return{"background-color":c.backgroundColor||c.color||d.backgroundColor||d.color||b.opt("eventBackgroundColor")||b.opt("eventColor")}},businessHoursSegClasses:function(a){return["fc-nonbusiness","fc-bgevent"]},bindSegHandlers:function(){var b=this,c=this.view;a.each({mouseenter:function(a,c){b.triggerSegMouseover(a,c)},mouseleave:function(a,c){b.triggerSegMouseout(a,c)},click:function(a,b){return c.trigger("eventClick",this,a.event,b)},mousedown:function(d,e){a(e.target).is(".fc-resizer")&&c.isEventResizable(d.event)?b.segResizeMousedown(d,e,a(e.target).is(".fc-start-resizer")):c.isEventDraggable(d.event)&&b.segDragMousedown(d,e)}},function(c,d){b.el.on(c,".fc-event-container > *",function(c){var e=a(this).data("fc-seg");if(e&&!b.isDraggingSeg&&!b.isResizingSeg)return d.call(this,e,c)})})},triggerSegMouseover:function(a,b){this.mousedOverSeg||(this.mousedOverSeg=a,this.view.trigger("eventMouseover",a.el[0],a.event,b))},triggerSegMouseout:function(a,b){b=b||{},this.mousedOverSeg&&(a=a||this.mousedOverSeg,this.mousedOverSeg=null,this.view.trigger("eventMouseout",a.el[0],a.event,b))},segDragMousedown:function(a,b){var h,c=this,d=this.view,e=d.calendar,f=a.el,g=a.event,i=new Qa(a.el,{parentEl:d.el,opacity:d.opt("dragOpacity"),revertDuration:d.opt("dragRevertDuration"),zIndex:2}),l=new Oa(d.coordMap,{distance:5,scroll:d.opt("dragScroll"),subjectEl:f,subjectCenter:!0,listenStart:function(a){i.hide(),i.start(a)},dragStart:function(b){c.triggerSegMouseout(a,b),c.segDragStart(a,b),d.hideEvent(g)},cellOver:function(b,f,k){a.cell&&(k=a.cell),h=c.computeEventDrop(k,b,g),h&&!e.isEventRangeAllowed(h,g)&&(j(),h=null),h&&d.renderDrag(h,a)?i.hide():i.show(),f&&(h=null)},cellOut:function(){d.unrenderDrag(),i.show(),h=null},cellDone:function(){k()},dragStop:function(b){i.stop(!h,function(){d.unrenderDrag(),d.showEvent(g),c.segDragStop(a,b),h&&d.reportEventDrop(g,h,this.largeUnit,f,b)})},listenStop:function(){i.stop()}});l.mousedown(b)},segDragStart:function(a,b){this.isDraggingSeg=!0,this.view.trigger("eventDragStart",a.el[0],a.event,b,{})},segDragStop:function(a,b){this.isDraggingSeg=!1,this.view.trigger("eventDragStop",a.el[0],a.event,b,{})},computeEventDrop:function(a,b,c){var g,h,d=this.view.calendar,e=a.start,f=b.start;return e.hasTime()===f.hasTime()?(g=this.diffDates(f,e),c.allDay&&T(g)?(h={start:c.start.clone(),end:d.getEventEnd(c),allDay:!1},d.normalizeEventRangeTimes(h)):h={start:c.start.clone(),end:c.end?c.end.clone():null,allDay:c.allDay},h.start.add(g),h.end&&h.end.add(g)):h={start:f.clone(),end:null,allDay:!f.hasTime()},h},applyDragOpacity:function(a){var b=this.view.opt("dragOpacity");null!=b&&a.each(function(a,c){c.style.opacity=b})},externalDragStart:function(b,c){var e,f,d=this.view;d.opt("droppable")&&(e=a((c?c.item:null)||b.target),f=d.opt("dropAccept"),(a.isFunction(f)?f.call(e[0],e):e.is(f))&&(this.isDraggingExternal||this.listenToExternalDrag(e,b,c)))},listenToExternalDrag:function(a,b,c){var f,g,d=this,e=Ya(a);f=new Oa(this.coordMap,{listenStart:function(){d.isDraggingExternal=!0},cellOver:function(a){g=d.computeExternalDrop(a,e),g?d.renderDrag(g):j()},cellOut:function(){g=null,d.unrenderDrag(),k()},dragStop:function(){d.unrenderDrag(),k(),g&&d.view.reportExternalDrop(e,g,a,b,c)},listenStop:function(){d.isDraggingExternal=!1}}),f.startDrag(b)},computeExternalDrop:function(a,b){var c={start:a.start.clone(),end:null};return b.startTime&&!c.start.hasTime()&&c.start.time(b.startTime),b.duration&&(c.end=c.start.clone().add(b.duration)),this.view.calendar.isExternalDropRangeAllowed(c,b.eventProps)?c:null},renderDrag:function(a,b){},unrenderDrag:function(){},segResizeMousedown:function(a,b,c){var l,m,d=this,e=this.view,f=e.calendar,g=a.el,h=a.event,i=f.getEventEnd(h);l=new Oa(this.coordMap,{distance:5,scroll:e.opt("dragScroll"),subjectEl:g,dragStart:function(b){d.triggerSegMouseout(a,b),d.segResizeStart(a,b)},cellOver:function(b,g,k){m=c?d.computeEventStartResize(k,b,h):d.computeEventEndResize(k,b,h),m&&(f.isEventRangeAllowed(m,h)?m.start.isSame(h.start)&&m.end.isSame(i)&&(m=null):(j(),m=null)),m&&(e.hideEvent(h),d.renderEventResize(m,a))},cellOut:function(){m=null},cellDone:function(){d.unrenderEventResize(),e.showEvent(h),k()},dragStop:function(b){d.segResizeStop(a,b),m&&e.reportEventResize(h,m,this.largeUnit,g,b)}}),l.mousedown(b)},segResizeStart:function(a,b){this.isResizingSeg=!0,this.view.trigger("eventResizeStart",a.el[0],a.event,b,{})},segResizeStop:function(a,b){this.isResizingSeg=!1,this.view.trigger("eventResizeStop",a.el[0],a.event,b,{})},computeEventStartResize:function(a,b,c){return this.computeEventResize("start",a,b,c)},computeEventEndResize:function(a,b,c){return this.computeEventResize("end",a,b,c)},computeEventResize:function(a,b,c,d){var g,h,e=this.view.calendar,f=this.diffDates(c[a],b[a]);return g={start:d.start.clone(),end:e.getEventEnd(d),allDay:d.allDay},g.allDay&&T(f)&&(g.allDay=!1,e.normalizeEventRangeTimes(g)),g[a].add(f),g.start.isBefore(g.end)||(h=d.allDay?e.defaultAllDayEventDuration:e.defaultTimedEventDuration,this.cellDuration&&this.cellDuration<h&&(h=this.cellDuration),"start"==a?g.start=g.end.clone().subtract(h):g.end=g.start.clone().add(h)),g},renderEventResize:function(a,b){},unrenderEventResize:function(){},getEventTimeText:function(a,b,c){return null==b&&(b=this.eventTimeFormat),null==c&&(c=this.displayEventEnd),this.displayEventTime&&a.start.hasTime()?c&&a.end?this.view.formatRange(a,b):a.start.format(b):""},getSegClasses:function(a,b,c){var d=a.event,e=["fc-event",a.isStart?"fc-start":"fc-not-start",a.isEnd?"fc-end":"fc-not-end"].concat(d.className,d.source?d.source.className:[]);return b&&e.push("fc-draggable"),c&&e.push("fc-resizable"),e},getEventSkinCss:function(a){var b=this.view,c=a.source||{},d=a.color,e=c.color,f=b.opt("eventColor");return{"background-color":a.backgroundColor||d||c.backgroundColor||e||b.opt("eventBackgroundColor")||f,"border-color":a.borderColor||d||c.borderColor||e||b.opt("eventBorderColor")||f,color:a.textColor||c.textColor||b.opt("eventTextColor")}},eventsToSegs:function(a,b){var e,c=this.eventsToRanges(a),d=[];for(e=0;e<c.length;e++)d.push.apply(d,this.eventRangeToSegs(c[e],b));return d},eventsToRanges:function(b){var c=this,d=Wa(b),e=[];return a.each(d,function(a,b){b.length&&e.push.apply(e,Ua(b[0])?c.eventsToInverseRanges(b):c.eventsToNormalRanges(b))}),e},eventsToNormalRanges:function(a){var d,e,f,g,b=this.view.calendar,c=[];for(d=0;d<a.length;d++)e=a[d],f=e.start.clone().stripZone(),g=b.getEventEnd(e).stripZone(),c.push({event:e,start:f,end:g,eventStartMS:+f,eventDurationMS:g-f});return c},eventsToInverseRanges:function(a){var i,j,b=this.view,c=b.start.clone().stripZone(),d=b.end.clone().stripZone(),e=this.eventsToNormalRanges(a),f=[],g=a[0],h=c;for(e.sort(Xa),i=0;i<e.length;i++)j=e[i],j.start>h&&f.push({event:g,start:h,end:j.start}),h=j.end;return h<d&&f.push({event:g,start:h,end:d}),f},eventRangeToSegs:function(a,b){var c,d,e;for(a=this.view.calendar.ensureVisibleEventRange(a),c=b?b(a):this.rangeToSegs(a),d=0;d<c.length;d++)e=c[d],e.event=a.event,e.eventStartMS=a.eventStartMS,e.eventDurationMS=a.eventDurationMS;return c},sortSegs:function(a){a.sort(ja(this,"compareSegs"))},compareSegs:function(a,b){return a.eventStartMS-b.eventStartMS||b.eventDurationMS-a.eventDurationMS||b.event.allDay-a.event.allDay||F(a.event,b.event,this.view.eventOrderSpecs)}}),c.dataAttrPrefix="";var Za=Sa.extend({numbersVisible:!1,bottomCoordPadding:0,breakOnWeeks:null,cellDates:null,dayToCellOffsets:null,rowEls:null,dayEls:null,helperEls:null,constructor:function(){Sa.apply(this,arguments),this.cellDuration=b.duration(1,"day")},renderDates:function(a){var g,h,i,b=this.view,c=this.rowCnt,d=this.colCnt,e=c*d,f="";for(g=0;g<c;g++)f+=this.dayRowHtml(g,a);for(this.el.html(f),this.rowEls=this.el.find(".fc-row"),this.dayEls=this.el.find(".fc-day"),h=0;h<e;h++)i=this.getCell(h),b.trigger("dayRender",null,i.start,this.dayEls.eq(h))},unrenderDates:function(){this.removeSegPopover()},renderBusinessHours:function(){var a=this.view.calendar.getBusinessHoursEvents(!0),b=this.eventsToSegs(a);this.renderFill("businessHours",b,"bgevent")},dayRowHtml:function(a,b){var c=this.view,d=["fc-row","fc-week",c.widgetContentClass];return b&&d.push("fc-rigid"),'<div class="'+d.join(" ")+'"><div class="fc-bg"><table>'+this.rowHtml("day",a)+'</table></div><div class="fc-content-skeleton"><table>'+(this.numbersVisible?"<thead>"+this.rowHtml("number",a)+"</thead>":"")+"</table></div></div>"},dayCellHtml:function(a){return this.bgCellHtml(a)},computeColHeadFormat:function(){return this.rowCnt>1?"ddd":this.colCnt>1?this.view.opt("dayOfMonthFormat"):"dddd"},computeEventTimeFormat:function(){return this.view.opt("extraSmallTimeFormat")},computeDisplayEventEnd:function(){return 1==this.colCnt},rangeUpdated:function(){var a,b,c,d;if(this.updateCellDates(),a=this.cellDates,this.breakOnWeeks){for(b=a[0].day(),d=1;d<a.length&&a[d].day()!=b;d++);c=Math.ceil(a.length/d)}else c=1,d=a.length;this.rowCnt=c,this.colCnt=d},updateCellDates:function(){for(var a=this.view,b=this.start.clone(),c=[],d=-1,e=[];b.isBefore(this.end);)a.isHiddenDay(b)?e.push(d+.5):(d++,e.push(d),c.push(b.clone())),b.add(1,"days");this.cellDates=c,this.dayToCellOffsets=e},computeCellDate:function(a){var b=this.colCnt,c=a.row*b+(this.isRTL?b-a.col-1:a.col);return this.cellDates[c].clone()},getRowEl:function(a){return this.rowEls.eq(a)},getColEl:function(a){return this.dayEls.eq(a)},getCellDayEl:function(a){return this.dayEls.eq(a.row*this.colCnt+a.col)},computeRowCoords:function(){var a=Sa.prototype.computeRowCoords.call(this);return a[a.length-1].bottom+=this.bottomCoordPadding,a},rangeToSegs:function(a){var f,g,h,i,j,k,l,m,n,o,b=this.isRTL,c=this.rowCnt,d=this.colCnt,e=[];for(a=this.view.computeDayRange(a),f=this.dateToCellOffset(a.start),g=this.dateToCellOffset(a.end.subtract(1,"days")),h=0;h<c;h++)i=h*d,j=i+d-1,m=Math.max(i,f),n=Math.min(j,g),m=Math.ceil(m),n=Math.floor(n),m<=n&&(k=m===f,l=n===g,m-=i,n-=i,o={row:h,isStart:k,isEnd:l},b?(o.leftCol=d-n-1,o.rightCol=d-m-1):(o.leftCol=m,o.rightCol=n),e.push(o));return e},dateToCellOffset:function(a){var b=this.dayToCellOffsets,c=a.diff(this.start,"days");return c<0?b[0]-1:c>=b.length?b[b.length-1]+1:b[c]},renderDrag:function(a,b){if(this.renderHighlight(this.eventRangeToSegs(a)),b&&!b.el.closest(this.el).length)return this.renderRangeHelper(a,b),this.applyDragOpacity(this.helperEls),!0},unrenderDrag:function(){this.unrenderHighlight(),this.unrenderHelper()},renderEventResize:function(a,b){this.renderHighlight(this.eventRangeToSegs(a)),this.renderRangeHelper(a,b)},unrenderEventResize:function(){this.unrenderHighlight(),this.unrenderHelper()},renderHelper:function(b,c){var f,d=[],e=this.eventsToSegs([b]);e=this.renderFgSegEls(e),f=this.renderSegRows(e),this.rowEls.each(function(b,e){var i,g=a(e),h=a('<div class="fc-helper-skeleton"><table/></div>');i=c&&c.row===b?c.el.position().top:g.find(".fc-content-skeleton tbody").position().top,h.css("top",i).find("table").append(f[b].tbodyEl),g.append(h),d.push(h[0])}),this.helperEls=a(d)},unrenderHelper:function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},fillSegTag:"td",renderFill:function(b,c,d){var f,g,h,e=[];for(c=this.renderFillSegEls(b,c),f=0;f<c.length;f++)g=c[f],h=this.renderFillRow(b,g,d),this.rowEls.eq(g.row).append(h),e.push(h[0]);return this.elsByFill[b]=a(e),c},renderFillRow:function(b,c,d){var h,i,e=this.colCnt,f=c.leftCol,g=c.rightCol+1;return d=d||b.toLowerCase(),h=a('<div class="fc-'+d+'-skeleton"><table><tr/></table></div>'),i=h.find("tr"),f>0&&i.append('<td colspan="'+f+'"/>'),i.append(c.el.attr("colspan",g-f)),g<e&&i.append('<td colspan="'+(e-g)+'"/>'),this.bookendCells(i,b),h}});Za.mixin({rowStructs:null,unrenderEvents:function(){this.removeSegPopover(),Sa.prototype.unrenderEvents.apply(this,arguments)},getEventSegs:function(){return Sa.prototype.getEventSegs.call(this).concat(this.popoverSegs||[])},renderBgSegs:function(b){var c=a.grep(b,function(a){return a.event.allDay});return Sa.prototype.renderBgSegs.call(this,c)},renderFgSegs:function(b){var c;return b=this.renderFgSegEls(b),c=this.rowStructs=this.renderSegRows(b),this.rowEls.each(function(b,d){a(d).find(".fc-content-skeleton > table").append(c[b].tbodyEl)}),b},unrenderFgSegs:function(){for(var b,a=this.rowStructs||[];b=a.pop();)b.tbodyEl.remove();this.rowStructs=null},renderSegRows:function(a){var c,d,b=[];for(c=this.groupSegRows(a),d=0;d<c.length;d++)b.push(this.renderSegRow(d,c[d]));return b},fgSegHtml:function(a,b){var k,l,c=this.view,d=a.event,e=c.isEventDraggable(d),f=!b&&d.allDay&&a.isStart&&c.isEventResizableFromStart(d),g=!b&&d.allDay&&a.isEnd&&c.isEventResizableFromEnd(d),h=this.getSegClasses(a,e,f||g),i=fa(this.getEventSkinCss(d)),j="";return h.unshift("fc-day-grid-event","fc-h-event"),a.isStart&&(k=this.getEventTimeText(d),k&&(j='<span class="fc-time">'+da(k)+"</span>")),l='<span class="fc-title">'+(da(d.title||"")||"&nbsp;")+"</span>",'<a class="'+h.join(" ")+'"'+(d.url?' href="'+da(d.url)+'"':"")+(i?' style="'+i+'"':"")+'><div class="fc-content">'+(this.isRTL?l+" "+j:j+" "+l)+"</div>"+(f?'<div class="fc-resizer fc-start-resizer" />':"")+(g?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},renderSegRow:function(b,c){function r(b){for(;m<b;)q=(j[k-1]||[])[m],q?q.attr("rowspan",parseInt(q.attr("rowspan")||1,10)+1):(q=a("<td/>"),n.append(q)),i[k][m]=q,j[k][m]=q,m++}var k,l,m,n,o,p,q,d=this.colCnt,e=this.buildSegLevels(c),f=Math.max(1,e.length),g=a("<tbody/>"),h=[],i=[],j=[];for(k=0;k<f;k++){if(l=e[k],m=0,n=a("<tr/>"),h.push([]),i.push([]),j.push([]),l)for(o=0;o<l.length;o++){for(p=l[o],r(p.leftCol),q=a('<td class="fc-event-container"/>').append(p.el),p.leftCol!=p.rightCol?q.attr("colspan",p.rightCol-p.leftCol+1):j[k][m]=q;m<=p.rightCol;)i[k][m]=q,h[k][m]=p,m++;n.append(q)}r(d),this.bookendCells(n,"eventSkeleton"),g.append(n)}return{row:b,tbodyEl:g,cellMatrix:i,segMatrix:h,segLevels:e,segs:c}},buildSegLevels:function(a){var c,d,e,b=[];for(this.sortSegs(a),c=0;c<a.length;c++){for(d=a[c],e=0;e<b.length&&$a(d,b[e]);e++);d.level=e,(b[e]||(b[e]=[])).push(d)}for(e=0;e<b.length;e++)b[e].sort(_a);return b},groupSegRows:function(a){var c,b=[];for(c=0;c<this.rowCnt;c++)b.push([]);for(c=0;c<a.length;c++)b[a[c].row].push(a[c]);return b}}),Za.mixin({segPopover:null,popoverSegs:null,removeSegPopover:function(){this.segPopover&&this.segPopover.hide()},limitRows:function(a){var c,d,b=this.rowStructs||[];for(c=0;c<b.length;c++)this.unlimitRow(c),d=!!a&&("number"==typeof a?a:this.computeRowLevelLimit(c)),d!==!1&&this.limitRow(c,d)},computeRowLevelLimit:function(b){function i(b,c){h=Math.max(h,a(c).outerHeight())}var f,g,h,c=this.rowEls.eq(b),d=c.height(),e=this.rowStructs[b].tbodyEl.children();for(f=0;f<e.length;f++)if(g=e.eq(f).removeClass("fc-limited"),h=0,g.find("> td > :first-child").each(i),g.position().top+h>d)return f;return!1},limitRow:function(b,c){function x(e){for(;g<e;)h=d.getCell(b,g),n=d.getCellSegs(h,c),n.length&&(q=j[c-1][g],w=d.renderMoreLink(h,n),v=a("<div/>").append(w),q.append(v),f.push(v[0])),g++}var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,d=this,e=this.rowStructs[b],f=[],g=0;if(c&&c<e.segLevels.length){for(i=e.segLevels[c-1],j=e.cellMatrix,k=e.tbodyEl.children().slice(c).addClass("fc-limited").get(),l=0;l<i.length;l++){for(m=i[l],x(m.leftCol),p=[],o=0;g<=m.rightCol;)h=this.getCell(b,g),n=this.getCellSegs(h,c),p.push(n),o+=n.length,g++;if(o){for(q=j[c-1][m.leftCol],r=q.attr("rowspan")||1,s=[],t=0;t<p.length;t++)u=a('<td class="fc-more-cell"/>').attr("rowspan",r),n=p[t],h=this.getCell(b,m.leftCol+t),w=this.renderMoreLink(h,[m].concat(n)),v=a("<div/>").append(w),u.append(v),s.push(u[0]),f.push(u[0]);q.addClass("fc-limited").after(a(s)),k.push(q[0])}}x(this.colCnt),e.moreEls=a(f),e.limitedEls=a(k)}},unlimitRow:function(a){var b=this.rowStructs[a];b.moreEls&&(b.moreEls.remove(),b.moreEls=null),b.limitedEls&&(b.limitedEls.removeClass("fc-limited"),b.limitedEls=null)},renderMoreLink:function(b,c){var d=this,e=this.view;return a('<a class="fc-more"/>').text(this.getMoreLinkText(c.length)).on("click",function(f){var g=e.opt("eventLimitClick"),h=b.start,i=a(this),j=d.getCellDayEl(b),k=d.getCellSegs(b),l=d.resliceDaySegs(k,h),m=d.resliceDaySegs(c,h);"function"==typeof g&&(g=e.trigger("eventLimitClick",null,{date:h,dayEl:j,moreEl:i,segs:l,hiddenSegs:m},f)),"popover"===g?d.showSegPopover(b,i,l):"string"==typeof g&&e.calendar.zoomTo(h,g)})},showSegPopover:function(a,b,c){var g,h,d=this,e=this.view,f=b.parent();g=1==this.rowCnt?e.el:this.rowEls.eq(a.row),h={className:"fc-more-popover",content:this.renderSegPopoverContent(a,c),parentEl:this.el,top:g.offset().top,autoHide:!0,viewportConstrain:e.opt("popoverViewportConstrain"),hide:function(){d.segPopover.removeElement(),d.segPopover=null,d.popoverSegs=null}},this.isRTL?h.right=f.offset().left+f.outerWidth()+1:h.left=f.offset().left-1,this.segPopover=new Ka(h),this.segPopover.show()},renderSegPopoverContent:function(b,c){var i,d=this.view,e=d.opt("theme"),f=b.start.format(d.opt("dayPopoverFormat")),g=a('<div class="fc-header '+d.widgetHeaderClass+'"><span class="fc-close '+(e?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span><span class="fc-title">'+da(f)+'</span><div class="fc-clear"/></div><div class="fc-body '+d.widgetContentClass+'"><div class="fc-event-container"></div></div>'),h=g.find(".fc-event-container");for(c=this.renderFgSegEls(c,!0),this.popoverSegs=c,i=0;i<c.length;i++)c[i].cell=b,h.append(c[i].el);return g},resliceDaySegs:function(b,c){var d=a.map(b,function(a){return a.event}),e=c.clone().stripTime(),f=e.clone().add(1,"days"),g={start:e,end:f};return b=this.eventsToSegs(d,function(a){var b=I(a,g);return b?[b]:[]}),this.sortSegs(b),b},getMoreLinkText:function(a){var b=this.view.opt("eventLimitText");return"function"==typeof b?b(a):"+"+a+" "+b},getCellSegs:function(a,b){for(var f,c=this.rowStructs[a.row].segMatrix,d=b||0,e=[];d<c.length;)f=c[d][a.col],f&&e.push(f),d++;return e}});var ab=Sa.extend({slotDuration:null,snapDuration:null,minTime:null,maxTime:null,colDates:null,labelFormat:null,labelInterval:null,dayEls:null,slatEls:null,slatTops:null,helperEl:null,businessHourSegs:null,constructor:function(){Sa.apply(this,arguments),this.processOptions()},renderDates:function(){this.el.html(this.renderHtml()),this.dayEls=this.el.find(".fc-day"),this.slatEls=this.el.find(".fc-slats tr")},renderBusinessHours:function(){var a=this.view.calendar.getBusinessHoursEvents();this.businessHourSegs=this.renderFill("businessHours",this.eventsToSegs(a),"bgevent")},renderHtml:function(){return'<div class="fc-bg"><table>'+this.rowHtml("slotBg")+'</table></div><div class="fc-slats"><table>'+this.slatRowHtml()+"</table></div>"},slotBgCellHtml:function(a){return this.bgCellHtml(a)},slatRowHtml:function(){for(var f,g,h,a=this.view,c=this.isRTL,d="",e=b.duration(+this.minTime);e<this.maxTime;)f=this.start.clone().time(e),g=ia(R(e,this.labelInterval)),h='<td class="fc-axis fc-time '+a.widgetContentClass+'" '+a.axisStyleAttr()+">"+(g?"<span>"+da(f.format(this.labelFormat))+"</span>":"")+"</td>",d+="<tr "+(g?"":'class="fc-minor"')+">"+(c?"":h)+'<td class="'+a.widgetContentClass+'"/>'+(c?h:"")+"</tr>",e.add(this.slotDuration);return d},processOptions:function(){var f,c=this.view,d=c.opt("slotDuration"),e=c.opt("snapDuration");d=b.duration(d),e=e?b.duration(e):d,this.slotDuration=d,this.snapDuration=e,this.cellDuration=e,this.minTime=b.duration(c.opt("minTime")),this.maxTime=b.duration(c.opt("maxTime")),f=c.opt("slotLabelFormat"),a.isArray(f)&&(f=f[f.length-1]),this.labelFormat=f||c.opt("axisFormat")||c.opt("smallTimeFormat"),f=c.opt("slotLabelInterval"),this.labelInterval=f?b.duration(f):this.computeLabelInterval(d)},computeLabelInterval:function(a){var c,d,e;for(c=yb.length-1;c>=0;c--)if(d=b.duration(yb[c]),e=R(d,a),ia(e)&&e>1)return d;return b.duration(a)},computeColHeadFormat:function(){return this.colCnt>1?this.view.opt("dayOfMonthFormat"):"dddd"},computeEventTimeFormat:function(){return this.view.opt("noMeridiemTimeFormat")},computeDisplayEventEnd:function(){return!0},rangeUpdated:function(){var c,a=this.view,b=[];for(c=this.start.clone();c.isBefore(this.end);)b.push(c.clone()),c.add(1,"day"),c=a.skipHiddenDays(c);this.isRTL&&b.reverse(),this.colDates=b,this.colCnt=b.length,this.rowCnt=Math.ceil((this.maxTime-this.minTime)/this.snapDuration)},computeCellDate:function(a){var b=this.colDates[a.col],c=this.computeSnapTime(a.row);return b=this.view.calendar.rezoneDate(b),b.time(c),b},getColEl:function(a){return this.dayEls.eq(a)},computeSnapTime:function(a){return b.duration(this.minTime+this.snapDuration*a)},rangeToSegs:function(a){var d,e,f,g,b=this.colCnt,c=[];for(a={start:a.start.clone().stripZone(),end:a.end.clone().stripZone()},e=0;e<b;e++)f=this.colDates[e],g={start:f.clone().time(this.minTime),end:f.clone().time(this.maxTime)},d=I(a,g),d&&(d.col=e,c.push(d));return c},updateSize:function(a){this.computeSlatTops(),a&&this.updateSegVerticals()},computeRowCoords:function(){var c,d,a=this.el.offset().top,b=[];for(c=0;c<this.rowCnt;c++)d={top:a+this.computeTimeTop(this.computeSnapTime(c))},c>0&&(b[c-1].bottom=d.top),b.push(d);return d.bottom=d.top+this.computeTimeTop(this.computeSnapTime(c)),b},computeDateTop:function(a,c){return this.computeTimeTop(b.duration(a.clone().stripZone()-c.clone().stripTime()))},computeTimeTop:function(a){var c,d,e,f,b=(a-this.minTime)/this.slotDuration;return b=Math.max(0,b),b=Math.min(this.slatEls.length,b),c=Math.floor(b),d=b-c,e=this.slatTops[c],d?(f=this.slatTops[c+1],e+(f-e)*d):e},computeSlatTops:function(){var c,b=[];this.slatEls.each(function(d,e){c=a(e).position().top,b.push(c)}),b.push(c+this.slatEls.last().outerHeight()),this.slatTops=b},renderDrag:function(a,b){return b?(this.renderRangeHelper(a,b),this.applyDragOpacity(this.helperEl),!0):void this.renderHighlight(this.eventRangeToSegs(a))},unrenderDrag:function(){this.unrenderHelper(),this.unrenderHighlight()},renderEventResize:function(a,b){this.renderRangeHelper(a,b)},unrenderEventResize:function(){this.unrenderHelper()},renderHelper:function(b,c){var e,f,g,h,d=this.eventsToSegs([b]);for(d=this.renderFgSegEls(d),e=this.renderSegTable(d),f=0;f<d.length;f++)g=d[f],
c&&c.col===g.col&&(h=c.el,g.el.css({left:h.css("left"),right:h.css("right"),"margin-left":h.css("margin-left"),"margin-right":h.css("margin-right")}));this.helperEl=a('<div class="fc-helper-skeleton"/>').append(e).appendTo(this.el)},unrenderHelper:function(){this.helperEl&&(this.helperEl.remove(),this.helperEl=null)},renderSelection:function(a){this.view.opt("selectHelper")?this.renderRangeHelper(a):this.renderHighlight(this.selectionRangeToSegs(a))},unrenderSelection:function(){this.unrenderHelper(),this.unrenderHighlight()},renderFill:function(b,c,d){var e,f,g,h,i,j,k,l,m,n;if(c.length){for(c=this.renderFillSegEls(b,c),e=this.groupSegCols(c),d=d||b.toLowerCase(),f=a('<div class="fc-'+d+'-skeleton"><table><tr/></table></div>'),g=f.find("tr"),h=0;h<e.length;h++)if(i=e[h],j=a("<td/>").appendTo(g),i.length)for(k=a('<div class="fc-'+d+'-container"/>').appendTo(j),l=this.colDates[h],m=0;m<i.length;m++)n=i[m],k.append(n.el.css({top:this.computeDateTop(n.start,l),bottom:-this.computeDateTop(n.end,l)}));this.bookendCells(g,b),this.el.append(f),this.elsByFill[b]=f}return c}});ab.mixin({eventSkeletonEl:null,renderFgSegs:function(b){return b=this.renderFgSegEls(b),this.el.append(this.eventSkeletonEl=a('<div class="fc-content-skeleton"/>').append(this.renderSegTable(b))),b},unrenderFgSegs:function(a){this.eventSkeletonEl&&(this.eventSkeletonEl.remove(),this.eventSkeletonEl=null)},renderSegTable:function(b){var e,f,g,h,i,j,c=a("<table><tr/></table>"),d=c.find("tr");for(e=this.groupSegCols(b),this.computeSegVerticals(b),h=0;h<e.length;h++){for(i=e[h],this.placeSlotSegs(i),j=a('<div class="fc-event-container"/>'),f=0;f<i.length;f++)g=i[f],g.el.css(this.generateSegPositionCss(g)),g.bottom-g.top<30&&g.el.addClass("fc-short"),j.append(g.el);d.append(a("<td/>").append(j))}return this.bookendCells(d,"eventSkeleton"),c},placeSlotSegs:function(a){var b,c,d;if(this.sortSegs(a),b=bb(a),cb(b),c=b[0]){for(d=0;d<c.length;d++)db(c[d]);for(d=0;d<c.length;d++)this.computeSlotSegCoords(c[d],0,0)}},computeSlotSegCoords:function(a,b,c){var e,d=a.forwardSegs;if(void 0===a.forwardCoord)for(d.length?(this.sortForwardSlotSegs(d),this.computeSlotSegCoords(d[0],b+1,c),a.forwardCoord=d[0].backwardCoord):a.forwardCoord=1,a.backwardCoord=a.forwardCoord-(a.forwardCoord-c)/(b+1),e=0;e<d.length;e++)this.computeSlotSegCoords(d[e],0,a.forwardCoord)},updateSegVerticals:function(){var b,a=(this.segs||[]).concat(this.businessHourSegs||[]);for(this.computeSegVerticals(a),b=0;b<a.length;b++)a[b].el.css(this.generateSegVerticalCss(a[b]))},computeSegVerticals:function(a){var b,c;for(b=0;b<a.length;b++)c=a[b],c.top=this.computeDateTop(c.start,c.start),c.bottom=this.computeDateTop(c.end,c.start)},fgSegHtml:function(a,b){var j,k,l,c=this.view,d=a.event,e=c.isEventDraggable(d),f=!b&&a.isStart&&c.isEventResizableFromStart(d),g=!b&&a.isEnd&&c.isEventResizableFromEnd(d),h=this.getSegClasses(a,e,f||g),i=fa(this.getEventSkinCss(d));return h.unshift("fc-time-grid-event","fc-v-event"),c.isMultiDayEvent(d)?(a.isStart||a.isEnd)&&(j=this.getEventTimeText(a),k=this.getEventTimeText(a,"LT"),l=this.getEventTimeText(a,null,!1)):(j=this.getEventTimeText(d),k=this.getEventTimeText(d,"LT"),l=this.getEventTimeText(d,null,!1)),'<a class="'+h.join(" ")+'"'+(d.url?' href="'+da(d.url)+'"':"")+(i?' style="'+i+'"':"")+'><div class="fc-content">'+(j?'<div class="fc-time" data-start="'+da(l)+'" data-full="'+da(k)+'"><span>'+da(j)+"</span></div>":"")+(d.title?'<div class="fc-title">'+da(d.title)+"</div>":"")+'</div><div class="fc-bg"/>'+(g?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},generateSegPositionCss:function(a){var f,g,b=this.view.opt("slotEventOverlap"),c=a.backwardCoord,d=a.forwardCoord,e=this.generateSegVerticalCss(a);return b&&(d=Math.min(1,c+2*(d-c))),this.isRTL?(f=1-d,g=c):(f=c,g=1-d),e.zIndex=a.level+1,e.left=100*f+"%",e.right=100*g+"%",b&&a.forwardPressure&&(e[this.isRTL?"marginLeft":"marginRight"]=20),e},generateSegVerticalCss:function(a){return{top:a.top,bottom:-a.bottom}},groupSegCols:function(a){var c,b=[];for(c=0;c<this.colCnt;c++)b.push([]);for(c=0;c<a.length;c++)b[a[c].col].push(a[c]);return b},sortForwardSlotSegs:function(a){a.sort(ja(this,"compareForwardSlotSegs"))},compareForwardSlotSegs:function(a,b){return b.forwardPressure-a.forwardPressure||(a.backwardCoord||0)-(b.backwardCoord||0)||this.compareSegs(a,b)}});var gb=c.View=Ia.extend({type:null,name:null,title:null,calendar:null,options:null,coordMap:null,el:null,displaying:null,isSkeletonRendered:!1,isEventsRendered:!1,start:null,end:null,intervalStart:null,intervalEnd:null,intervalDuration:null,intervalUnit:null,isRTL:!1,isSelected:!1,eventOrderSpecs:null,scrollerEl:null,scrollTop:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,nextDayThreshold:null,isHiddenDayHash:null,documentMousedownProxy:null,constructor:function(a,c,d,e){this.calendar=a,this.type=this.name=c,this.options=d,this.intervalDuration=e||b.duration(1,"day"),this.nextDayThreshold=b.duration(this.opt("nextDayThreshold")),this.initThemingProps(),this.initHiddenDays(),this.isRTL=this.opt("isRTL"),this.eventOrderSpecs=E(this.opt("eventOrder")),this.documentMousedownProxy=ja(this,"documentMousedown"),this.initialize()},initialize:function(){},opt:function(a){return this.options[a]},trigger:function(a,b){var c=this.calendar;return c.trigger.apply(c,[a,b||this].concat(Array.prototype.slice.call(arguments,2),[this]))},setDate:function(a){this.setRange(this.computeRange(a))},setRange:function(b){a.extend(this,b),this.updateTitle()},computeRange:function(a){var e,f,b=O(this.intervalDuration),c=a.clone().startOf(b),d=c.clone().add(this.intervalDuration);return/year|month|week|day/.test(b)?(c.stripTime(),d.stripTime()):(c.hasTime()||(c=this.calendar.rezoneDate(c)),d.hasTime()||(d=this.calendar.rezoneDate(d))),e=c.clone(),e=this.skipHiddenDays(e),f=d.clone(),f=this.skipHiddenDays(f,-1,!0),{intervalUnit:b,intervalStart:c,intervalEnd:d,start:e,end:f}},computePrevDate:function(a){return this.massageCurrentDate(a.clone().startOf(this.intervalUnit).subtract(this.intervalDuration),-1)},computeNextDate:function(a){return this.massageCurrentDate(a.clone().startOf(this.intervalUnit).add(this.intervalDuration))},massageCurrentDate:function(a,b){return this.intervalDuration.as("days")<=1&&this.isHiddenDay(a)&&(a=this.skipHiddenDays(a,b),a.startOf("day")),a},updateTitle:function(){this.title=this.computeTitle()},computeTitle:function(){return this.formatRange({start:this.intervalStart,end:this.intervalEnd},this.opt("titleFormat")||this.computeTitleFormat(),this.opt("titleRangeSeparator"))},computeTitleFormat:function(){return"year"==this.intervalUnit?"YYYY":"month"==this.intervalUnit?this.opt("monthYearFormat"):this.intervalDuration.as("days")>1?"ll":"LL"},formatRange:function(a,b,c){var d=a.end;return d.hasTime()||(d=d.clone().subtract(1)),Ba(a.start,d,b,c,this.opt("isRTL"))},setElement:function(a){this.el=a,this.bindGlobalHandlers()},removeElement:function(){this.clear(),this.isSkeletonRendered&&(this.unrenderSkeleton(),this.isSkeletonRendered=!1),this.unbindGlobalHandlers(),this.el.remove()},display:function(b){var c=this,d=null;return this.displaying&&(d=this.queryScroll()),this.clear().then(function(){return c.displaying=a.when(c.displayView(b)).then(function(){c.forceScroll(c.computeInitialScroll(d)),c.triggerRender()})})},clear:function(){var b=this,c=this.displaying;return c?c.then(function(){return b.displaying=null,b.clearEvents(),b.clearView()}):a.when()},displayView:function(a){this.isSkeletonRendered||(this.renderSkeleton(),this.isSkeletonRendered=!0),this.setDate(a),this.render&&this.render(),this.renderDates(),this.updateSize(),this.renderBusinessHours()},clearView:function(){this.unselect(),this.triggerUnrender(),this.unrenderBusinessHours(),this.unrenderDates(),this.destroy&&this.destroy()},renderSkeleton:function(){},unrenderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},renderBusinessHours:function(){},unrenderBusinessHours:function(){},triggerRender:function(){this.trigger("viewRender",this,this,this.el)},triggerUnrender:function(){this.trigger("viewDestroy",this,this,this.el)},bindGlobalHandlers:function(){a(document).on("mousedown",this.documentMousedownProxy)},unbindGlobalHandlers:function(){a(document).off("mousedown",this.documentMousedownProxy)},initThemingProps:function(){var a=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=a+"-widget-header",this.widgetContentClass=a+"-widget-content",this.highlightStateClass=a+"-state-highlight"},updateSize:function(a){var b;a&&(b=this.queryScroll()),this.updateHeight(a),this.updateWidth(a),a&&this.setScroll(b)},updateWidth:function(a){},updateHeight:function(a){var b=this.calendar;this.setHeight(b.getSuggestedViewHeight(),b.isHeightAuto())},setHeight:function(a,b){},computeScrollerHeight:function(a){var c,d,b=this.scrollerEl;return c=this.el.add(b),c.css({position:"relative",left:-1}),d=this.el.outerHeight()-b.height(),c.css({position:"",left:""}),a-d},computeInitialScroll:function(a){return 0},queryScroll:function(){if(this.scrollerEl)return this.scrollerEl.scrollTop()},setScroll:function(a){if(this.scrollerEl)return this.scrollerEl.scrollTop(a)},forceScroll:function(a){var b=this;this.setScroll(a),setTimeout(function(){b.setScroll(a)},0)},displayEvents:function(a){var b=this.queryScroll();this.clearEvents(),this.renderEvents(a),this.isEventsRendered=!0,this.setScroll(b),this.triggerEventRender()},clearEvents:function(){this.isEventsRendered&&(this.triggerEventUnrender(),this.destroyEvents&&this.destroyEvents(),this.unrenderEvents(),this.isEventsRendered=!1)},renderEvents:function(a){},unrenderEvents:function(){},triggerEventRender:function(){this.renderedEventSegEach(function(a){this.trigger("eventAfterRender",a.event,a.event,a.el)}),this.trigger("eventAfterAllRender")},triggerEventUnrender:function(){this.renderedEventSegEach(function(a){this.trigger("eventDestroy",a.event,a.event,a.el)})},resolveEventEl:function(b,c){var d=this.trigger("eventRender",b,b,c);return d===!1?c=null:d&&d!==!0&&(c=a(d)),c},showEvent:function(a){this.renderedEventSegEach(function(a){a.el.css("visibility","")},a)},hideEvent:function(a){this.renderedEventSegEach(function(a){a.el.css("visibility","hidden")},a)},renderedEventSegEach:function(a,b){var d,c=this.getEventSegs();for(d=0;d<c.length;d++)b&&c[d].event._id!==b._id||c[d].el&&a.call(this,c[d])},getEventSegs:function(){return[]},isEventDraggable:function(a){var b=a.source||{};return ca(a.startEditable,b.startEditable,this.opt("eventStartEditable"),a.editable,b.editable,this.opt("editable"))},reportEventDrop:function(a,b,c,d,e){var f=this.calendar,g=f.mutateEvent(a,b,c),h=function(){g.undo(),f.reportEventChange()};this.triggerEventDrop(a,g.dateDelta,h,d,e),f.reportEventChange()},triggerEventDrop:function(a,b,c,d,e){this.trigger("eventDrop",d[0],a,b,c,e,{})},reportExternalDrop:function(b,c,d,e,f){var h,i,g=b.eventProps;g&&(h=a.extend({},g,c),i=this.calendar.renderEvent(h,b.stick)[0]),this.triggerExternalDrop(i,c,d,e,f)},triggerExternalDrop:function(a,b,c,d,e){this.trigger("drop",c[0],b.start,d,e),a&&this.trigger("eventReceive",null,a)},renderDrag:function(a,b){},unrenderDrag:function(){},isEventResizableFromStart:function(a){return this.opt("eventResizableFromStart")&&this.isEventResizable(a)},isEventResizableFromEnd:function(a){return this.isEventResizable(a)},isEventResizable:function(a){var b=a.source||{};return ca(a.durationEditable,b.durationEditable,this.opt("eventDurationEditable"),a.editable,b.editable,this.opt("editable"))},reportEventResize:function(a,b,c,d,e){var f=this.calendar,g=f.mutateEvent(a,b,c),h=function(){g.undo(),f.reportEventChange()};this.triggerEventResize(a,g.durationDelta,h,d,e),f.reportEventChange()},triggerEventResize:function(a,b,c,d,e){this.trigger("eventResize",d[0],a,b,c,e,{})},select:function(a,b){this.unselect(b),this.renderSelection(a),this.reportSelection(a,b)},renderSelection:function(a){},reportSelection:function(a,b){this.isSelected=!0,this.triggerSelect(a,b)},triggerSelect:function(a,b){this.trigger("select",null,a.start,a.end,b)},unselect:function(a){this.isSelected&&(this.isSelected=!1,this.destroySelection&&this.destroySelection(),this.unrenderSelection(),this.trigger("unselect",null,a))},unrenderSelection:function(){},documentMousedown:function(b){var c;this.isSelected&&this.opt("unselectAuto")&&z(b)&&(c=this.opt("unselectCancel"),c&&a(b.target).closest(c).length||this.unselect(b))},triggerDayClick:function(a,b,c){this.trigger("dayClick",b,a.start,c)},initHiddenDays:function(){var e,b=this.opt("hiddenDays")||[],c=[],d=0;for(this.opt("weekends")===!1&&b.push(0,6),e=0;e<7;e++)(c[e]=a.inArray(e,b)!==-1)||d++;if(!d)throw"invalid hiddenDays";this.isHiddenDayHash=c},isHiddenDay:function(a){return b.isMoment(a)&&(a=a.day()),this.isHiddenDayHash[a]},skipHiddenDays:function(a,b,c){var d=a.clone();for(b=b||1;this.isHiddenDayHash[(d.day()+(c?b:0)+7)%7];)d.add(b,"days");return d},computeDayRange:function(a){var e,b=a.start.clone().stripTime(),c=a.end,d=null;return c&&(d=c.clone().stripTime(),e=+c.time(),e&&e>=this.nextDayThreshold&&d.add(1,"days")),(!c||d<=b)&&(d=b.clone().add(1,"days")),{start:b,end:d}},isMultiDayEvent:function(a){var b=this.computeDayRange(a);return b.end.diff(b.start,"days")>1}}),hb=c.Calendar=Ia.extend({dirDefaults:null,langDefaults:null,overrides:null,options:null,viewSpecCache:null,view:null,header:null,loadingLevel:0,constructor:ib,initialize:function(){},initOptions:function(a){var b,c,d,e;a=g(a),b=a.lang,c=jb[b],c||(b=hb.defaults.lang,c=jb[b]||{}),d=ca(a.isRTL,c.isRTL,hb.defaults.isRTL),e=d?hb.rtlDefaults:{},this.dirDefaults=e,this.langDefaults=c,this.overrides=a,this.options=f([hb.defaults,e,c,a]),nb(this.options),this.viewSpecCache={}},getViewSpec:function(a){var b=this.viewSpecCache;return b[a]||(b[a]=this.buildViewSpec(a))},getUnitViewSpec:function(b){var d,e,f;if(a.inArray(b,K)!=-1)for(d=this.header.getViewsWithButtons(),a.each(c.views,function(a){d.push(a)}),e=0;e<d.length;e++)if(f=this.getViewSpec(d[e]),f&&f.singleUnit==b)return f},buildViewSpec:function(a){for(var j,k,l,m,c=this.overrides.views||{},e=[],g=[],h=[],i=a;i;)j=d[i],k=c[i],i=null,"function"==typeof j&&(j={class:j}),j&&(e.unshift(j),g.unshift(j.defaults||{}),l=l||j.duration,i=i||j.type),k&&(h.unshift(k),l=l||k.duration,i=i||k.type);return j=X(e),j.type=a,!!j.class&&(l&&(l=b.duration(l),l.valueOf()&&(j.duration=l,m=O(l),1===l.as(m)&&(j.singleUnit=m,h.unshift(c[m]||{})))),j.defaults=f(g),j.overrides=f(h),this.buildViewSpecOptions(j),this.buildViewSpecButtonText(j,a),j)},buildViewSpecOptions:function(a){a.options=f([hb.defaults,a.defaults,this.dirDefaults,this.langDefaults,this.overrides,a.overrides]),nb(a.options)},buildViewSpecButtonText:function(a,b){function c(c){var d=c.buttonText||{};return d[b]||(a.singleUnit?d[a.singleUnit]:null)}a.buttonTextOverride=c(this.overrides)||a.overrides.buttonText,a.buttonTextDefault=c(this.langDefaults)||c(this.dirDefaults)||a.defaults.buttonText||c(hb.defaults)||(a.duration?this.humanizeDuration(a.duration):null)||b},instantiateView:function(a){var b=this.getViewSpec(a);return new b.class(this,a,b.options,b.duration)},isValidViewType:function(a){return Boolean(this.getViewSpec(a))},pushLoading:function(){this.loadingLevel++||this.trigger("loading",null,!0,this.view)},popLoading:function(){--this.loadingLevel||this.trigger("loading",null,!1,this.view)},buildSelectRange:function(a,b){return a=this.moment(a),b=b?this.moment(b):a.hasTime()?a.clone().add(this.defaultTimedEventDuration):a.clone().add(this.defaultAllDayEventDuration),{start:a,end:b}}});hb.mixin(Ja),hb.defaults={titleRangeSeparator:"  ",monthYearFormat:"MMMM YYYY",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",scrollTime:"06:00:00",lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,isRTL:!1,buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:"*",eventOrder:"title",eventLimit:!1,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:!0,windowResizeDelay:200},hb.englishDefaults={dayPopoverFormat:"dddd, MMMM D"},hb.rtlDefaults={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}};var jb=c.langs={};c.datepickerLang=function(b,c,d){var e=jb[b]||(jb[b]={});e.isRTL=d.isRTL,e.weekNumberTitle=d.weekHeader,a.each(kb,function(a,b){e[a]=b(d)}),a.datepicker&&(a.datepicker.regional[c]=a.datepicker.regional[b]=d,a.datepicker.regional.en=a.datepicker.regional[""],a.datepicker.setDefaults(d))},c.lang=function(b,c){var d,e;d=jb[b]||(jb[b]={}),c&&(d=jb[b]=f([d,c])),e=ob(b),a.each(lb,function(a,b){null==d[a]&&(d[a]=b(e,d))}),hb.defaults.lang=b};var kb={buttonText:function(a){return{prev:ea(a.prevText),next:ea(a.nextText),today:ea(a.currentText)}},monthYearFormat:function(a){return a.showMonthAfterYear?"YYYY["+a.yearSuffix+"] MMMM":"MMMM YYYY["+a.yearSuffix+"]"}},lb={dayOfMonthFormat:function(a,b){var c=a.longDateFormat("l");return c=c.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,""),b.isRTL?c+=" ddd":c="ddd "+c,c},mediumTimeFormat:function(a){return a.longDateFormat("LT").replace(/\s*a$/i,"a")},smallTimeFormat:function(a){return a.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")},extraSmallTimeFormat:function(a){return a.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")},hourFormat:function(a){return a.longDateFormat("LT").replace(":mm","").replace(/(\Wmm)$/,"").replace(/\s*a$/i,"a")},noMeridiemTimeFormat:function(a){return a.longDateFormat("LT").replace(/\s*a$/i,"")}},mb={smallDayDateFormat:function(a){return a.isRTL?"D dd":"dd D"},weekFormat:function(a){return a.isRTL?"w[ "+a.weekNumberTitle+"]":"["+a.weekNumberTitle+" ]w"},smallWeekFormat:function(a){return a.isRTL?"w["+a.weekNumberTitle+"]":"["+a.weekNumberTitle+"]w"}};c.lang("en",hb.englishDefaults),c.sourceNormalizers=[],c.sourceFetchers=[];var qb={dataType:"json",cache:!1},rb=1;hb.prototype.getPeerEvents=function(a,b){var e,f,c=this.getEventCache(),d=[];for(e=0;e<c.length;e++)f=c[e],a&&a._id===f._id||d.push(f);return d};var ub=gb.extend({dayGrid:null,dayNumbersVisible:!1,weekNumbersVisible:!1,weekNumberWidth:null,headRowEl:null,initialize:function(){this.dayGrid=new Za(this),this.coordMap=this.dayGrid.coordMap},setRange:function(a){gb.prototype.setRange.call(this,a),this.dayGrid.breakOnWeeks=/year|month|week/.test(this.intervalUnit),this.dayGrid.setRange(a)},computeRange:function(a){var b=gb.prototype.computeRange.call(this,a);return/year|month/.test(b.intervalUnit)&&(b.start.startOf("week"),b.start=this.skipHiddenDays(b.start),b.end.weekday()&&(b.end.add(1,"week").startOf("week"),b.end=this.skipHiddenDays(b.end,-1,!0))),b},renderDates:function(){this.dayNumbersVisible=this.dayGrid.rowCnt>1,this.weekNumbersVisible=this.opt("weekNumbers"),this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible,this.el.addClass("fc-basic-view").html(this.renderHtml()),this.headRowEl=this.el.find("thead .fc-row"),this.scrollerEl=this.el.find(".fc-day-grid-container"),this.dayGrid.coordMap.containerEl=this.scrollerEl,this.dayGrid.setElement(this.el.find(".fc-day-grid")),this.dayGrid.renderDates(this.hasRigidRows())},unrenderDates:function(){this.dayGrid.unrenderDates(),this.dayGrid.removeElement()},renderBusinessHours:function(){this.dayGrid.renderBusinessHours()},renderHtml:function(){return'<table><thead class="fc-head"><tr><td class="'+this.widgetHeaderClass+'">'+this.dayGrid.headHtml()+'</td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'"><div class="fc-day-grid-container"><div class="fc-day-grid"/></div></td></tr></tbody></table>'},headIntroHtml:function(){if(this.weekNumbersVisible)return'<th class="fc-week-number '+this.widgetHeaderClass+'" '+this.weekNumberStyleAttr()+"><span>"+da(this.opt("weekNumberTitle"))+"</span></th>"},numberIntroHtml:function(a){if(this.weekNumbersVisible)return'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"><span>"+this.dayGrid.getCell(a,0).start.format("w")+"</span></td>"},dayIntroHtml:function(){if(this.weekNumbersVisible)return'<td class="fc-week-number '+this.widgetContentClass+'" '+this.weekNumberStyleAttr()+"></td>"},introHtml:function(){if(this.weekNumbersVisible)return'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"></td>"},numberCellHtml:function(a){var c,b=a.start;return this.dayNumbersVisible?(c=this.dayGrid.getDayClasses(b),c.unshift("fc-day-number"),'<td class="'+c.join(" ")+'" data-date="'+b.format()+'">'+b.date()+"</td>"):"<td/>"},weekNumberStyleAttr:function(){return null!==this.weekNumberWidth?'style="width:'+this.weekNumberWidth+'px"':""},hasRigidRows:function(){var a=this.opt("eventLimit");return a&&"number"!=typeof a},updateWidth:function(){this.weekNumbersVisible&&(this.weekNumberWidth=n(this.el.find(".fc-week-number")))},setHeight:function(a,b){var d,c=this.opt("eventLimit");p(this.scrollerEl),i(this.headRowEl),this.dayGrid.removeSegPopover(),c&&"number"==typeof c&&this.dayGrid.limitRows(c),d=this.computeScrollerHeight(a),this.setGridHeight(d,b),c&&"number"!=typeof c&&this.dayGrid.limitRows(c),!b&&o(this.scrollerEl,d)&&(h(this.headRowEl,u(this.scrollerEl)),d=this.computeScrollerHeight(a),this.scrollerEl.height(d))},setGridHeight:function(a,b){b?m(this.dayGrid.rowEls):l(this.dayGrid.rowEls,a,!0)},renderEvents:function(a){this.dayGrid.renderEvents(a),this.updateHeight()},getEventSegs:function(){return this.dayGrid.getEventSegs()},unrenderEvents:function(){this.dayGrid.unrenderEvents()},renderDrag:function(a,b){return this.dayGrid.renderDrag(a,b)},unrenderDrag:function(){this.dayGrid.unrenderDrag()},renderSelection:function(a){this.dayGrid.renderSelection(a)},unrenderSelection:function(){this.dayGrid.unrenderSelection()}}),vb=ub.extend({computeRange:function(a){var c,b=ub.prototype.computeRange.call(this,a);return this.isFixedWeeks()&&(c=Math.ceil(b.end.diff(b.start,"weeks",!0)),b.end.add(6-c,"weeks")),b},setGridHeight:function(a,b){b=b||"variable"===this.opt("weekMode"),b&&(a*=this.rowCnt/6),l(this.dayGrid.rowEls,a,!b)},isFixedWeeks:function(){var a=this.opt("weekMode");return a?"fixed"===a:this.opt("fixedWeekCount")}});d.basic={class:ub},d.basicDay={type:"basic",duration:{days:1}},d.basicWeek={type:"basic",duration:{weeks:1}},d.month={class:vb,duration:{months:1},defaults:{fixedWeekCount:!0}};var wb=gb.extend({timeGrid:null,dayGrid:null,axisWidth:null,noScrollRowEls:null,bottomRuleEl:null,bottomRuleHeight:null,initialize:function(){this.timeGrid=new ab(this),this.opt("allDaySlot")?(this.dayGrid=new Za(this),this.coordMap=new Ma([this.dayGrid.coordMap,this.timeGrid.coordMap])):this.coordMap=this.timeGrid.coordMap},setRange:function(a){gb.prototype.setRange.call(this,a),this.timeGrid.setRange(a),this.dayGrid&&this.dayGrid.setRange(a)},renderDates:function(){this.el.addClass("fc-agenda-view").html(this.renderHtml()),this.scrollerEl=this.el.find(".fc-time-grid-container"),this.timeGrid.coordMap.containerEl=this.scrollerEl,this.timeGrid.setElement(this.el.find(".fc-time-grid")),this.timeGrid.renderDates(),this.bottomRuleEl=a('<hr class="fc-divider '+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el),this.dayGrid&&(this.dayGrid.setElement(this.el.find(".fc-day-grid")),this.dayGrid.renderDates(),this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()),this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)")},unrenderDates:function(){this.timeGrid.unrenderDates(),this.timeGrid.removeElement(),this.dayGrid&&(this.dayGrid.unrenderDates(),this.dayGrid.removeElement())},renderBusinessHours:function(){this.timeGrid.renderBusinessHours(),this.dayGrid&&this.dayGrid.renderBusinessHours()},renderHtml:function(){return'<table><thead class="fc-head"><tr><td class="'+this.widgetHeaderClass+'">'+this.timeGrid.headHtml()+'</td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="fc-divider '+this.widgetHeaderClass+'"/>':"")+'<div class="fc-time-grid-container"><div class="fc-time-grid"/></div></td></tr></tbody></table>'},headIntroHtml:function(){var a,b;return this.opt("weekNumbers")?(a=this.timeGrid.getCell(0).start,b=a.format(this.opt("smallWeekFormat")),'<th class="fc-axis fc-week-number '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"><span>"+da(b)+"</span></th>"):'<th class="fc-axis '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"></th>"},dayIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"><span>"+(this.opt("allDayHtml")||da(this.opt("allDayText")))+"</span></td>"},slotBgIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"></td>"},introHtml:function(){return'<td class="fc-axis" '+this.axisStyleAttr()+"></td>"},axisStyleAttr:function(){return null!==this.axisWidth?'style="width:'+this.axisWidth+'px"':""},updateSize:function(a){this.timeGrid.updateSize(a),gb.prototype.updateSize.call(this,a)},updateWidth:function(){this.axisWidth=n(this.el.find(".fc-axis"))},setHeight:function(a,b){var c,d;null===this.bottomRuleHeight&&(this.bottomRuleHeight=this.bottomRuleEl.outerHeight()),this.bottomRuleEl.hide(),this.scrollerEl.css("overflow",""),p(this.scrollerEl),i(this.noScrollRowEls),this.dayGrid&&(this.dayGrid.removeSegPopover(),c=this.opt("eventLimit"),c&&"number"!=typeof c&&(c=xb),c&&this.dayGrid.limitRows(c)),b||(d=this.computeScrollerHeight(a),o(this.scrollerEl,d)?(h(this.noScrollRowEls,u(this.scrollerEl)),d=this.computeScrollerHeight(a),this.scrollerEl.height(d)):(this.scrollerEl.height(d).css("overflow","hidden"),this.bottomRuleEl.show()))},computeInitialScroll:function(){var a=b.duration(this.opt("scrollTime")),c=this.timeGrid.computeTimeTop(a);return c=Math.ceil(c),c&&c++,c},renderEvents:function(a){var e,f,b=[],c=[],d=[];for(f=0;f<a.length;f++)a[f].allDay?b.push(a[f]):c.push(a[f]);e=this.timeGrid.renderEvents(c),this.dayGrid&&(d=this.dayGrid.renderEvents(b)),this.updateHeight()},getEventSegs:function(){return this.timeGrid.getEventSegs().concat(this.dayGrid?this.dayGrid.getEventSegs():[])},unrenderEvents:function(){this.timeGrid.unrenderEvents(),this.dayGrid&&this.dayGrid.unrenderEvents()},renderDrag:function(a,b){return a.start.hasTime()?this.timeGrid.renderDrag(a,b):this.dayGrid?this.dayGrid.renderDrag(a,b):void 0},unrenderDrag:function(){this.timeGrid.unrenderDrag(),this.dayGrid&&this.dayGrid.unrenderDrag()},renderSelection:function(a){a.start.hasTime()||a.end.hasTime()?this.timeGrid.renderSelection(a):this.dayGrid&&this.dayGrid.renderSelection(a)},unrenderSelection:function(){this.timeGrid.unrenderSelection(),this.dayGrid&&this.dayGrid.unrenderSelection()}}),xb=5,yb=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];return d.agenda={class:wb,defaults:{allDaySlot:!0,allDayText:"all-day",slotDuration:"00:30:00",minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!0}},d.agendaDay={type:"agenda",duration:{days:1}},d.agendaWeek={type:"agenda",duration:{weeks:1}},c});