!function(a,b,c,d){"use strict";function f(b,c){this.options=a.extend(!0,{},e,c),this.main=a(b),this.nav=this.main.children("ul"),this.steps=a("li > a",this.nav),this.container=this.main.children("div"),this.pages=this.container.children("div"),this.current_index=null,this.init()}var e={themeName:"default",responsivethreshold:601,isresponsive:!0,selected:0,keyNavigation:!0,autoAdjustHeight:!0,cycleSteps:!1,backButtonSupport:!0,useURLhash:!0,showStepURLhash:!0,lang:{next:"Next",previous:"Previous",finish:"Finish"},toolbarSettings:{toolbarPosition:"bottom",toolbarButtonPosition:"right",showNextButton:!0,showPreviousButton:!0,showFinishButton:!0,toolbarExtraButtons:[]},anchorSettings:{anchorClickable:!0,enableAllAnchors:!1,markDoneStep:!0,markAllPreviousStepsAsDone:!0,removeDoneStepOnNavigateBack:!1,enableAnchorOnDoneStep:!0},nextColor:"light-blue white-text",prevColor:"light-blue white-text",finishColor:"red white-text",contentURL:null,contentCache:!0,ajaxSettings:{},disabledSteps:[],errorSteps:[],hiddenSteps:[],theme:"default",transitionEffect:"none",transitionSpeed:"400"};a.extend(f.prototype,{init:function(){this._setElements(),this._setToolbar(),this._setEvents();var c=this.options.selected;if(this.options.useURLhash){var d=b.location.hash;if(d&&d.length>0){var e=a("a[href*='"+d+"']",this.nav);if(e.length>0){var f=this.steps.index(e);c=f>=0?f:c}}}c>0&&this.options.anchorSettings.markDoneStep&&this.options.anchorSettings.markAllPreviousStepsAsDone&&this.steps.eq(c).parent("li").prevAll().addClass("done done"+this.options.themeName),this._showStep(c)},_setElements:function(){this.main.addClass("sw-main sw-main"+this.options.themeName+" sw-theme-"+this.options.theme+" sw-theme-"+this.options.theme+this.options.themeName),this.nav.addClass("nav nav-tabs step-anchor step-anchor"+this.options.themeName),this.options.anchorSettings.enableAllAnchors!==!1&&this.options.anchorSettings.anchorClickable!==!1&&this.steps.parent("li").addClass("clickable"),this.container.addClass("sw-container tab-content"),this.pages.addClass("step-content");var b=this;return this.options.disabledSteps&&this.options.disabledSteps.length>0&&a.each(this.options.disabledSteps,function(a,c){b.steps.eq(c).parent("li").addClass("disabled disabled"+b.options.themeName)}),this.options.errorSteps&&this.options.errorSteps.length>0&&a.each(this.options.errorSteps,function(a,c){b.steps.eq(c).parent("li").addClass("danger danger"+b.options.themeName)}),this.options.hiddenSteps&&this.options.hiddenSteps.length>0&&a.each(this.options.hiddenSteps,function(a,c){b.steps.eq(c).parent("li").addClass("hidden")}),!0},_setToolbar:function(){if("none"===this.options.toolbarSettings.toolbarPosition)return!0;var b=this.options.toolbarSettings.showNextButton!==!1?a("<button></button>").text(this.options.lang.next).addClass("btn btn-default sw-btn-next "+this.options.nextColor).attr("type","button"):a("<button></button>").text(this.options.lang.next).addClass("btn btn-default sw-btn-next hide "+this.options.nextColor).attr("type","button"),c=this.options.toolbarSettings.showPreviousButton!==!1?a("<button></button>").text(this.options.lang.previous).addClass("btn btn-default sw-btn-prev "+this.options.prevColor).attr("type","button"):a("<button></button>").text(this.options.lang.previous).addClass("btn btn-default sw-btn-prev hide "+this.options.prevColor).attr("type","button"),d=a("<div></div>").addClass("btn-group navbar-btn sw-btn-group pull-"+this.options.toolbarSettings.toolbarButtonPosition).attr("role","group").append(c,b),e=null;switch(this.options.toolbarSettings.toolbarExtraButtons&&this.options.toolbarSettings.toolbarExtraButtons.length>0&&(e=a("<div></div>").addClass("btn-group navbar-btn sw-btn-group-extra pull-"+this.options.toolbarSettings.toolbarButtonPosition).attr("role","group"),a.each(this.options.toolbarSettings.toolbarExtraButtons,function(a,b){e.append(b.clone(!0))})),this.options.toolbarSettings.toolbarPosition){case"top":var f=a("<nav></nav>").addClass("navbar btn-toolbar sw-toolbar sw-toolbar-top");f.append(d),"left"===this.options.toolbarSettings.toolbarButtonPosition?f.append(e):f.prepend(e),this.container.before(f);break;case"bottom":var g=a("<nav></nav>").addClass("navbar btn-toolbar sw-toolbar sw-toolbar-bottom");g.append(d),"left"===this.options.toolbarSettings.toolbarButtonPosition?g.append(e):g.prepend(e),this.container.after(g);break;case"both":var f=a("<nav></nav>").addClass("navbar btn-toolbar sw-toolbar sw-toolbar-top");f.append(d),"left"===this.options.toolbarSettings.toolbarButtonPosition?f.append(e):f.prepend(e),this.container.before(f);var g=a("<nav></nav>").addClass("navbar btn-toolbar sw-toolbar sw-toolbar-bottom");g.append(d.clone(!0)),"left"===this.options.toolbarSettings.toolbarButtonPosition?g.append(e.clone(!0)):g.prepend(e.clone(!0)),this.container.after(g);break;default:var g=a("<nav></nav>").addClass("navbar btn-toolbar sw-toolbar sw-toolbar-bottom");g.append(d),"left"===this.options.toolbarSettings.toolbarButtonPosition?g.append(e):g.prepend(e),this.container.after(g)}return!0},_setEvents:function(){var d=this;return a(this.steps).on("click",function(a){if(a.preventDefault(),d.options.anchorSettings.anchorClickable===!1)return!0;var b=d.steps.index(this);return!(d.options.anchorSettings.enableAnchorOnDoneStep!==!1||!d.steps.eq(b).parent("li").hasClass("done"))||void(b!==d.current_index&&(d.options.anchorSettings.enableAllAnchors!==!1&&d.options.anchorSettings.anchorClickable!==!1?d._showStep(b):d.steps.eq(b).parent("li").hasClass("done")&&d._showStep(b)))}),a(".sw-btn-next",this.main).on("click",function(b){if(a(this).html()==d.options.lang.next)b.preventDefault(),d.steps.index(this)!==d.current_index&&d._showNext();else{b.preventDefault();var c=d.steps.eq(d.current_index),e=c.data("content-url")&&c.data("content-url").length>0?c.data("content-url"):d.options.contentURL,f=c.data("evname");b4j_raiseEvent("page_parseevent",{eventname:f+"_navigationfinished",eventparams:"returnname",returnname:e})}}),a(".sw-btn-prev",this.main).on("click",function(a){a.preventDefault(),d.steps.index(this)!==d.current_index&&d._showPrevious()}),this.options.keyNavigation&&a(c).keyup(function(a){d._keyNav(a)}),this.options.backButtonSupport&&a(b).on("hashchange",function(c){if(!d.options.useURLhash)return!0;if(b.location.hash){var e=a("a[href*='"+b.location.hash+"']",d.nav);e&&e.length>0&&(c.preventDefault(),d._showStep(d.steps.index(e)))}}),!0},_showNext:function(){for(var a=this.current_index+1,b=a;b<this.steps.length;b++)if(!this.steps.eq(b).parent("li").hasClass("hidden")){a=b;break}if(this.steps.length<=a){if(!this.options.cycleSteps)return!1;a=0}return this._showStep(a),!0},_showPrevious:function(){for(var a=this.current_index-1,b=a;b>=0;b--)if(!this.steps.eq(b).parent("li").hasClass("hidden")){a=b;break}if(0>a){if(!this.options.cycleSteps)return!1;a=this.steps.length-1}return this._showStep(a),!0},_showStep:function(a){return!!this.steps.eq(a)&&(this._loadStepContent(a),!0)},_showABMStep:function(a){var c=this.steps.eq(a);if(c.parent("li").removeClass("loading loading"+this.options.themeName),!this.options.isresponsive&&b.innerWidth<=this.options.responsivethreshold){for(var d=0;d<a;d++){var e=this.steps.eq(d);e.find("div.abmalt").removeClass("hide"),e.find("div.abmreal").addClass("hide"),e.parent("li").find("div.sw-block-first").removeClass("hide"),e.parent("li").find("div.sw-block").removeClass("hide")}for(var d=a;d<this.steps.length;d++){var e=this.steps.eq(d);e.find("div.abmalt").addClass("hide"),e.find("div.abmreal").removeClass("hide"),e.parent("li").find("div.sw-block-first").addClass("hide"),e.parent("li").find("div.sw-block").addClass("hide")}for(var d=a+1;d<this.steps.length;d++){var e=this.steps.eq(d);e.find("div.abmalt").removeClass("hide"),e.find("div.abmreal").addClass("hide"),e.parent("li").find("div.sw-block-first").removeClass("hide"),e.parent("li").find("div.sw-block").removeClass("hide")}}return this._transitPage(a),!0},_cancelABM:function(a){var b=this.steps.eq(a);return b.parent("li").removeClass("loading loading"+this.options.themeName),!0},_setTextABM:function(a,b,c){var d=this.steps.eq(a);d.html('<div class="abmalt hide">&nbsp;<br><small>&nbsp;</small></div><div class="abmreal">'+b+"<br><small>"+c+"</small></div>")},_loadStepContent:function(a){var c=this.steps.eq(this.current_index),d="",e=this.steps.eq(a),f="",g=e.data("content-url")&&e.data("content-url").length>0?e.data("content-url"):this.options.contentURL,h=e.data("evname");return c&&(f=c.data("content-url")&&c.data("content-url").length>0?c.data("content-url"):""),null!==this.current_index&&this.current_index!==a&&(d=this.current_index<a?"forward":"backward"),(null===this.current_index||this._triggerEvent("leaveStep",[c,this.current_index,d])!==!1)&&(e.parent("li").addClass("loading loading"+this.options.themeName),b4j_raiseEvent("page_parseevent",{eventname:h+"_navigationtostep",eventparams:"fromreturnname,toreturnname",fromreturnname:f,toreturnname:g}),!0)},_transitPage:function(b){var c=this,d=this.steps.eq(this.current_index),e=d.length>0?a(d.attr("href"),this.main):null,f=this.steps.eq(b),g=f.length>0?a(f.attr("href"),this.main):null,h="";null!==this.current_index&&this.current_index!==b&&(h=this.current_index<b?"forward":"backward");var i="middle";return 0===b?i="first":b===this.steps.length-1&&(i="final"),this.options.transitionEffect=this.options.transitionEffect.toLowerCase(),this.pages.finish(),"slide"===this.options.transitionEffect?e&&e.length>0?e.slideUp("fast",this.options.transitionEasing,function(){g.slideDown(c.options.transitionSpeed,c.options.transitionEasing)}):g.slideDown(this.options.transitionSpeed,this.options.transitionEasing):"fade"===this.options.transitionEffect?e&&e.length>0?e.fadeOut("fast",this.options.transitionEasing,function(){g.fadeIn("fast",c.options.transitionEasing,function(){a(this).show()})}):g.fadeIn(this.options.transitionSpeed,this.options.transitionEasing,function(){a(this).show()}):(e&&e.length>0&&e.hide(),g.show()),this._setURLHash(f.attr("href")),this._setAnchor(b),this._setButtons(b),this._fixHeight(b),this.current_index=b,this._triggerEvent("showStep",[f,this.current_index,h,i]),resizecells(),!0},_setAnchor:function(a){return this.steps.eq(this.current_index).parent("li").removeClass("active danger loading loading"+this.options.themeName+" active"+this.options.themeName+" danger"+this.options.themeName),this.options.anchorSettings.markDoneStep!==!1&&null!==this.current_index&&(this.steps.eq(this.current_index).parent("li").addClass("done done"+this.options.themeName),this.options.anchorSettings.removeDoneStepOnNavigateBack!==!1&&this.steps.eq(a).parent("li").nextAll().removeClass("done done"+this.options.themeName)),this.steps.eq(a).parent("li").removeClass("done danger loading loading"+this.options.themeName+" done"+this.options.themeName+" danger"+this.options.themeName).addClass("active active"+this.options.themeName),!0},_setButtons:function(b){if(!this.options.cycleSteps){0>=b?a(".sw-btn-prev",this.main).addClass("disabled disabled"+this.options.themeName):a(".sw-btn-prev",this.main).removeClass("disabled disabled"+this.options.themeName);var c=a(".sw-btn-next",this.main);this.steps.length-1<=b?(c.html(this.options.lang.finish),c.removeClass(),this.options.toolbarSettings.showFinishButton!==!1?c.addClass("btn btn-default sw-btn-next "+this.options.finishColor):c.addClass("btn btn-default sw-btn-next hide "+this.options.finishColor)):(c.html(this.options.lang.next),c.removeClass(),this.options.toolbarSettings.showNextButton!==!1?c.addClass("btn btn-default sw-btn-next "+this.options.nextColor):c.addClass("btn btn-default sw-btn-next hide "+this.options.nextColor))}return!0},_keyNav:function(a){var b=this;switch(a.which){case 37:b._showPrevious(),a.preventDefault();break;case 39:b._showNext(),a.preventDefault();break;default:return}},_fixHeight:function(b){if(this.options.autoAdjustHeight){var c=this.steps.eq(b).length>0?a(this.steps.eq(b).attr("href"),this.main):null;this.container.finish().animate({height:c.outerHeight()},this.options.transitionSpeed,function(){})}return!0},_triggerEvent:function(b,c){var d=a.Event(b);return this.main.trigger(d,c),!d.isDefaultPrevented()&&d.result},_setURLHash:function(a){this.options.showStepURLhash&&b.location.hash!==a&&(b.location.hash=a)},theme:function(a){return this.options.theme!==a&&(this.main.removeClass("sw-theme-"+this.options.theme+" sw-theme-"+this.options.theme+this.options.themeName),this.options.theme=a,this.main.addClass("sw-theme-"+this.options.theme+" sw-theme-"+this.options.theme+this.options.themeName),void this._triggerEvent("themeChanged",[this.options.theme]))},next:function(){this._showNext()},prev:function(){this._showPrevious()},showStep:function(a){this._showABMStep(a)},cancel:function(a){this._cancelABM(a)},setTexts:function(a,b,c){this._setTextABM(a,b,c)},reset:function(){return this._triggerEvent("beginReset")!==!1&&(this.container.stop(!0),this.pages.stop(!0),this.pages.hide(),this.current_index=null,this._setURLHash(this.steps.eq(this.options.selected).attr("href")),a(".sw-toolbar",this.main).remove(),this.steps.removeClass(),this.steps.parents("li").removeClass(),this.steps.data("has-content",!1),this.init(),void this._triggerEvent("endReset"))},stepState:function(b,c){b=a.isArray(b)?b:[b];var e=a.grep(this.steps,function(c,d){return a.inArray(d,b)!==-1});if(e&&e.length>0)switch(a(e).parents("li").removeClass(),""+c){case"done":a(e).parents("li").addClass("done done"+this.options.themeName);break;case"active":a(e).parents("li").addClass("active active"+this.options.themeName);break;case"hidden hide":a(e).parents("li").addClass("hidden"),a(e).parents("li").addClass("hide");break;case"disabled":a(e).parents("li").addClass("disabled disabled"+this.options.themeName);break;case"error":a(e).parents("li").addClass("danger danger"+this.options.themeName)}}}),a.fn.smartWizard=function(b){var e,c=arguments;return b===d||"object"==typeof b?this.each(function(){a.data(this,"smartWizard")||a.data(this,"smartWizard",new f(this,b))}):"string"==typeof b&&"_"!==b[0]&&"init"!==b?(e=a.data(this[0],"smartWizard"),"destroy"===b&&a.data(this,"smartWizard",null),e instanceof f&&"function"==typeof e[b]?e[b].apply(e,Array.prototype.slice.call(c,1)):this):void 0}}(jQuery,window,document);