(function(){var e,f=function(c,a){function b(){this.constructor=c}for(var e in a)n.call(a,e)&&(c[e]=a[e]);return b.prototype=a.prototype,c.prototype=new b,c.__super__=a.prototype,c},n={}.hasOwnProperty,g=[].slice;(e=function(b){return"object"==typeof exports&&"object"==typeof module?b(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],b):b(jQuery)})(function($){var a,d,b,c,j;return a=function(b){function e(c,a){e.__super__.constructor.call(this,c,a)}var p;return f(e,b),p=function(m,a,b,c,d){var e,n,o,p,q,r,s;for(q=[],e=!1,p=0,r=c.length;p<r;p++)n=c[p],q.push(null==(s=m[n])?"null":s),o=q.join(String.fromCharCode(0)),a[o]||(a[o]=d(q.slice()),e=!0),a[o].push(m);return e&&b.push(q),q},e.prototype.processRecord=function(q){var a,r,s,t,u,c,v,w,x,y,z,A,B;if(B=[],a=[],this.allTotal.push(q),B=p(q,this.rowTotals,this.rowKeys,this.rowAttrs,function(c){return function(a){return c.aggregator(c,a,[])}}(this)),a=p(q,this.colTotals,this.colKeys,this.colAttrs,function(c){return function(a){return c.aggregator(c,[],a)}}(this)),x=B.length-1,y=a.length-1,!(0>x||0>y)){for(A=[],c=w=0,z=x;0<=z?w<=z:w>=z;c=0<=z?++w:--w)s=B.slice(0,c+1),u=s.join(String.fromCharCode(0)),this.tree[u]||(this.tree[u]={}),A.push(function(){var b,d,e;for(e=[],v=b=0,d=y;0<=d?b<=d:b>=d;v=0<=d?++b:--b)r=a.slice(0,v+1),t=r.join(String.fromCharCode(0)),this.tree[u][t]||(this.tree[u][t]=this.aggregator(this,s,r)),e.push(this.tree[u][t].push(q));return e}.call(this));return A}},e}($.pivotUtilities.PivotData),$.pivotUtilities.SubtotalPivotData=a,d=function(_,aa){var ba,ca,da,ea,fa,b,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,a,c,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia,Ja,Ka,La,Ma,Na,Oa,Pa,Qa,Ra,Sa,Ta;return ya={table:{clickCallback:null},localeStrings:{totals:"Totals"}},aa=$.extend(!0,{},ya,aa),da=null==aa.arrowCollapsed?aa.arrowCollapsed="\u25B6":aa.arrowCollapsed,ea=null==aa.arrowExpanded?aa.arrowExpanded="\u25E2":aa.arrowExpanded,ra="expanded",qa="collapsed",a=_.colAttrs,La=_.rowAttrs,Ma=_.getRowKeys(),c=_.getColKeys(),Ta=_.tree,Na=_.rowTotals,sa=_.colTotals,ca=_.allTotal,Ga=function(d,a){var b;return b=new RegExp("(?:^|\\s)"+a+"(?!\\S)","g"),d.className.match(b)},Ja=function(d,a){var b;return b=new RegExp("(?:^|\\s)"+a+"(?!\\S)","g"),d.className=d.className.replace(b,"")},ba=function(c,a){if(!Ga(c,a))return c.className+=" "+a},Ka=function(d,a,b){return Ja(d,a),ba(d,b)},Fa=function(b,c,d){var e,f,o,p,q,r,s;if(aa.table||aa.table.eventHandlers){for(f in o={},s=aa.table.eventHandlers,s)if(n.call(s,f)){for(r in q=s[f],p={},a)n.call(a,r)&&(e=a[r],null!=d[r]&&(p[e]=d[r]));for(r in La)n.call(La,r)&&(e=La[r],null!=c[r]&&(p[e]=c[r]));o[f]=function(a){return q(a,b,p,_)}}return o}},xa=function(c,a,b,d,e){var f,l,m,o,p;if(o=document.createElement(c),null!=a&&(o.className=a),null!=b&&(o.textContent=b),null!=d)for(f in d)n.call(d,f)&&(p=d[f],o.setAttribute(f,p));if(null!=e)for(l in e)n.call(e,l)&&(m=e[l],o.addEventListener(l,m));return o},Ia=function(q,a){var b,r,s,t,u,v,w,x,y,z,A,B,C,D;for(r=[],v=q.length-1,u=q[0].length-1,z=[],C=xa("th",a,q[0][0]),t=[],t.push(q[0][0]),x=0,w={node:x,row:0,col:0,th:C,parent:null,children:[],descendants:u,leaves:1,key:t,flatKey:t.join(String.fromCharCode(0))},r.push(w),z[0]=w,b=1;b<=u;)C=xa("th",a,q[0][b]),t=t.slice(),t.push(q[0][b]),++x,w={node:x,row:0,col:b,th:C,parent:z[b-1],children:[],descendants:u-b,leaves:1,key:t,flatKey:t.join(String.fromCharCode(0))},z[b]=w,z[b-1].children.push(w),++b;for(z[u].leaves=0,y=1;y<=v;){for(B=!0,t=[],b=0;b<=u;)if(t=t.slice(),t.push(q[y][b]),q[y][b]===q[z[b].row][b]&&b!==u&&B)B=!0,++b;else{if(C=xa("th",a,q[y][b]),++x,w={node:x,row:y,col:b,th:C,parent:null,children:[],descendants:0,leaves:1,key:t,flatKey:t.join(String.fromCharCode(0))},0===b)r.push(w);else for(w.parent=z[b-1],z[b-1].children.push(w),D=0;D<=b-1;)++z[D].descendants,++D;z[b]=w,B=!1,++b}for(b=s=0,A=u;0<=A?s<=A:s>=A;b=0<=A?++s:--s)++z[b].leaves;z[u].leaves=0,++y}return r},fa=function(h,a,b,c,d,e){var f,l,m,n;return l=c[e],m=l,f="pvtAxisLabel",e<c.length-1&&(f+=" expanded",m=" "+ea+" "+l),n=xa("th",f,m),n.setAttribute("data-colAttr",l),d.appendChild(n),a.push({tr:d,th:n,clickStatus:ra,expandedCount:0,nHeaders:0}),h.appendChild(d)},b=function(i,a,b,c){var d,k,l,m,n;for(n=document.createElement("tr"),0!==b.length&&n.appendChild(xa("th",null,null,{colspan:b.length,rowspan:c.length})),fa(i,a,b,c,n,0),m=[],d=k=1,l=c.length;1<=l?k<=l:k>=l;d=1<=l?++k:--k)d<c.length&&(n=document.createElement("tr"),m.push(fa(i,a,b,c,n,d)));return m},ga=function(k,a,b){var c,l,m,n,o,p,q;for(n=b.length-1,p=[],l=m=0,o=n;0<=o?m<=o:m>=o;l=0<=o?++m:--m)l<n&&(q=k[l].th,c=b[l],p.push(q.onclick=function(c){return c=c||window.event,Qa(k,a,b,c.target.getAttribute("data-colAttr"))}));return p},ha=function(e,a,b,c,d){var f,h,l,r,s,t,u,v,w;for(s=b.children,l=0,r=s.length;l<r;l++)f=s[l],ha(e,a,f,c,d);return h=e[b.col],++h.expandedCount,++h.nHeaders,w=h.tr,v=b.th,v.setAttribute("data-colHeader",v.textContent),b.col===d.length-1&&0!==c.length&&v.setAttribute("rowspan",2),0!==b.children.length&&v.setAttribute("colspan",b.descendants+1),v.setAttribute("data-node",a.length),w.appendChild(v),0!==b.children.length&&(ba(v,ra),v.textContent=" "+ea+" "+v.textContent,v.onclick=function(b){return b=b||window.event,Pa(e,a,parseInt(b.target.getAttribute("data-node")))},t=d.length-(b.col+1)+(0===c.length?0:1),u="pvtColLabel pvtColSubtotal col"+b.row,v=xa("th",u,"",{rowspan:t}),b.children[0].tr.appendChild(v),b.sTh=v),b.clickStatus=ra,b.tr=w,a.push(b)},la=function(c,a,b,d){var e,h,m,o,p,q;for(h in q=document.createElement("tr"),a.hh=[],b)n.call(b,h)&&(m=b[h],o=m,e="pvtAxisLabel",h<b.length-1&&(e+=" expanded",o=" "+ea+" "+m),p=xa("th",e,o),p.setAttribute("data-rowAttr",m),q.appendChild(p),a.hh.push({th:p,clickStatus:ra,expandedCount:0,nHeaders:0}));return 0!==d.length&&(p=xa("th"),q.appendChild(p)),c.appendChild(q),a.tr=q},ma=function(k,a,b){var c,l,m,n,o,p,q;for(m=b.length-1,o=[],c=l=0,n=m;0<=n?l<=n:l>=n;c=0<=n?++l:--l)c<m&&(q=k.hh[c],p=b[c],o.push(q.th.onclick=function(c){return c=c||window.event,Sa(k,a,b,c.target.getAttribute("data-rowAttr"))}));return o},oa=function(d,a,b){var c,g;return c=1,0!==b.length&&(c=b.length+(0===a.length?0:1)),g=xa("th","pvtTotalLabel rowTotal",aa.localeStrings.totals,{rowspan:c}),d.appendChild(g)},na=function(e,h,b,a,c,d){var f,g,r,s,t,u,v,w,x;for(r=h.hh[a.col],++r.expandedCount,++r.nHeaders,x=document.createElement("tr"),w=a.th,w.setAttribute("rowspan",a.descendants+1),w.setAttribute("data-rowHeader",w.textContent),a.col===c.length-1&&0!==d.length&&w.setAttribute("colspan",2),w.setAttribute("data-node",b.length),x.appendChild(w),0!==a.children.length&&(ba(w,ra),w.textContent=" "+ea+" "+w.textContent,w.onclick=function(c){return c=c||window.event,Ra(h,b,parseInt(c.target.getAttribute("data-node")))},f=c.length-(a.col+1)+(0===d.length?0:1),w=xa("th","pvtRowLabel pvtRowSubtotal","",{colspan:f}),x.appendChild(w)),a.clickStatus=ra,a.tr=x,b.push(a),e.appendChild(x),u=a.children,v=[],s=0,t=u.length;s<t;s++)g=u[s],v.push(na(e,h,b,g,c,d));return v},pa=function(t,a){var b,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J;for(D=[],y=0,A=t.length;y<A;y++){for(E=t[y],I=E.tr,x=E.flatKey,z=0,B=a.length;z<B;z++)u=a[z],w=u.flatKey,b=null==(C=Ta[x][w])?{value:function(){return null},format:function(){return""}}:C,J=b.value(),F="pvtVal",0!==u.children.length&&(F+=" pvtColSubtotal"),0!==E.children.length&&(F+=" pvtRowSubtotal"),F+=" row"+E.row+" col"+u.row+" rowcol"+E.col+" colcol"+u.col,v=Fa(J,E.key,u.key),G=xa("td",F,b.format(J),{"data-value":J},v),I.appendChild(G);H=Na[x],J=H.value(),F="pvtTotal rowTotal",0!==E.children.length&&(F+=" pvtRowSubtotal"),F+=" row"+E.row+" rowcol"+E.col,G=xa("td",F,H.format(J),{"data-value":J,"data-row":"row"+E.row,"data-col":"col"+E.col},Fa(J,E.key,[])),D.push(I.appendChild(G))}return D},ja=function(d,a){var b,g,h;return h=document.createElement("tr"),b=d.length+(0===a.length?0:1),g=xa("th","pvtTotalLabel colTotal",aa.localeStrings.totals,{colspan:b}),h.appendChild(g),h},ia=function(k,a){var b,l,m,n,o,p,q,r;for(n=[],l=0,m=a.length;l<m;l++)b=a[l],q=sa[b.flatKey],r=q.value(),o="pvtVal pvtTotal colTotal",0!==b.children.length&&(o+=" pvtColSubtotal"),o+=" col"+b.row+" colcol"+b.col,p=xa("td",o,q.format(r),{"data-value":r,"data-for":"col"+b.col},Fa(r,[],b.key)),n.push(k.appendChild(p));return n},ka=function(f,a){var b,g,h;return g=ca,h=g.value(),b=xa("td","pvtGrandTotal",g.format(h),{"data-value":h},Fa(h,[],[])),a.appendChild(b),f.appendChild(a)},Oa=function(a,b){if(b.th.style.display=a,0===b.children.length?$(b.th).closest("table.pvtTable").find("tbody tr td.pvtVal.col"+b.row).not(".pvtColSubtotal").css("display",a):$(b.th).closest("table.pvtTable").find("tbody tr td.pvtColSubtotal.col"+b.row+".colcol"+b.col).css("display",a),b.sTh)return b.sTh.style.display=a},ta=function(g,a,b){var c,q,r,s,t,u,v,w,x,y,z,A;if(a[b]&&(s=a[b],s.clickStatus!==qa)){for(q=0,t=u=1,x=s.descendants;1<=x?u<=x:u>=x;t=1<=x?++u:--u)0!==s.descendants&&(r=a[b-t],"none"!==r.th.style.display&&(++q,Oa("none",r)));for(w=s.parent;null!==w;)w.th.setAttribute("colspan",parseInt(w.th.getAttribute("colspan"))-q),w=w.parent;if(0!==s.descendants&&(Ka(s.th,ra,qa),s.th.textContent=" "+da+" "+s.th.getAttribute("data-colHeader")),s.clickStatus=qa,s.th.setAttribute("colspan",1),s.th.style.display="",c=g[s.col],c.expandedCount--,0===c.expandedCount){for(A=[],t=v=y=s.col,z=g.length-2;y<=z?v<=z:v>=z;t=y<=z?++v:--v)c=g[t],Ka(c.th,ra,qa),c.th.textContent=" "+da+" "+c.th.getAttribute("data-colAttr"),A.push(c.clickStatus=qa);return A}}},za=function(g){var a,h,i,j,k;if("none"===g.th.style.display&&Oa("",g),g.clickStatus!==qa){for(j=g.children,k=[],h=0,i=j.length;h<i;h++)a=j[h],k.push(za(a));return k}},Ba=function(h,a,b){var c,m,n,o,p,q,r,s;if(a[b]&&(n=a[b],n.clickStatus!==ra)){for(m=0,s=n.children,p=0,q=s.length;p<q;p++)c=s[p],m+=c.th.colSpan,"none"===c.th.style.display&&Oa("",c),za(c);for(0!==n.descendants&&(Ka(n.th,qa,ra),n.th.textContent=" "+ea+" "+n.th.getAttribute("data-colHeader")),n.th.setAttribute("colspan",m+1),n.clickStatus=ra,n.th.style.display="",null!=n.sTh&&(n.sTh.style.display=""),r=n.parent;null!==r;)r.th.setAttribute("colspan",m+parseInt(r.th.getAttribute("colspan"))),r=r.parent;return o=h[n.col],++o.expandedCount,o.expandedCount===o.nHeaders?(Ka(o.th,qa,ra),o.th.textContent=" "+ea+" "+o.th.getAttribute("data-colAttr"),o.clickStatus=ra):void 0}},va=function(g,a,b){var c,r,s,t,u,v,w,x,y,z,A,B,C;if(a[b]&&(r=a[b],r.clickStatus!==qa)){for(C=0,s=u=1,x=r.descendants;1<=x?u<=x:u>=x;s=1<=x?++u:--u)0!==r.descendants&&(c=a[b+s],"none"!==c.tr.style.display&&(++C,c.tr.style.display="none"));for(w=r.parent;null!==w;)w.th.setAttribute("rowspan",parseInt(w.th.getAttribute("rowspan")-C)),w=w.parent;if(0!==r.descendants&&(Ka(r.th,ra,qa),r.th.textContent=" "+da+" "+r.th.getAttribute("data-rowHeader")),r.clickStatus=qa,r.th.setAttribute("rowspan",1),r.tr.style.display="",B=g.hh[r.col],B.expandedCount--,0===B.expandedCount){for(A=[],t=v=y=r.col,z=g.hh.length-2;y<=z?v<=z:v>=z;t=y<=z?++v:--v)B=g.hh[t],Ka(B.th,ra,qa),B.th.textContent=" "+da+" "+B.th.getAttribute("data-rowAttr"),A.push(B.clickStatus=qa);return A}}},Aa=function(g){var a,h,i,j,k;if("none"===g.tr.style.display&&(g.tr.style.display=""),g.clickStatus!==qa){for(j=g.children,k=[],h=0,i=j.length;h<i;h++)a=j[h],k.push(Aa(a));return k}},Da=function(h,a,b){var c,m,n,o,p,q,r,s;if(a[b]&&(m=a[b],m.clickStatus!==ra)){for(s=0,r=m.children,o=0,p=r.length;o<p;o++)c=r[o],s+=c.th.rowSpan,"none"===c.tr.style.display&&(c.tr.style.display=""),Aa(c);for(0!==m.descendants&&(Ka(m.th,qa,ra),m.th.textContent=" "+ea+" "+m.th.getAttribute("data-rowHeader")),m.th.setAttribute("rowspan",s+1),m.clickStatus=ra,m.tr.style.display="",q=m.parent;null!==q;)q.th.setAttribute("rowspan",s+parseInt(q.th.getAttribute("rowspan"))),q=q.parent;return n=h.hh[m.col],++n.expandedCount,n.expandedCount===n.nHeaders?(Ka(n.th,qa,ra),n.th.textContent=" "+ea+" "+n.th.getAttribute("data-rowAttr"),n.clickStatus=ra):void 0}},Pa=function(e,a,b){var c;if(null!=a[b])return c=a[b],c.clickStatus===qa?Ba(e,a,b):ta(e,a,b),c.th.scrollIntoView},Ra=function(d,a,b){if(null!=a[b])return a[b].clickStatus===qa?Da(d,a,b):va(d,a,b)},ua=function(g,a,b,c){var d,m,n,o,p,q,r;if(o="string"==typeof c?b.indexOf(c):c,!(0>o||o===b.length-1)){for(n=o,p=b.length-1;n<p;)m=g[n],Ka(m.th,ra,qa),m.th.textContent=" "+da+" "+b[n],m.clickStatus=qa,++n;for(n=0,q=a.length,r=[];n<q;)d=a[n],d.col===o&&d.clickStatus!==qa&&"none"!==d.th.style.display&&ta(g,a,parseInt(d.th.getAttribute("data-node"))),r.push(++n);return r}},Ca=function(g,a,b,c){var d,h,q,r,s,t,u,v,w,x;if(s="string"==typeof c?b.indexOf(c):c,!(0>s||s===b.length-1)){for(r=u=0,w=s;0<=w?u<=w:u>=w;r=0<=w?++u:--u)for(q=g[r],Ka(q.th,qa,ra),q.th.textContent=" "+ea+" "+b[r],q.clickStatus=ra,t=0,v=a.length;t<v;)h=a[t],h.col===r&&Ba(g,a,t),++t;for(++s,x=[];s<b.length-1;)d=g[s],0===d.expandedCount?(Ka(d.th,ra,qa),d.th.textContent=" "+da+" "+b[s],d.clickStatus=qa):d.expandedCount===d.nHeaders&&(Ka(d.th,qa,ra),d.th.textContent=" "+ea+" "+b[s],d.clickStatus=ra),x.push(++s);return x}},wa=function(g,a,b,c){var d,m,n,o,p,q,r;if(n="string"==typeof c?b.indexOf(c):c,!(0>n||n===b.length-1)){for(m=n,p=b.length-1;m<p;)d=g.hh[m],Ka(d.th,ra,qa),d.th.textContent=" "+da+" "+b[m],d.clickStatus=qa,++m;for(o=0,q=a.length,r=[];o<q;)d=a[o],d.col===n&&d.clickStatus!==qa&&"none"!==d.tr.style.display?(va(g,a,o),r.push(o=o+d.descendants+1)):r.push(++o);return r}},Ea=function(g,a,b,c){var d,h,q,r,s,t,u,v,w,x;if(r="string"==typeof c?b.indexOf(c):c,!(0>r||r===b.length-1)){for(q=t=0,v=r;0<=v?t<=v:t>=v;q=0<=v?++t:--t)for(h=g.hh[q],Ka(h.th,qa,ra),h.th.textContent=" "+ea+" "+b[q],h.clickStatus=ra,s=0,u=a.length;s<u;)d=a[s],d.col===q?(Da(g,a,s),s+=d.descendants+1):++s;for(++r,w=[];r<b.length-1;)x=g.hh[r],0===x.expandedCount?(Ka(x.th,ra,qa),x.th.textContent=" "+da+" "+b[r],x.clickStatus=qa):x.expandedCount===x.nHeaders&&(Ka(x.th,qa,ra),x.th.textContent=" "+ea+" "+b[r],x.clickStatus=ra),w.push(++r);return w}},Qa=function(g,a,b,c){var d,h;return h=b.indexOf(c),d=g[h],d.clickStatus===qa?Ca(g,a,b,c):ua(g,a,b,c)},Sa=function(g,a,b,c){var d,h;return d=b.indexOf(c),h=g.hh[d],h.clickStatus===qa?Ea(g,a,b,c):wa(g,a,b,c)},(Ha=function(d,a,j,c){var e,k,l,m,n,o,p,q,r,s,t,A,C,H,I;if(A=[],l=[],s={},t=[],k=[],e=[],0<d.length&&0<a.length&&(A=Ia(a,"pvtRowLabel")),0<j.length&&0<c.length&&(l=Ia(c,"pvtColLabel")),r=document.createElement("table"),r.className="pvtTable",r.style.display="none",H=document.createElement("thead"),r.appendChild(H),0<j.length){for(b(H,k,d,j),n=0,p=l.length;n<p;n++)m=l[n],ha(k,e,m,d,j);ga(k,e,j)}if(0<d.length&&(la(H,s,d,j),0===j.length&&oa(s.tr,d,j)),0<j.length&&oa(k[0].tr,d,j),C=document.createElement("tbody"),r.appendChild(C),0<d.length)for(o=0,q=A.length;o<q;o++)m=A[o],na(C,s,t,m,d,j);return ma(s,t,d),pa(t,e),I=ja(d,j),0<j.length&&ia(I,e),ka(C,I),r.setAttribute("data-numrows",a.length),r.setAttribute("data-numcols",c.length),null==aa.collapseRowsAt&&null==aa.collapseColsAt&&(r.style.display=""),null!=aa.collapseRowsAt&&wa(s,t,d,aa.collapseRowsAt),null==aa.collapseColsAt?(r.style.display="",r):(null!=aa.collapseColsAt&&ua(k,e,j,aa.collapseColsAt),r.style.display="",r)})(La,Ma,a,c)},$.pivotUtilities.subtotal_renderers={"Table With Subtotal":function(c,a){return d(c,a)},"Table With Subtotal Bar Chart":function(a,b){return $(d(a,b)).barchart()},"Table With Subtotal Heatmap":function(a,b){return $(d(a,b)).heatmap("heatmap",b)},"Table With Subtotal Row Heatmap":function(a,b){return $(d(a,b)).heatmap("rowheatmap",b)},"Table With Subtotal Col Heatmap":function(a,b){return $(d(a,b)).heatmap("colheatmap",b)}},j=$.pivotUtilities.numberFormat({digitsAfterDecimal:1,scaler:100,suffix:"%"}),b=$.pivotUtilities.aggregatorTemplates,c={fractionOf:function(h,a,i){return null==a&&(a="row"),null==i&&(i=j),function(){var b;return b=1<=arguments.length?g.call(arguments,0):[],function(c,d,e){return"undefined"==typeof d&&(d=[]),"undefined"==typeof e&&(e=[]),{selector:{row:[d.slice(0,-1),[]],col:[[],e.slice(0,-1)]}[a],inner:h.apply(null,b)(c,d,e),push:function(b){return this.inner.push(b)},format:i,value:function(){return this.inner.value()/c.getAggregator.apply(c,this.selector).inner.value()},numInputs:h.apply(null,b)().numInputs}}}}},$.pivotUtilities.subtotalAggregatorTemplates=c,$.pivotUtilities.subtotal_aggregators=function(c,a){return{"Sum As Fraction Of Parent Row":a.fractionOf(c.sum(),"row",j),"Sum As Fraction Of Parent Column":a.fractionOf(c.sum(),"col",j),"Count As Fraction Of Parent Row":a.fractionOf(c.count(),"row",j),"Count As Fraction Of Parent Column":a.fractionOf(c.count(),"col",j)}}(b,c)})}).call(this);